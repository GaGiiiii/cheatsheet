<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GaGi'S CheatSheet</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        html {
            scroll-behavior: smooth;
        }

        .important-color {
            color: #e61d02 !important;
        }

        #menu {
            position: fixed;
            left: 25px;
            top: 25px;
            /* width: 175px; */
        }

        #col-right {
            box-sizing: border-box;
        }

        .list-group-item:hover {
            transition: .4s background-color linear;
        }

        .list-group-item:hover {
            background-color: #007bff;
            color: white;
        }

        .collapse-btn-G,
        .collapse-btn-G:active,
        .collapse-btn-G:focus {
            background: none !important;
            border: none !important;
            box-shadow: none !important;
        }

        .collapse-btn-G .collapse-arrow {
            transform: rotate(90deg);
            display: inline-block;
            transition: transform .2s ease-in-out;
        }

        .collapse-btn-G.collapsed .collapse-arrow {
            transform: rotate(0);
            display: inline-block;
        }

        .collapse-arrow {
            color: black;
            font-size: 50px;
            position: relative;
            margin-left: 10px;
        }

        @media only screen and (max-width: 768px) {
            #menu-container {
                display: none;
            }

            #col-right {
                padding-left: 1rem;
                padding-right: 1rem !important;
            }
        }
    </style>
</head>

<body data-spy="scroll" data-offset="100" data-target="#menu">


    <div class="container-fluid">
        <div class="row">

            <div class="col-lg-2 col-md-3 my-5" id="menu-container">
                <div id="menu" class="list-group">
                    <a class="list-group-item list-group-item-action" data-menu-item="laravel"
                        href="#laravel">Laravel</a>
                    <a class="list-group-item list-group-item-action" data-menu-item="php" href="#php">PHP</a>
                    <a class="list-group-item list-group-item-action" data-menu-item="nodejs" href="#nodejs">NodeJS</a>
                    <a class="list-group-item list-group-item-action" data-menu-item="js" href="#js">JS</a>
                    <a class="list-group-item list-group-item-action" data-menu-item="js"
                        href="#bootstrap">BOOTSTRAP</a>
                    <a class="list-group-item list-group-item-action" data-menu-item="html" href="#html">HTML</a>
                    <a class="list-group-item list-group-item-action" data-menu-item="css" href="#css">CSS</a>
                    <a class="list-group-item list-group-item-action" data-menu-item="owl-carousel"
                        href="#owl-carousel">Owl
                        Carousel</a>
                    <a class="list-group-item list-group-item-action" data-menu-item="ajax" href="#ajax">Ajax</a>
                    <a class="list-group-item list-group-item-action" data-menu-item="axios" href="#axios">Axios</a>
                    <a class="list-group-item list-group-item-action" data-menu-item="java" href="#java">Java</a>
                    <a class="list-group-item list-group-item-action" data-menu-item="java-2" href="#java-2">Java 2</a>
                    <a class="list-group-item list-group-item-action" data-menu-item="joni" href="#joni">Joni</a>
                    <a class="list-group-item list-group-item-action" data-menu-item="is" href="#is">IS</a>
                </div>
            </div>

            <div id="col-right" class="col-lg-10 col-md-9 col-sm-12 mb-5 mt-3 pr-5">

                <!-- ---------- LARAVEL ---------- -->
                <div id="laravel">
                    <h1 class="collapse-btn-G collapsed mb-5" type="button" data-toggle="collapse"
                        data-target="#laravel-collapse" aria-expanded="false" aria-controls="laravel-collapse">
                        <u>Laravel</u>
                        <span class="collapse-arrow">&#8250;</span>
                    </h1>

                    <div class="collapse" id="laravel-collapse">


                        <form id="laravel-generate-terminal-commands-form"
                            class="mb-5 w-50 rounded border border-secondary shadow px-3 py-3">
                            <div class="form-group">
                                <label>Enter resource name</label>
                                <input id='resource-name' type="text" class="form-control"
                                    placeholder="Eg. User | Newsletter | Movie | NewsletterLocation | NewsletterClient">
                            </div>
                            <div id="project-location-div" class="form-group d-none">
                                <label>Enter project location</label>
                                <input id='project-location-input' type="text" class="form-control"
                                    placeholder="Eg. /var/www/project_name | /home/username/project_name">
                            </div>
                            <div class="text-center">
                                <div>
                                    <div class="form-check form-check">
                                        <input id="laravel-checkbox-all" class="form-check-input" type="checkbox"
                                            value="all">
                                        <label class="form-check-label">Check all</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="checkbox" value="migration">
                                        <label class="form-check-label">Migration</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="checkbox" value="model">
                                        <label class="form-check-label">Model</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="checkbox" value="dto">
                                        <label class="form-check-label">DTO</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="checkbox" value="service">
                                        <label class="form-check-label">Service</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="checkbox" value="controller">
                                        <label class="form-check-label">Controller</label>
                                    </div>
                                </div>
                                <div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="checkbox" value="resource">
                                        <label class="form-check-label">Resource</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="checkbox" value="requests">
                                        <label class="form-check-label">Requests</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="checkbox" value="factory">
                                        <label class="form-check-label">Factory</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="checkbox" value="feature">
                                        <label class="form-check-label">Feature test</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="checkbox" value="unit">
                                        <label class="form-check-label">Unit test</label>
                                    </div>
                                </div>
                            </div>
                            <button id="generate-commands-btn" type="submit" class="btn btn-primary w-100 mt-2">Generate
                                commands</button>
                        </form>

                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Migration Class - Thunder, SDS
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExample4" aria-expanded="false"
                                aria-controls="collapseExample4">+</button>
                            <button data-title="migration" class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
&lt;?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

class AddVerticalIdColumnToWidgetsTable extends Migration
{
    /**
        * Run the migrations.
        *
        * @return void
        */
    public function up()
    {
        Schema::table('widgets', function (Blueprint $table) {
            $table-&gt;unsignedBigInteger('url_id')-&gt;nullable()-&gt;after('uuid')-&gt;change();
            $table-&gt;dropForeign('widgets_url_id_foreign');
            $table-&gt;foreign('url_id')-&gt;references('id')-&gt;on('client_urls')-&gt;onDelete('set null');

            $table-&gt;unsignedBigInteger('vertical_id')-&gt;nullable()-&gt;after('status')-&gt;default(1);
            $table-&gt;foreign('vertical_id')-&gt;references('id')-&gt;on('verticals')-&gt;onDelete('set null');

            $table-&gt;timestamp('created_at')-&gt;default(\DB::raw('CURRENT_TIMESTAMP'));
            $table-&gt;timestamp('updated_at')-&gt;default(\DB::raw('CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'));
        });
    }

    /**
        * Reverse the migrations.
        *
        * @return void
        */
    public function down()
    {
        Schema::table('widgets', function (Blueprint $table) {
            $table-&gt;dropForeign(['vertical_id']);
            $table-&gt;dropColumn('vertical_id');
        });
    }
}            

</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->





                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            DTO Class - Thunder, SDS
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExample4" aria-expanded="false"
                                aria-controls="collapseExample4">+</button>
                            <button data-title="dto" class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
&lt;?php

namespace App\Data\User;

use App\Models\Role;
use Illuminate\Http\Request;
use Spatie\DataTransferObject\DataTransferObject;

class UserData extends DataTransferObject
{
    public string $name;
    public string $email;
    public ?string $password;
    public Role $role;

    public static function fromRequest(Request $request)
    {
        return new static([
            'name' =&gt; $request-&gt;name,
            'email' =&gt; $request-&gt;email,
            'password' =&gt; $request-&gt;password,
            'role' =&gt; Role::findById($request-&gt;role_id)
        ]);
    }
}
            
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->





                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Service Class - Thunder, SDS
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExample4" aria-expanded="false"
                                aria-controls="collapseExample4">+</button>
                            <button data-title="service" class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
&lt;?php

namespace App\Services\User;

use App\Data\User\UserData;
use App\Models\User;
use Illuminate\Database\Eloquent\ModelNotFoundException;
use Illuminate\Pagination\LengthAwarePaginator;
use Illuminate\Support\Facades\Hash;
use Illuminate\Support\Facades\Log;

class UserService
{

    /**
        * Retrieves all the categories.
        *
        * @return LengthAwarePaginator
        */
    public function getAll(): LengthAwarePaginator
    {
        return User::paginate(10);
    }

    /**
        * Retrieves single User.
        *
        * @param int $id
        * @return User
        * @throws ModelNotFoundException
        */
    public function getById(int $id): ?User
    {
        return User::findOrFail($id);
    }

    /**
        * Creates a new User.
        *
        * @param UserData $userData
        * @return User
        */
    public function create(UserData $userData): User
    {
        $user = new User();
        $userData-&gt;password = Hash::make($userData-&gt;password);
        $user = $user-&gt;create($userData-&gt;toArray());

        return $user;
    }

    /**
        * Updates a existing User.
        *
        * @param UserData $userData
        * @param User|null $user
        * @return User
        * @throws ModelNotFoundException
        */
    public function update(UserData $userData, ?User $user): User
    {
        if ($user === null) {
            throw new ModelNotFoundException();
        }

        if ($userData-&gt;password === null) {
            $user-&gt;update($userData-&gt;except('password')-&gt;toArray());

            return $user-&gt;refresh();
        }

        $userData-&gt;password = Hash::make($userData-&gt;password);
        $user-&gt;update($userData-&gt;toArray());

        return $user-&gt;refresh();
    }

    /**
        * Deletes a existing User.
        *
        * @param User $user
        * @return User
        */
    public function delete(?User $user): User
    {
        if ($user === null) {
            throw new ModelNotFoundException();
        }

        $user-&gt;delete();

        return $user;
    }
}            
            
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->




                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Controller Class - Thunder, SDS
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExample4" aria-expanded="false"
                                aria-controls="collapseExample4">+</button>
                            <button data-title="controller" class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
&lt;?php

namespace App\Http\Controllers\User;

use App\Http\Controllers\Controller;
use App\Data\User\UserData;
use App\Http\Requests\User\GetAllUsersRequest;
use App\Http\Requests\User\GetUserRequest;
use App\Http\Requests\User\CreateUserRequest;
use App\Http\Requests\User\DeleteUserRequest;
use App\Http\Requests\User\UpdateUserRequest;
use App\Http\Resources\User\UserResource;
use App\Services\User\UserService;
use Doctrine\DBAL\Query\QueryException;
use Exception;
use Illuminate\Database\Eloquent\ModelNotFoundException;
use Illuminate\Http\JsonResource;
use Illuminate\Support\Facades\Log;

class UserController extends Controller
{

    private UserService $userService;

    public function __construct(UserService $userService)
    {
        $this-&gt;userService = $userService;
    }

    /**
        * Display a listing of the resource.
        *
        * @param GetAllUsersRequest $request
        * @return JsonResource
        */
    public function index(GetAllUsersRequest $request)
    {
        try {
            $users = $this-&gt;userService-&gt;getAll();
        } catch (QueryException $e) {
            Log::error('GetAll Users Query Error', [$e-&gt;getMessage()]);

            return response()-&gt;json([
                "data" =&gt; null,
                "message" =&gt; "Server error.",
            ], 500);
        } catch (Exception $e) {
            Log::error('GetAll Users Exception Error', [$e-&gt;getMessage()]);

            return response()-&gt;json([
                "data" =&gt; null,
                "message" =&gt; "Server error.",
            ], 500);
        }

        return (UserResource::collection($users))-&gt;additional([
            'message' =&gt; 'Users found.'
        ]);
    }

    /**
        * Store a newly created resource in storage.
        *
        * @param  CreateUserRequest  $request
        * @return JsonResource
        */
    public function store(CreateUserRequest $request)
    {
        try {
            $user = $this-&gt;userService-&gt;create(UserData::fromRequest($request));
        } catch (QueryException $e) {
            Log::error('Create User Query Error', [$e-&gt;getMessage()]);

            return response()-&gt;json([
                "data" =&gt; null,
                "message" =&gt; "Server error.",
            ], 500);
        } catch (Exception $e) {
            Log::error('Create User Exception Error', [$e-&gt;getMessage()]);

            return response()-&gt;json([
                "data" =&gt; null,
                "message" =&gt; "Server error.",
            ], 500);
        }

        return (new UserResource($user))-&gt;additional([
            'message' =&gt; 'User created.'
        ])-&gt;response()-&gt;setStatusCode(201);
    }

    /**
        * Display the specified resource.
        *
        * @param  GetUserRequest  $request
        * @param  int  $id
        * @return JsonResource
        */
    public function show(GetUserRequest $request, int $id)
    {
        try {
            $user = $this-&gt;userService-&gt;getById($id);
        } catch (QueryException $e) {
            Log::error('Get User Query Error', [$e-&gt;getMessage()]);

            return response()-&gt;json([
                "data" =&gt; null,
                "message" =&gt; "Server error.",
            ], 500);
        } catch (ModelNotFoundException $e) {
            return response()-&gt;json([
                "data" =&gt; null,
                "message" =&gt; "User not found.",
            ], 404);
        } catch (Exception $e) {
            Log::error('Get User Exception Error', [$e-&gt;getMessage()]);

            return response()-&gt;json([
                "data" =&gt; null,
                "message" =&gt; "Server error.",
            ], 500);
        }

        return (new UserResource($user))-&gt;additional([
            'message' =&gt; 'User found.'
        ]);
    }

    /**
        * Update the specified resource.
        *
        * @param  UpdateUserRequest  $request
        * @param  int  $id
        * @return JsonResource
        */
    public function update(UpdateUserRequest $request, $id)
    {
        try {
            $user = $this-&gt;userService-&gt;update(UserData::fromRequest($request), $request-&gt;user);
        } catch (QueryException $e) {
            Log::error('Update User Query Error', [$e-&gt;getMessage()]);

            return response()-&gt;json([
                "data" =&gt; null,
                "message" =&gt; "Server error.",
            ], 500);
        } catch (ModelNotFoundException $e) {
            return response()-&gt;json([
                "data" =&gt; null,
                "message" =&gt; "User not found.",
            ], 404);
        } catch (Exception $e) {
            Log::error('Update User Exception Error', [$e-&gt;getMessage()]);

            return response()-&gt;json([
                "data" =&gt; null,
                "message" =&gt; "Server error.",
            ], 500);
        }

        return (new UserResource($user))-&gt;additional([
            'message' =&gt; 'User updated.'
        ]);
    }

    /**
        * Delete the specified resource.
        *
        * @param  DeleteUserRequest  $request
        * @param  int  $id
        * @return JsonResource
        */
    public function destroy(DeleteUserRequest $request, $id)
    {
        try {
            $user = $this-&gt;userService-&gt;delete($request-&gt;user);
        } catch (QueryException $e) {
            Log::error('Delete User Query Error', [$e-&gt;getMessage()]);

            return response()-&gt;json([
                "data" =&gt; null,
                "message" =&gt; "Server error.",
            ], 500);
        } catch (ModelNotFoundException $e) {
            return response()-&gt;json([
                "data" =&gt; null,
                "message" =&gt; "User not found.",
            ], 404);
        } catch (Exception $e) {
            Log::error('Delete User Exception Error', [$e-&gt;getMessage()]);

            return response()-&gt;json([
                "data" =&gt; null,
                "message" =&gt; "Server error.",
            ], 500);
        }

        return (new UserResource($user))-&gt;additional([
            'message' =&gt; 'User deleted.'
        ]);
    }
}
            
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->





                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Update/Delete Request Class - Thunder, SDS
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExample4" aria-expanded="false"
                                aria-controls="collapseExample4">+</button>
                            <button data-title="request" class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
&lt;?php

namespace App\Http\Requests\User;

use App\Services\User\UserService;
use Exception;
use Illuminate\Contracts\Validation\Validator;
use Illuminate\Database\Eloquent\ModelNotFoundException;
use Illuminate\Foundation\Http\FormRequest;
use Illuminate\Support\Facades\Log;
use Illuminate\Validation\Rule;
use Illuminate\Validation\ValidationException;

class UpdateUserRequest extends FormRequest
{

    private UserService $userService;

    public function __construct(UserService $userService)
    {
        $this-&gt;userService = $userService;
    }

    /**
        * Determine if the user is authorized to make this request.
        *
        * @return bool
        */
    public function authorize()
    {
        try {
            $this-&gt;user = $this-&gt;userService-&gt;getById($this-&gt;route('user'));
        } catch (ModelNotFoundException $e) {
            $this-&gt;user = null;

            return true;
        }

        return auth()-&gt;check() &amp;&amp; auth()-&gt;user()-&gt;isUBER();
    }

    /**
        * Get the validation rules that apply to the request.
        *
        * @return array
        */
    public function rules()
    {
        return [
            'email' =&gt; 'email|required|max:255|unique:mysql_users.screener_users.users,email,' . $this-&gt;user-&gt;id,
            'password' =&gt; 'string|nullable|max:255',
            'name' =&gt; 'string|required|max:255',
            'role_id' =&gt; [
                'bail',
                'required',
                'integer',
                Rule::in([2]),
            ],
            'vertical_id' =&gt; [
                'bail',
                'required',
                'integer',
                'exists:verticals,id',
            ],
            'target_audience_info' =&gt; [
                'required',
                // Mora da bude sledece strukture:
                // [{"6":{"countries":[{"2":1},{"201":1}],"mail_driver":"1"}},{"7":{"countries":[{"201":2}],"mail_driver":"1"}}]
                // Imamo niz gde su keys CLIENTIDs, a values su novi nizovi i unutar njih se nalazi COUNTREIS i MAIL_DRIVER
                // Countries je takodje niz koji u sebi sadrzi novi niz key value pairsa gde je key ZEMLJAID aa value OFFERID
                // Na primer: {"201":1} - 201: zemljaID, 1: offerID
                function ($attribute, $value, $fail) {
                    foreach ($value as $clientKEY =&gt; $clientValue) {
                        // [{"6":{"countries":[{"2":1},{"201":1}],"mail_driver":"1"}},{"7":{"countries":[{"201":2}],"mail_driver":"1"}}]
                        $helpArr = $clientValue[key($clientValue)]; // {"countries":[{"2":1},{"201":1}],"mail_driver":"1"}
                        $helpArrKeys = array_keys($helpArr); // Only countries and mail driver allowed

                        // We should only have 2 keys, countries | mail_driver
                        foreach ($helpArrKeys as $helpArrKey) {
                            if ($helpArrKey !== 'countries' &amp;&amp; $helpArrKey !== 'mail_driver') {
                                $fail('Target audience info field is required.');
                                // $fail('Target audience info is in invalid format.');

                                return;
                            }
                        }

                        // Log::debug(['help' =&gt; $helpArr, 'empty' =&gt; empty($helpArr['countries'])]);

                        if (empty($helpArr['countries']) || empty($helpArr['countries'][0])) {
                            $fail('Target audience info field is in invalid format. Country or offer is not selected.');

                            return;
                        }

                        // $countryAndOffer - {"201":1}
                        foreach ($helpArr['countries'] as $countryAndOffer) {
                            // Log::debug(['candoffer' =&gt; $countryAndOffer]);

                            foreach ($countryAndOffer as $country =&gt; $offer) {
                                // Log::debug(['country' =&gt; $country, 'offer' =&gt; $offer]);

                                // Country and offer should be numbers
                                if (!is_numeric($country) || !is_numeric($offer) || $country === 0) {
                                    $fail('Target audience info field is in invalid format. Country or offer is
                                    not selected.');

                                    return;
                                }
                            }
                        }

                        // Mail driver value must be number
                        if (!is_numeric($helpArr['mail_driver'])) {
                            $fail('Target audience info field is in invalid format. Mail driver is not selected.');

                            return;
                        }
                    }
                }
            ],
        ];
    }

    protected function failedAuthorization()
    {
        throw new CustomFailedAuthorizationException();
    }

//    protected function failedValidation(Validator $validator)
//    {
//        $response = response()-&gt;json([
//            'category' =&gt; null,
//            'message' =&gt; 'Validation failed.',
//            'errors' =&gt; $validator-&gt;messages(),
//            ], 400);
//
//        throw new ValidationException($validator, $response);
//    }
}
            
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->



                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            CustomFailedAuthorizationException Class - Hypk
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExample4" aria-expanded="false"
                                aria-controls="collapseExample4">+</button>
                            <button data-title="cfae" class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
&lt;?php

namespace App\Exceptions\Users;

use Exception;

class CustomFailedAuthorizationException extends Exception
{
    public function render($request)
    {
        return response()-&gt;json([
            "message" =&gt; "Unauthorized action.",
        ], 401);
    }
}
            
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->



                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Factory Class - Thunder
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExample4" aria-expanded="false"
                                aria-controls="collapseExample4">+</button>
                            <button data-title="factory" class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
&lt;?php

namespace Database\Factories;

use App\Models\MarketingTemplatesFormat;
use Illuminate\Database\Eloquent\Factories\Factory;

class MarketingTemplateFactory extends Factory
{
    /**
     * Define the model's default state.
     *
     * @return array
     */
    public function definition()
    {
        return [
            'name' =&gt; $this-&gt;faker-&gt;name(),
            'format_id' =&gt; MarketingTemplatesFormat::factory()-&gt;create()-&gt;id,
            'description' =&gt; $this-&gt;faker-&gt;text(),
            'html' =&gt; $this-&gt;faker-&gt;text(),
        ];
    }
}

</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->




                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Feature Test Class (User) - Thunder
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExample4" aria-expanded="false"
                                aria-controls="collapseExample4">+</button>
                            <button data-title="feature-user" class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
&lt;?php

namespace Tests\Feature\User;

use App\Models\User;
use Illuminate\Foundation\Testing\RefreshDatabase;
use Illuminate\Foundation\Testing\WithFaker;
use Illuminate\Support\Facades\Log;
use Illuminate\Support\Str;
use Laravel\Passport\Passport;
use Spatie\Permission\Models\Role;
use Tests\TestCase;

class UserTest extends TestCase
{
    use RefreshDatabase;
    use WithFaker;

    /**
     * @group userTests
     * @group userTestsAdd
     */
    public function test_register_new_user()
    {
        $response = $this-&gt;postJson('/api/v1/register', [
            'first_name' =&gt; 'GaGi',
            'last_name' =&gt; 'Fhnfh',
            'phone' =&gt; '1234567',
            'address' =&gt; 'Test Address',
            'company' =&gt; 'Test Company',
            'website' =&gt; 'https://google.com',
            'email' =&gt; 'milica.petrovic1@gmail.com',
            'password' =&gt; 'bananastolicakupus123...',
            'password_confirmation' =&gt; 'bananastolicakupus123...'
        ]);

        $response
            -&gt;assertStatus(200)
            -&gt;assertJsonFragment(['message' =&gt; 'User Created']);
    }

    /**
     * @group userTests
     * @group userTestsAdd
     */
    public function test_register_new_user_invalid_data()
    {
        $response = $this-&gt;postJson('/api/v1/register', [
            'last_name' =&gt; 'Fhnfh',
            'phone' =&gt; '1234567',
            'address' =&gt; 'Test Address',
            'company' =&gt; 'Test Company',
            'website' =&gt; 'httasps://google.com',
            'email' =&gt; 'milica.petrovdsadsadsaic1@gmail.com',
            'password' =&gt; 'bananastodsalicakupus123...',
            'password_confirmation' =&gt; 'bananastolicakupus123...'
        ]);

        $response
            -&gt;assertStatus(422)
            -&gt;assertJsonFragment([
                'email' =&gt; ['Email account invalid'],
                'password' =&gt; ['The password confirmation does not match.'],
                'first_name' =&gt; ['The first name field is required.'],
                'website' =&gt; ['The website format is invalid.']
            ]);
    }

    /**
     * @group userTests
     * @group userTestsAdd
     */
    public function test_register_new_user_invalid_data_weak_password()
    {
        $response = $this-&gt;postJson('/api/v1/register', [
            'last_name' =&gt; 'Fhnfh',
            'phone' =&gt; '1234567',
            'address' =&gt; 'Test Address',
            'company' =&gt; 'Test Company',
            'website' =&gt; 'httasps://google.com',
            'email' =&gt; 'milica.petrovdsadsadsaic1@gmail.com',
            'password' =&gt; '12345678',
            'password_confirmation' =&gt; '12345678'
        ]);

        $response
            -&gt;assertStatus(422)
            -&gt;assertJsonFragment([
                'email' =&gt; ['Email account invalid'],
                'password' =&gt; ['This password is not secure. Please use more complex password.'],
                'first_name' =&gt; ['The first name field is required.'],
                'website' =&gt; ['The website format is invalid.']
            ]);
    }

    /**
     * @group userTests
     * @group userTestsLogout
     */
    public function test_logout()
    {
        $user = User::factory()-&gt;create();
        Passport::actingAs($user);

        $response = $this-&gt;getJson('/api/v1/logout');

        $response
            -&gt;assertStatus(200)
            -&gt;assertJsonFragment([
                'message' =&gt; 'Successfully logged out'
            ]);
    }

    /**
     * @group userTests
     * @group userTestsLogout
     */
    public function test_logout_not_logged_in()
    {
        $response = $this-&gt;getJson('/api/v1/logout');

        $response
            -&gt;assertStatus(401)
            -&gt;assertJsonFragment([
                'message' =&gt; 'Unauthenticated.'
            ]);
    }

    /**
     * @group userTests
     * @group userTestsLogin
     */
    public function test_login_already_logged_in()
    {
        $user = User::factory()-&gt;create();
        Passport::actingAs($user);

        $response = $this-&gt;postJson('/api/v1/login', [
            'email' =&gt; 'admin@thunder.com',
            'password' =&gt; 'password'
        ]);

        $response-&gt;assertStatus(403);
    }

    // ==================================== CREATE CLIENTS ====================================

    /**
     * @group userTests
     * @group userTestsCreateClient
     */
    public function test_create_client_client()
    {
        $user = User::factory()-&gt;create();
        $user-&gt;assignRole('Client');
        Passport::actingAs($user);

        $response = $this-&gt;postJson('/api/v1/clients', [
            'first_name' =&gt; 'GaGi',
            'last_name' =&gt; 'Fhnfh',
            'phone' =&gt; rand(1000000, 9999999) . "",
            'address' =&gt; 'Test Address',
            'company' =&gt; 'Test Company',
            'website' =&gt; 'https://google.com',
            'email' =&gt; 'milica.petrovic1@gmail.com',
            'password' =&gt; 'bananastolicakupus123...',
            'password_confirmation' =&gt; 'bananastolicakupus123...',
            'vertical_id' =&gt; 1,
            'service_modal_id' =&gt; 1
        ]);

        $response-&gt;assertStatus(403);
    }

    /**
     * @group userTests
     * @group userTestsCreateClient
     */
    public function test_create_client()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Administrator');
        Passport::actingAs($user);

        $response = $this-&gt;postJson('/api/v1/clients', [
            'first_name' =&gt; 'GaGi',
            'last_name' =&gt; 'Fhnfh',
            'phone' =&gt; rand(1000000, 9999999) . "",
            'address' =&gt; 'Test Address',
            'company' =&gt; 'Test Company',
            'website' =&gt; 'https://google.com',
            'email' =&gt; 'milica.petrovic1@gmail.com',
            'password' =&gt; 'bananastolicakupus123...',
            'password_confirmation' =&gt; 'bananastolicakupus123...',
            'vertical_id' =&gt; 1,
            'service_modal_id' =&gt; 1
        ]);

        $response
            -&gt;assertStatus(200)
            -&gt;assertJsonFragment(['message' =&gt; 'New Client Created.']);
    }

    /**
     * @group userTests
     * @group userTestsCreateClient
     */
    public function test_create_client_account_manager()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Account Manager');
        Passport::actingAs($user);

        $response = $this-&gt;postJson('/api/v1/clients', [
            'first_name' =&gt; 'GaGi',
            'last_name' =&gt; 'Fhnfh',
            'phone' =&gt; rand(1000000, 9999999) . "",
            'address' =&gt; 'Test Address',
            'company' =&gt; 'Test Company',
            'website' =&gt; 'https://google.com',
            'email' =&gt; 'milica.petrovic1@gmail.com',
            'password' =&gt; 'bananastolicakupus123...',
            'password_confirmation' =&gt; 'bananastolicakupus123...',
            'vertical_id' =&gt; 1,
            'service_modal_id' =&gt; 1
        ]);

        $response
            -&gt;assertStatus(200)
            -&gt;assertJsonFragment(['message' =&gt; 'New Client Created.']);
    }

    /**
     * @group userTests
     * @group userTestsCreateClient
     */
    public function test_create_client_marketing_administrator()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Marketing');
        Passport::actingAs($user);

        $response = $this-&gt;postJson('/api/v1/clients', [
            'first_name' =&gt; 'GaGi',
            'last_name' =&gt; 'Fhnfh',
            'phone' =&gt; rand(1000000, 9999999) . "",
            'address' =&gt; 'Test Address',
            'company' =&gt; 'Test Company',
            'website' =&gt; 'https://google.com',
            'email' =&gt; 'milica.petrovic1@gmail.com',
            'password' =&gt; 'bananastolicakupus123...',
            'password_confirmation' =&gt; 'bananastolicakupus123...',
            'vertical_id' =&gt; 1,
            'service_modal_id' =&gt; 1
        ]);

        $response-&gt;assertStatus(403);
    }

    /**
     * @group userTests
     * @group userTestsCreateClient
     */
    public function test_create_client_not_logged_in()
    {
        $response = $this-&gt;postJson('/api/v1/clients', [
            'first_name' =&gt; 'GaGi',
            'last_name' =&gt; 'Fhnfh',
            'phone' =&gt; rand(1000000, 9999999) . "",
            'address' =&gt; 'Test Address',
            'company' =&gt; 'Test Company',
            'website' =&gt; 'https://google.com',
            'email' =&gt; 'milica.petrovic1@gmail.com',
            'password' =&gt; 'bananastolicakupus123...',
            'password_confirmation' =&gt; 'bananastolicakupus123...',
            'vertical_id' =&gt; 1,
            'service_modal_id' =&gt; 1
        ]);

        $response
            -&gt;assertStatus(401)
            -&gt;assertJsonFragment(['message' =&gt; 'Unauthenticated.']);
    }

    /**
     * @group userTests
     * @group userTestsCreateClient
     */
    public function test_create_client_invalid_data()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Administrator');
        Passport::actingAs($user);

        $response = $this-&gt;postJson('/api/v1/clients', [
            'first_name' =&gt; 'GaGi',
            'last_name' =&gt; 'Fhnfh',
            'phone' =&gt; "123456",
            'address' =&gt; 'Test Address',
            'company' =&gt; 'Test Company',
            'website' =&gt; 'hsadps:/asgle.com',
            'email' =&gt; 'milica.peastrovic1@gmail.com',
            'password' =&gt; 'aaaaaa...',
            'password_confirmation' =&gt; 'aaaaaa...',
            'vertical_id' =&gt; "dsa",
        ]);

        $response
            -&gt;assertStatus(422)
            -&gt;assertJsonFragment([
                'message' =&gt; 'The given data was invalid.',
                'errors' =&gt; [
                    'vertical_id' =&gt; ['The vertical id must be an integer.'],
                    'service_modal_id' =&gt; ['The service modal id field is required.'],
                    'password' =&gt; ['This password is not secure. Please use more complex password.']
                ]
            ]);
    }

    // ==================================== GET CLIENTS ====================================

    /**
     * @group userTests
     * @group userTestsGetClients
     */
    public function test_get_all_clients_not_logged_in()
    {
        $response = $this-&gt;getJson('/api/v1/clients');

        $response
            -&gt;assertStatus(401)
            -&gt;assertJsonFragment(['message' =&gt; 'Unauthenticated.']);
    }

    /**
     * @group userTests
     * @group userTestsGetClients
     */
    public function test_get_all_clients_client()
    {
        $user = User::factory()-&gt;create();
        $user-&gt;assignRole('Client');
        Passport::actingAs($user);

        $response = $this-&gt;getJson('/api/v1/clients');

        $response-&gt;assertStatus(403);
    }

    /**
     * @group userTests
     * @group userTestsGetClients
     */
    public function test_get_all_clients_administrator()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Administrator');
        Passport::actingAs($user);

        $response = $this-&gt;getJson('/api/v1/clients');

        $response-&gt;assertStatus(200);
    }

    /**
     * @group userTests
     * @group userTestsGetClients
     */
    public function test_get_all_clients_account_manager()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Account Manager');
        Passport::actingAs($user);

        $response = $this-&gt;getJson('/api/v1/clients');

        $response-&gt;assertStatus(200);
    }

    /**
     * @group userTests
     * @group userTestsGetClients
     */
    public function test_get_all_clients_marketing()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Marketing');
        Passport::actingAs($user);

        $response = $this-&gt;getJson('/api/v1/clients');

        $response-&gt;assertStatus(200);
    }

    /**
     * @group userTests
     * @group userTestsGetClients
     */
    public function test_get_client_not_logged_in()
    {
        $response = $this-&gt;getJson('/api/v1/clients/4');

        $response
            -&gt;assertStatus(401)
            -&gt;assertJsonFragment(['message' =&gt; 'Unauthenticated.']);
    }

    /**
     * @group userTests
     * @group userTestsGetClients
     */
    public function test_get_client_himself()
    {
        $user = User::factory()-&gt;create();
        $user-&gt;assignRole('Client');
        Passport::actingAs($user);

        $response = $this-&gt;getJson("/api/v1/clients/$user-&gt;id");

        $response-&gt;assertStatus(200);
    }

    /**
     * @group userTests
     * @group userTestsGetClients
     */
    public function test_get_client_other_than_himself()
    {
        $user = User::factory()-&gt;create();
        $user-&gt;assignRole('Client');
        Passport::actingAs($user);

        $client = User::factory()-&gt;create();

        $response = $this-&gt;getJson("/api/v1/clients/$client-&gt;id");

        $response-&gt;assertStatus(403);
    }

    /**
     * @group userTests
     * @group userTestsGetClients
     */
    public function test_get_client_administrator()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Administrator');
        Passport::actingAs($user);

        $response = $this-&gt;getJson('/api/v1/clients/4');

        $response-&gt;assertStatus(200);
    }

    /**
     * @group userTests
     * @group userTestsGetClients
     */
    public function test_get_client_account_manager()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Account Manager');
        Passport::actingAs($user);

        $response = $this-&gt;getJson('/api/v1/clients/4');

        $response-&gt;assertStatus(200);
    }

    /**
     * @group userTests
     * @group userTestsGetClients
     */
    public function test_get_client_marketing()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Marketing');
        Passport::actingAs($user);

        $response = $this-&gt;getJson('/api/v1/clients/4');

        $response-&gt;assertStatus(200);
    }

    // ==================================== UPDATE CLIENTS ====================================

    /**
     * @group userTests
     * @group userTestsUpdateClient
     */
    public function test_update_client()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Administrator');
        Passport::actingAs($user);

        $client = User::factory()-&gt;create();

        $response = $this-&gt;putJson("/api/v1/clients/$client-&gt;id", [
            'first_name' =&gt; 'GaGi',
            'last_name' =&gt; 'Fhnfh',
            'phone' =&gt; rand(1000000, 9999999) . "",
            'address' =&gt; 'Test Address',
            'company' =&gt; 'Test Company',
            'website' =&gt; 'https://google.com',
            'email' =&gt; 'milica.petrovic1@gmail.com',
            'vertical_id' =&gt; 1,
            'service_modal_id' =&gt; 1
        ]);

        $response
            -&gt;assertStatus(200)
            -&gt;assertJsonFragment(['message' =&gt; 'Client Updated.']);
    }

    /**
     * @group userTests
     * @group userTestsUpdateClient
     */
    public function test_update_client_updates_himself()
    {
        $user = User::factory()-&gt;create();
        $user-&gt;assignRole('Client');
        Passport::actingAs($user);

        $response = $this-&gt;putJson("/api/v1/clients/$user-&gt;id", [
            'first_name' =&gt; 'GaGi',
            'last_name' =&gt; 'Fhnfh',
            'phone' =&gt; rand(1000000, 9999999) . "",
            'address' =&gt; 'Test Address',
            'company' =&gt; 'Test Company',
            'website' =&gt; 'https://google.com',
            'email' =&gt; 'milica.petrovic1@gmail.com',
            'vertical_id' =&gt; 1,
            'service_modal_id' =&gt; 1
        ]);

        $response
            -&gt;assertStatus(200)
            -&gt;assertJsonFragment(['message' =&gt; 'Client Updated.']);
    }

    /**
     * @group userTests
     * @group userTestsUpdateClient
     */
    public function test_update_client_updates_other_clients()
    {
        $user = User::factory()-&gt;create();
        $user-&gt;assignRole('Client');
        Passport::actingAs($user);

        $client = User::factory()-&gt;create();

        $response = $this-&gt;putJson("/api/v1/clients/$client-&gt;id", [
            'first_name' =&gt; 'GaGi',
            'last_name' =&gt; 'Fhnfh',
            'phone' =&gt; rand(1000000, 9999999) . "",
            'address' =&gt; 'Test Address',
            'company' =&gt; 'Test Company',
            'website' =&gt; 'https://google.com',
            'email' =&gt; 'milica.petrovic1@gmail.com',
            'vertical_id' =&gt; 1,
            'service_modal_id' =&gt; 1
        ]);

        $response-&gt;assertStatus(403);
    }

    /**
     * @group userTests
     * @group userTestsUpdateClient
     */
    public function test_update_client_account_manager()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Account Manager');
        Passport::actingAs($user);

        $client = User::factory()-&gt;create();

        $response = $this-&gt;putJson("/api/v1/clients/$client-&gt;id", [
            'first_name' =&gt; 'GaGi',
            'last_name' =&gt; 'Fhnfh',
            'phone' =&gt; rand(1000000, 9999999) . "",
            'address' =&gt; 'Test Address',
            'company' =&gt; 'Test Company',
            'website' =&gt; 'https://google.com',
            'email' =&gt; 'milica.petrovic1@gmail.com',
            'vertical_id' =&gt; 1,
            'service_modal_id' =&gt; 1
        ]);

        $response
            -&gt;assertStatus(200)
            -&gt;assertJsonFragment(['message' =&gt; 'Client Updated.']);
    }

    /**
     * @group userTests
     * @group userTestsUpdateClient
     */
    public function test_update_client_marketing_administrator()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Marketing');
        Passport::actingAs($user);

        $client = User::factory()-&gt;create();

        $response = $this-&gt;putJson("/api/v1/clients/$client-&gt;id", [
            'first_name' =&gt; 'GaGi',
            'last_name' =&gt; 'Fhnfh',
            'phone' =&gt; rand(1000000, 9999999) . "",
            'address' =&gt; 'Test Address',
            'company' =&gt; 'Test Company',
            'website' =&gt; 'https://google.com',
            'email' =&gt; 'milica.petrovic1@gmail.com',
            'vertical_id' =&gt; 1,
            'service_modal_id' =&gt; 1
        ]);

        $response-&gt;assertStatus(403);
    }

    /**
     * @group userTests
     * @group userTestsUpdateClient
     */
    public function test_update_client_not_logged_in()
    {
        $client = User::factory()-&gt;create();

        $response = $this-&gt;putJson("/api/v1/clients/$client-&gt;id", [
            'first_name' =&gt; 'GaGi',
            'last_name' =&gt; 'Fhnfh',
            'phone' =&gt; rand(1000000, 9999999) . "",
            'address' =&gt; 'Test Address',
            'company' =&gt; 'Test Company',
            'website' =&gt; 'https://google.com',
            'email' =&gt; 'milica.petrovic1@gmail.com',
            'vertical_id' =&gt; 1,
            'service_modal_id' =&gt; 1
        ]);

        $response
            -&gt;assertStatus(401)
            -&gt;assertJsonFragment(['message' =&gt; 'Unauthenticated.']);
    }

    /**
     * @group userTests
     * @group userTestsUpdateClient
     */
    public function test_update_client_invalid_data()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Administrator');
        Passport::actingAs($user);

        $client = User::factory()-&gt;create();

        $response = $this-&gt;putJson("/api/v1/clients/$client-&gt;id", [
            'first_name' =&gt; 'GaGi',
            'last_name' =&gt; 'Fhnfh',
            'phone' =&gt; "123456",
            'address' =&gt; 'Test Address',
            'company' =&gt; 'Test Company',
            'website' =&gt; 'hsadps:/asgle.com',
            'email' =&gt; 'milica.peastrovic1@gmail.com',
            'vertical_id' =&gt; "dsa",
        ]);

        $response
            -&gt;assertStatus(422)
            -&gt;assertJsonFragment([
                'message' =&gt; 'The given data was invalid.',
                'errors' =&gt; [
                    'vertical_id' =&gt; ['The vertical id must be an integer.'],
                    'service_modal_id' =&gt; ['The service modal id field is required.'],
                ]
            ]);
    }

    // ==================================== DELETE CLIENTS ====================================

    /**
     * @group userTests
     * @group userTestsDeleteClient
     */
    public function test_delete_client()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Administrator');
        Passport::actingAs($user);

        $client = User::factory()-&gt;create();

        $response = $this-&gt;deleteJson("/api/v1/clients/$client-&gt;id");
        $client = $client-&gt;refresh();

        $response-&gt;assertStatus(204);
        $this-&gt;assertNotNull($client-&gt;deleted_at);
    }
    /**
     * @group userTests
     * @group userTestsDeleteClient
     */
    public function test_delete_client_account_manager()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Account Manager');
        Passport::actingAs($user);

        $client = User::factory()-&gt;create();

        $response = $this-&gt;deleteJson("/api/v1/clients/$client-&gt;id");
        $client = $client-&gt;refresh();

        $response-&gt;assertStatus(403);
        $this-&gt;assertNull($client-&gt;deleted_at);
    }

    /**
     * @group userTests
     * @group userTestsDeleteClient
     */
    public function test_delete_client_marketing()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Marketing');
        Passport::actingAs($user);

        $client = User::factory()-&gt;create();

        $response = $this-&gt;deleteJson("/api/v1/clients/$client-&gt;id");
        $client = $client-&gt;refresh();

        $response-&gt;assertStatus(403);
        $this-&gt;assertNull($client-&gt;deleted_at);
    }

    /**
     * @group userTests
     * @group userTestsDeleteClient
     */
    public function test_delete_client_doesnt_exist()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Administrator');
        Passport::actingAs($user);

        $client = User::factory()-&gt;create();

        $response = $this-&gt;deleteJson("/api/v1/clients/213123131");
        $client = $client-&gt;refresh();

        $response-&gt;assertStatus(404);
        $this-&gt;assertNull($client-&gt;deleted_at);
    }

    // ==================================== CREATE ADMINS ====================================

    /**
     * @group userTests
     * @group userTestsCreateAdmin
     */
    public function test_create_admin()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Administrator');
        Passport::actingAs($user);

        $response = $this-&gt;postJson('/api/v1/admins', [
            'first_name' =&gt; 'GaGi',
            'last_name' =&gt; 'Fhnfh',
            'email' =&gt; 'milica.petrovic.admin@gmail.com',
            'password' =&gt; 'bananastolicakupus123...',
            'password_confirmation' =&gt; 'bananastolicakupus123...',
            'permission_levels' =&gt; [2, 3],
        ]);

        $response
            -&gt;assertStatus(200)
            -&gt;assertJsonFragment(['message' =&gt; 'Admin Created.']);
    }

    /**
     * @group userTests
     * @group userTestsCreateAdmin
     */
    public function test_create_administrator()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Administrator');
        Passport::actingAs($user);

        $response = $this-&gt;postJson('/api/v1/admins', [
            'first_name' =&gt; 'GaGi',
            'last_name' =&gt; 'Fhnfh',
            'email' =&gt; 'milica.petrovic.admin@gmail.com',
            'password' =&gt; 'bananastolicakupus123...',
            'password_confirmation' =&gt; 'bananastolicakupus123...',
            'permission_levels' =&gt; [1],
        ]);

        $response
            -&gt;assertStatus(422)
            -&gt;assertJsonFragment([
                'message' =&gt; 'The given data was invalid.',
                'errors' =&gt; [
                    'permission_levels' =&gt; ['The selected permission levels is invalid.']
                ]
            ]);
    }

    /**
     * @group userTests
     * @group userTestsCreateAdmin
     */
    public function test_create_admin_account_manager()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Account Manager');
        Passport::actingAs($user);

        $response = $this-&gt;postJson('/api/v1/admins', [
            'first_name' =&gt; 'GaGi',
            'last_name' =&gt; 'Fhnfh',
            'email' =&gt; 'milica.petrovic.admin@gmail.com',
            'password' =&gt; 'bananastolicakupus123...',
            'password_confirmation' =&gt; 'bananastolicakupus123...',
            'permission_levels' =&gt; [2, 3],
        ]);

        $response-&gt;assertStatus(403);
    }

    /**
     * @group userTests
     * @group userTestsCreateAdmin
     */
    public function test_create_admin_marketing()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Marketing');
        Passport::actingAs($user);

        $response = $this-&gt;postJson('/api/v1/admins', [
            'first_name' =&gt; 'GaGi',
            'last_name' =&gt; 'Fhnfh',
            'email' =&gt; 'milica.petrovic.admin@gmail.com',
            'password' =&gt; 'bananastolicakupus123...',
            'password_confirmation' =&gt; 'bananastolicakupus123...',
            'permission_levels' =&gt; [2, 3],
        ]);

        $response-&gt;assertStatus(403);
    }

    /**
     * @group userTests
     * @group userTestsCreateAdmin
     */
    public function test_create_admin_not_logged_in()
    {
        $response = $this-&gt;postJson('/api/v1/admins', [
            'first_name' =&gt; 'GaGi',
            'last_name' =&gt; 'Fhnfh',
            'email' =&gt; 'milica.petrovic.admin@gmail.com',
            'password' =&gt; 'bananastolicakupus123...',
            'password_confirmation' =&gt; 'bananastolicakupus123...',
            'permission_levels' =&gt; [2, 3],
        ]);

        $response
            -&gt;assertStatus(401)
            -&gt;assertJsonFragment(['message' =&gt; 'Unauthenticated.']);
    }

    // ==================================== GET ADMINS ====================================

    /**
     * @group userTests
     * @group userTestsGetAdmins
     */
    public function test_get_all_admins_not_logged_in()
    {
        $response = $this-&gt;getJson('/api/v1/admins');

        $response
            -&gt;assertStatus(401)
            -&gt;assertJsonFragment(['message' =&gt; 'Unauthenticated.']);
    }

    /**
     * @group userTests
     * @group userTestsGetAdmins
     */
    public function test_get_all_admins_administrator()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Administrator');
        Passport::actingAs($user);

        $response = $this-&gt;getJson('/api/v1/admins');

        $response-&gt;assertStatus(200);
    }

    /**
     * @group userTests
     * @group userTestsGetAdmins
     */
    public function test_get_all_admins_account_manager()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Account Manager');
        Passport::actingAs($user);

        $response = $this-&gt;getJson('/api/v1/admins');

        $response-&gt;assertStatus(403);
    }

    /**
     * @group userTests
     * @group userTestsGetAdmins
     */
    public function test_get_all_admins_marketing()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Marketing');
        Passport::actingAs($user);

        $response = $this-&gt;getJson('/api/v1/admins');

        $response-&gt;assertStatus(403);
    }

    /**
     * @group userTests
     * @group userTestsGetAdmins
     */
    public function test_get_admin_not_logged_in()
    {
        $response = $this-&gt;getJson('/api/v1/admins/1');

        $response
            -&gt;assertStatus(401)
            -&gt;assertJsonFragment(['message' =&gt; 'Unauthenticated.']);
    }

    /**
     * @group userTests
     * @group userTestsGetAdmins
     */
    public function test_get_admin_administrator_requesting_himself()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Administrator');
        Passport::actingAs($user);

        $response = $this-&gt;getJson("/api/v1/admins/$user-&gt;id");

        $response-&gt;assertStatus(200);
    }

    /**
     * @group userTests
     * @group userTestsGetAdmins
     */
    public function test_get_admin_administrator_requesting_smaller_admins()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user2 = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Administrator');
        $user2-&gt;assignRole('Marketing');
        Passport::actingAs($user);

        $response = $this-&gt;getJson("/api/v1/admins/$user2-&gt;id");

        $response-&gt;assertStatus(200);
    }

    /**
     * @group userTests
     * @group userTestsGetAdmins
     */
    public function test_get_admin_administrator_requesting_other_administrator()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user2 = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Administrator');
        $user2-&gt;assignRole('Administrator');
        Passport::actingAs($user);

        $response = $this-&gt;getJson("/api/v1/admins/$user2-&gt;id");

        $response-&gt;assertStatus(403);
    }

    /**
     * @group userTests
     * @group userTestsGetAdmins
     */
    public function test_get_admin_account_manager_requesting_himself()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Account Manager');
        Passport::actingAs($user);

        $response = $this-&gt;getJson("/api/v1/admins/$user-&gt;id");

        $response-&gt;assertStatus(200);
    }

    /**
     * @group userTests
     * @group userTestsGetAdmins
     */
    public function test_get_admin_account_manager_requesting_other_admins()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user2 = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Account Manager');
        $user2-&gt;assignRole('Account Manager');
        Passport::actingAs($user);

        $response = $this-&gt;getJson("/api/v1/admins/$user2-&gt;id");

        $response-&gt;assertStatus(403);
    }

    /**
     * @group userTests
     * @group userTestsGetAdmins
     */
    public function test_get_admin_marketing_requesting_himself()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Marketing');
        Passport::actingAs($user);

        $response = $this-&gt;getJson("/api/v1/admins/$user-&gt;id");

        $response-&gt;assertStatus(200);
    }

    /**
     * @group userTests
     * @group userTestsGetAdmins
     */
    public function test_get_admin_marketing_requesting_other_admins()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user2 = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Marketing');
        $user2-&gt;assignRole('Marketing');
        Passport::actingAs($user);

        $response = $this-&gt;getJson("/api/v1/admins/$user2-&gt;id");

        $response-&gt;assertStatus(403);
    }

    // ==================================== UPDATE ADMINS ====================================

    /**
     * @group userTests
     * @group userTestsUpdateAdmin
     */
    public function test_update_admin_not_logged_in()
    {
        $response = $this-&gt;getJson('/api/v1/admins');

        $response
            -&gt;assertStatus(401)
            -&gt;assertJsonFragment(['message' =&gt; 'Unauthenticated.']);
    }

    /**
     * @group userTests
     * @group userTestsUpdateAdmin
     */
    public function test_update_admin_administrator_requesting_himself()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Administrator');
        Passport::actingAs($user);

        $response = $this-&gt;putJson("/api/v1/admins/$user-&gt;id", [
            'first_name' =&gt; 'GaGi',
            'last_name' =&gt; 'Fhnfh',
            'email' =&gt; 'milica.petrovic.admin@gmail.com',
        ]);

        $response
            -&gt;assertStatus(200)
            -&gt;assertJsonFragment(['message' =&gt; 'Admin Updated.']);
    }

    /**
     * @group userTests
     * @group userTestsUpdateAdmin
     */
    public function test_update_admin_administrator_requesting_am()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user2 = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Administrator');
        $user2-&gt;assignRole('Account Manager');
        Passport::actingAs($user);

        $response = $this-&gt;putJson("/api/v1/admins/$user2-&gt;id", [
            'first_name' =&gt; 'GaGi',
            'last_name' =&gt; 'Fhnfh',
            'email' =&gt; 'milica.petrovic.admin@gmail.com',
            'permission_levels' =&gt; [2]
        ]);

        $response
            -&gt;assertStatus(200)
            -&gt;assertJsonFragment(['message' =&gt; 'Admin Updated.']);
    }

    /**
     * @group userTests
     * @group userTestsUpdateAdmin
     */
    public function test_update_admin_administrator_requesting_marketing()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user2 = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Administrator');
        $user2-&gt;assignRole('Marketing');
        Passport::actingAs($user);

        $response = $this-&gt;putJson("/api/v1/admins/$user2-&gt;id", [
            'first_name' =&gt; 'GaGi',
            'last_name' =&gt; 'Fhnfh',
            'email' =&gt; 'milica.petrovic.admin@gmail.com',
            'permission_levels' =&gt; [2]
        ]);

        $response
            -&gt;assertStatus(200)
            -&gt;assertJsonFragment(['message' =&gt; 'Admin Updated.']);
    }

    /**
     * @group userTests
     * @group userTestsUpdateAdmin
     */
    public function test_update_admin_account_manager_requesting_others()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user2 = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Administrator');
        $user2-&gt;assignRole('Account Manager');
        Passport::actingAs($user2);

        $response = $this-&gt;putJson("/api/v1/admins/$user-&gt;id", [
            'first_name' =&gt; 'GaGi',
            'last_name' =&gt; 'Fhnfh',
            'email' =&gt; 'milica.petrovic.admin@gmail.com',
        ]);

        $response-&gt;assertStatus(403);
    }

    /**
     * @group userTests
     * @group userTestsUpdateAdmin
     */
    public function test_update_admin_marketing_requesting_others()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user2 = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Administrator');
        $user2-&gt;assignRole('Marketing');
        Passport::actingAs($user2);

        $response = $this-&gt;putJson("/api/v1/admins/$user-&gt;id", [
            'first_name' =&gt; 'GaGi',
            'last_name' =&gt; 'Fhnfh',
            'email' =&gt; 'milica.petrovic.admin@gmail.com',
        ]);

        $response-&gt;assertStatus(403);
    }

    /**
     * @group userTests
     * @group userTestsUpdateAdmin
     */
    public function test_update_admin_account_manager_requesting_himself()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Account Manager');
        Passport::actingAs($user);

        $response = $this-&gt;putJson("/api/v1/admins/$user-&gt;id", [
            'first_name' =&gt; 'GaGi',
            'last_name' =&gt; 'Fhnfh',
            'email' =&gt; 'milica.petrovic.admin@gmail.com',
        ]);

        $response
            -&gt;assertStatus(200)
            -&gt;assertJsonFragment(['message' =&gt; 'Admin Updated.']);
    }

    /**
     * @group userTests
     * @group userTestsUpdateAdmin
     */
    public function test_update_admin_account_manager_requesting_himself_changing_permissions()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Account Manager');
        Passport::actingAs($user);

        $response = $this-&gt;putJson("/api/v1/admins/$user-&gt;id", [
            'first_name' =&gt; 'GaGi',
            'last_name' =&gt; 'Fhnfh',
            'email' =&gt; 'milica.petrovic.admin@gmail.com',
            'permission_levels' =&gt; [2]
        ]);

        $response-&gt;assertStatus(403);
    }

    /**
     * @group userTests
     * @group userTestsUpdateAdmin
     */
    public function test_update_admin_marketing_requesting_himself()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Marketing');
        Passport::actingAs($user);

        $response = $this-&gt;putJson("/api/v1/admins/$user-&gt;id", [
            'first_name' =&gt; 'GaGi',
            'last_name' =&gt; 'Fhnfh',
            'email' =&gt; 'milica.petrovic.admin@gmail.com',
        ]);

        $response
            -&gt;assertStatus(200)
            -&gt;assertJsonFragment(['message' =&gt; 'Admin Updated.']);
    }

    /**
     * @group userTests
     * @group userTestsUpdateAdmin
     */
    public function test_update_admin_marketing_requesting_himself_changing_permissions()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Marketing');
        Passport::actingAs($user);

        $response = $this-&gt;putJson("/api/v1/admins/$user-&gt;id", [
            'first_name' =&gt; 'GaGi',
            'last_name' =&gt; 'Fhnfh',
            'email' =&gt; 'milica.petrovic.admin@gmail.com',
            'permission_levels' =&gt; [3]
        ]);

        $response-&gt;assertStatus(403);
    }

    // ==================================== DELETE ADMINS ====================================

    /**
     * @group userTests
     * @group userTestsDeleteAdmin
     */
    public function test_delete_admin_administrator_requesting_himself()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Administrator');
        Passport::actingAs($user);

        $response = $this-&gt;deleteJson("/api/v1/admins/$user-&gt;id");
        $user = $user-&gt;refresh();

        $response-&gt;assertStatus(204);
        $this-&gt;assertNotNull($user-&gt;deleted_at);
    }

    /**
     * @group userTests
     * @group userTestsDeleteAdmin
     */
    public function test_delete_admin_administrator_requesting_other_administrators()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user2 = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Administrator');
        $user2-&gt;assignRole('Administrator');
        Passport::actingAs($user);

        $response = $this-&gt;deleteJson("/api/v1/admins/$user2-&gt;id");

        $response-&gt;assertStatus(403);
    }

    /**
     * @group userTests
     * @group userTestsDeleteAdmin
     */
    public function test_delete_admin_administrator_requesting_am()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user2 = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user2-&gt;assignRole('Account Manager');
        $user-&gt;assignRole('Administrator');
        Passport::actingAs($user);

        $response = $this-&gt;deleteJson("/api/v1/admins/$user2-&gt;id");
        $user2 = $user2-&gt;refresh();

        $response-&gt;assertStatus(204);
        $this-&gt;assertNotNull($user2-&gt;deleted_at);
    }

    /**
     * @group userTests
     * @group userTestsDeleteAdmin
     */
    public function test_delete_admin_administrator_requesting_marketing()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user2 = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Administrator');
        $user2-&gt;assignRole('Marketing');
        Passport::actingAs($user);

        $response = $this-&gt;deleteJson("/api/v1/admins/$user2-&gt;id");
        $user2 = $user2-&gt;refresh();

        $response-&gt;assertStatus(204);
        $this-&gt;assertNotNull($user2-&gt;deleted_at);
    }

    /**
     * @group userTests
     * @group userTestsDeleteAdmin
     */
    public function test_delete_admin_am_requesting_marketing()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user2 = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Account Manager');
        $user2-&gt;assignRole('Marketing');
        Passport::actingAs($user);

        $response = $this-&gt;deleteJson("/api/v1/admins/$user2-&gt;id");
        $user2 = $user2-&gt;refresh();

        $response-&gt;assertStatus(403);
    }

    /**
     * @group userTests
     * @group userTestsDeleteAdmin
     */
    public function test_delete_admin_am_requesting_himself()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Account Manager');
        Passport::actingAs($user);

        $response = $this-&gt;deleteJson("/api/v1/admins/$user-&gt;id");

        $response-&gt;assertStatus(403);
    }

    /**
     * @group userTests
     * @group userTestsDeleteAdmin
     */
    public function test_delete_admin_am_requesting_administrator()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user2 = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Account Manager');
        $user2-&gt;assignRole('Administrator');
        Passport::actingAs($user);

        $response = $this-&gt;deleteJson("/api/v1/admins/$user2-&gt;id");

        $response-&gt;assertStatus(403);
    }

    /**
     * @group userTests
     * @group userTestsDeleteAdmin
     */
    public function test_delete_admin_marketing_requesting_himself()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Marketing');
        Passport::actingAs($user);

        $response = $this-&gt;deleteJson("/api/v1/admins/$user-&gt;id");

        $response-&gt;assertStatus(403);
    }

    /**
     * @group userTests
     * @group userTestsDeleteAdmin
     */
    public function test_delete_admin_marketing_requesting_am()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user2 = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Marketing');
        $user2-&gt;assignRole('Account Manager');
        Passport::actingAs($user);

        $response = $this-&gt;deleteJson("/api/v1/admins/$user2-&gt;id");

        $response-&gt;assertStatus(403);
    }

    /**
     * @group userTests
     * @group userTestsDeleteAdmin
     */
    public function test_delete_admin_marketing_requesting_administrator()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user2 = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Marketing');
        $user2-&gt;assignRole('Administrator');
        Passport::actingAs($user);

        $response = $this-&gt;deleteJson("/api/v1/admins/$user2-&gt;id");

        $response-&gt;assertStatus(403);
    }
}

</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->




                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Feature Test Class (WTemplate) - Thunder
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExample4" aria-expanded="false"
                                aria-controls="collapseExample4">+</button>
                            <button data-title="feature-wtemplate" class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
&lt;?php

namespace Tests\Feature\MarketingTemplate;

use App\Models\MarketingTemplate;
use App\Models\User;
use App\Models\MarketingTemplatesFormat;
use Illuminate\Foundation\Testing\RefreshDatabase;
use Illuminate\Foundation\Testing\WithFaker;
use Illuminate\Support\Facades\Log;
use Illuminate\Support\Str;
use Laravel\Passport\Passport;
use Spatie\Permission\Models\Role;
use Tests\TestCase;

class MarketingTemplateTest extends TestCase
{
    use RefreshDatabase;
    use WithFaker;

    /**
    * @group marketingTemplatesTests
    * @group marketingTemplatesTestsGetAll
    */
   public function test_get_all_marketing_templates_account_manager()
   {
       $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
       $user-&gt;assignRole('Account Manager');
       Passport::actingAs($user);
       $marketingTemplates = MarketingTemplate::factory()-&gt;count(20)-&gt;create();

       $response = $this-&gt;getJson('/api/v1/marketing-templates');

       $response-&gt;assertStatus(403);
   }

   /**
    * @group marketingTemplatesTests
    * @group marketingTemplatesTestsGetAll
    */
   public function test_get_all_marketing_templates_marketing()
   {
       $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
       $user-&gt;assignRole('Marketing');
       Passport::actingAs($user);
       $marketingTemplates = MarketingTemplate::factory()-&gt;count(20)-&gt;create();

       $response = $this-&gt;getJson('/api/v1/marketing-templates');

       $response-&gt;assertStatus(200)
           -&gt;assertJsonFragment([
               'message' =&gt; 'MarketingTemplates found.'
           ])-&gt;assertJsonCount(10, 'data');
       // 10 Because we have 10 paginated
   }

   /**
    * @group marketingTemplatesTests
    * @group marketingTemplatesTestsGetAll
    */
   public function test_get_all_marketing_templates()
   {
       $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
       $user-&gt;assignRole('Administrator');
       Passport::actingAs($user);
       $marketingTemplates = MarketingTemplate::factory()-&gt;count(20)-&gt;create();

       $response = $this-&gt;getJson('/api/v1/marketing-templates');

       $response-&gt;assertStatus(200)
           -&gt;assertJsonFragment([
               'message' =&gt; 'MarketingTemplates found.'
           ])-&gt;assertJsonCount(10, 'data');
       // 10 Because we have 10 paginated
   }

   /**
    * @group marketingTemplatesTests
    * @group marketingTemplatesTestsGetAll
    */
   public function test_get_all_marketing_templates_empty()
   {
       $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
       $user-&gt;assignRole('Marketing');
       Passport::actingAs($user);

       $response = $this-&gt;getJson('/api/v1/marketing-templates');

       $response-&gt;assertStatus(200)
           -&gt;assertJsonFragment([
               'message' =&gt; 'MarketingTemplates found.'
           ])-&gt;assertJsonCount(0, 'data');
   }

    /**
     * @group marketingTemplatesTests
     * @group marketingTemplatesTestsAdd
     */
    public function test_add_new_marketing_template_account_manager()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $format = MarketingTemplatesFormat::factory()-&gt;create();
        $user-&gt;assignRole('Account Manager');
        Passport::actingAs($user);

        $response = $this-&gt;postJson('/api/v1/marketing-templates', [
            'name' =&gt; $this-&gt;faker-&gt;name(),
            'format_id' =&gt; $format-&gt;id,
            'description' =&gt; $this-&gt;faker-&gt;text(),
            'html' =&gt; $this-&gt;faker-&gt;text(),
        ]);

        $response-&gt;assertStatus(403);
    }

    /**
     * @group marketingTemplatesTests
     * @group marketingTemplatesTestsAdd
     */
    public function test_add_new_marketing_template_marketing()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $format = MarketingTemplatesFormat::factory()-&gt;create();
        $user-&gt;assignRole('Marketing');
        Passport::actingAs($user);

        $response = $this-&gt;postJson('/api/v1/marketing-templates', [
            'name' =&gt; $this-&gt;faker-&gt;name(),
            'format_id' =&gt; $format-&gt;id,
            'description' =&gt; $this-&gt;faker-&gt;text(),
            'html' =&gt; $this-&gt;faker-&gt;text(),
        ]);

        $response-&gt;assertStatus(201)
            -&gt;assertJsonFragment([
                'message' =&gt; 'Template created.'
            ]);
    }

    /**
     * @group marketingTemplatesTests
     * @group marketingTemplatesTestsAdd
     */
    public function test_add_new_marketing_template()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $format = MarketingTemplatesFormat::factory()-&gt;create();
        $user-&gt;assignRole('Administrator');
        Passport::actingAs($user);

        $response = $this-&gt;postJson('/api/v1/marketing-templates', [
            'name' =&gt; $this-&gt;faker-&gt;name(),
            'format_id' =&gt; $format-&gt;id,
            'description' =&gt; $this-&gt;faker-&gt;text(),
            'html' =&gt; $this-&gt;faker-&gt;text(),
        ]);

        $response-&gt;assertStatus(201)-&gt;assertJsonFragment([
            'message' =&gt; 'Template created.'
        ]);
    }

    /**
     * @group marketingTemplatesTests
     * @group marketingTemplatesTestsAdd
     */
    public function test_add_new_marketing_template_format_does_not_exist()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Administrator');
        Passport::actingAs($user);

        $response = $this-&gt;postJson('/api/v1/marketing-templates', [
            'name' =&gt; $this-&gt;faker-&gt;name(),
            'format_id' =&gt; 1,
            'description' =&gt; $this-&gt;faker-&gt;text(),
            'html' =&gt; $this-&gt;faker-&gt;text(),
        ]);

        $response
            -&gt;assertStatus(422)
            -&gt;assertJsonFragment(['message' =&gt; 'The given data was invalid.']);
    }

    /**
     * @group marketingTemplatesTests
     * @group marketingTemplatesTestsAdd
     */
    public function test_add_new_marketing_template_wrong_data()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $format = MarketingTemplatesFormat::factory()-&gt;create();
        $user-&gt;assignRole('Administrator');
        Passport::actingAs($user);

        $response = $this-&gt;postJson('/api/v1/marketing-templates', [
            'name' =&gt; Str::random(1000),
            'format_id' =&gt; $format-&gt;id,
            'description' =&gt; Str::random(1000),
            'html' =&gt; $this-&gt;faker-&gt;text(),
        ]);

        $response
            -&gt;assertStatus(422)
            -&gt;assertJsonFragment(['message' =&gt; 'The given data was invalid.']);
    }

    /**
     * @group marketingTemplatesTests
     * @group marketingTemplatesTestsUpdate
     */
    public function test_update_marketing_template_account_manager()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Account Manager');
        Passport::actingAs($user);

        $marketingTemplate = MarketingTemplate::factory()-&gt;create();

        $response = $this-&gt;putJson("/api/v1/marketing-templates/$marketingTemplate-&gt;id", [
            'name' =&gt; $this-&gt;faker-&gt;name(),
            'format_id' =&gt; $marketingTemplate-&gt;format-&gt;id,
            'description' =&gt; $this-&gt;faker-&gt;text(),
            'html' =&gt; $this-&gt;faker-&gt;text(),
        ]);

        $response-&gt;assertStatus(403);
    }
    /**
     * @group marketingTemplatesTests
     * @group marketingTemplatesTestsUpdate
     */
    public function test_update_marketing_template_marketing()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Marketing');
        Passport::actingAs($user);

        $marketingTemplate = MarketingTemplate::factory()-&gt;create();

        $response = $this-&gt;putJson("/api/v1/marketing-templates/$marketingTemplate-&gt;id", [
            'name' =&gt; $this-&gt;faker-&gt;name(),
            'format_id' =&gt; $marketingTemplate-&gt;format-&gt;id,
            'description' =&gt; $this-&gt;faker-&gt;text(),
            'html' =&gt; $this-&gt;faker-&gt;text(),
        ]);

        $response
            -&gt;assertStatus(200)
            -&gt;assertJsonFragment(['message' =&gt; 'Template updated.']);
    }

    /**
     * @group marketingTemplatesTests
     * @group marketingTemplatesTestsUpdate
     */
    public function test_update_marketing_template()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Administrator');
        Passport::actingAs($user);

        $marketingTemplate = MarketingTemplate::factory()-&gt;create();

        $response = $this-&gt;putJson("/api/v1/marketing-templates/$marketingTemplate-&gt;id", [
            'name' =&gt; $this-&gt;faker-&gt;name(),
            'format_id' =&gt; $marketingTemplate-&gt;format-&gt;id,
            'description' =&gt; $this-&gt;faker-&gt;text(),
            'html' =&gt; $this-&gt;faker-&gt;text(),
        ]);

        $response
            -&gt;assertStatus(200)
            -&gt;assertJsonFragment(['message' =&gt; 'Template updated.']);
    }

    /**
     * @group marketingTemplatesTests
     * @group marketingTemplatesTestsUpdate
     */
    public function test_update_marketing_template_missing_data()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Administrator');
        Passport::actingAs($user);

        $marketingTemplate = MarketingTemplate::factory()-&gt;create();

        $response = $this-&gt;putJson("/api/v1/marketing-templates/$marketingTemplate-&gt;id", [
            'description' =&gt; $this-&gt;faker-&gt;text(),
            'html' =&gt; $this-&gt;faker-&gt;text(),
        ]);

        // Log::debug($response-&gt;dump());

        $response-&gt;assertStatus(422)
            -&gt;assertJsonFragment(['message' =&gt; 'The given data was invalid.'])
            -&gt;assertJsonFragment(['errors' =&gt; [
                'name' =&gt; ['The name field is required.'],
                'format_id' =&gt; ['The format id field is required.']
            ]]);
    }

    /**
     * @group marketingTemplatesTests
     * @group marketingTemplatesTestsDelete
     */
    public function test_delete_marketing_template_account_manager()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Account Manager');
        Passport::actingAs($user);

        $marketingTemplate = MarketingTemplate::factory()-&gt;create();
        $response = $this-&gt;deleteJson("/api/v1/marketing-templates/$marketingTemplate-&gt;id");

        $response-&gt;assertStatus(403);
    }

    /**
     * @group marketingTemplatesTests
     * @group marketingTemplatesTestsDelete
     */
    public function test_delete_marketing_template_marketing()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Marketing');
        Passport::actingAs($user);

        $marketingTemplate = MarketingTemplate::factory()-&gt;create();
        $response = $this-&gt;deleteJson("/api/v1/marketing-templates/$marketingTemplate-&gt;id");

        $response-&gt;assertStatus(200)
            -&gt;assertJsonFragment([
                'message' =&gt; 'Template deleted.'
            ]);
    }
    /**
     * @group marketingTemplatesTests
     * @group marketingTemplatesTestsDelete
     */
    public function test_delete_marketing_template()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Administrator');
        Passport::actingAs($user);

        $marketingTemplate = MarketingTemplate::factory()-&gt;create();
        $response = $this-&gt;deleteJson("/api/v1/marketing-templates/$marketingTemplate-&gt;id");

        $response-&gt;assertStatus(200)
            -&gt;assertJsonFragment([
                'message' =&gt; 'Template deleted.'
            ]);
    }

    /**
     * @group marketingTemplatesTests
     * @group marketingTemplatesTestsDelete
     */
    public function test_delete_marketing_template_that_does_not_exist()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Administrator');
        Passport::actingAs($user);

        $response = $this-&gt;deleteJson("/api/v1/marketing-templates/22");

        $response
            -&gt;assertStatus(404)
            -&gt;assertJsonFragment([
                'message' =&gt; 'Template not found.'
            ]);
    }
}

</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->




                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Feature Test Class (Campaign) - Thunder
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExample4" aria-expanded="false"
                                aria-controls="collapseExample4">+</button>
                            <button data-title="feature-campaign" class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
&lt;?php

namespace Tests\Feature\Campaign;

use App\Models\Campaign;
use App\Models\ClientCampaignNewsletter;
use App\Models\Error;
use App\Models\User;
use Illuminate\Foundation\Testing\RefreshDatabase;
use Illuminate\Foundation\Testing\WithFaker;
use Illuminate\Support\Facades\Log;
use Illuminate\Support\Str;
use Laravel\Passport\Passport;
use Spatie\Permission\Models\Role;
use Tests\TestCase;

class CampaignTest extends TestCase
{
    use RefreshDatabase;
    use WithFaker;

    /**
     * @group campaignTests
     * @group campaignTestsAdd
     */
    public function test_add_new_campaign_account_manager()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Account Manager');
        Passport::actingAs($user);

        $response = $this-&gt;postJson('/api/v1/campaigns', [
            'token' =&gt; Str::random(10),
            'name' =&gt; $this-&gt;faker-&gt;name(),
            'scheduled_on' =&gt; date("Y-m-d H:i:s", strtotime('+22 minutes', strtotime('now'))),
            'status' =&gt; 'scheduled',
            'subject' =&gt; $this-&gt;faker-&gt;text(15),
            'title' =&gt; $this-&gt;faker-&gt;text(20),
            'first_text' =&gt; '&lt;a href="https://google.com"&gt;google test&lt;/a&gt;',
            'mail_template_blade' =&gt; 'primary.blade.php',
            'target_audience_info' =&gt; [
                ["6" =&gt; ["countries" =&gt; [["2" =&gt; 1], ["201" =&gt; 1]], "mail_driver" =&gt; "2"]],
                ["7" =&gt; ["countries" =&gt; [["201" =&gt; 2]], "mail_driver" =&gt; "1"]]
            ],
            'mail_template_name' =&gt; 'Primary'
        ]);

        $response-&gt;assertStatus(403);
    }

    /**
     * @group campaignTests
     * @group campaignTestsAdd
     */
    public function test_add_new_campaign_marketing()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Marketing');
        Passport::actingAs($user);

        $response = $this-&gt;postJson('/api/v1/campaigns', [
            'token' =&gt; Str::random(10),
            'name' =&gt; $this-&gt;faker-&gt;name(),
            'scheduled_on' =&gt; date("Y-m-d H:i:s", strtotime('+22 minutes', strtotime('now'))),
            'status' =&gt; 'scheduled',
            'subject' =&gt; $this-&gt;faker-&gt;text(15),
            'title' =&gt; $this-&gt;faker-&gt;text(20),
            'first_text' =&gt; '&lt;a href="https://google.com"&gt;google test&lt;/a&gt;',
            'mail_template_blade' =&gt; 'primary.blade.php',
            'target_audience_info' =&gt; [
                ["6" =&gt; ["countries" =&gt; [["2" =&gt; 1], ["201" =&gt; 1]], "mail_driver" =&gt; "2"]],
                ["7" =&gt; ["countries" =&gt; [["201" =&gt; 2]], "mail_driver" =&gt; "1"]]
            ],
            'mail_template_name' =&gt; 'Primary'
        ]);

        $response-&gt;assertStatus(200)
            -&gt;assertJsonFragment([
                'message' =&gt; 'Campaign Created.'
            ]);
    }

    /**
     * @group campaignTests
     * @group campaignTestsAdd
     */
    public function test_add_new_campaign()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Administrator');
        Passport::actingAs($user);

        $response = $this-&gt;postJson('/api/v1/campaigns', [
            'token' =&gt; Str::random(10),
            'name' =&gt; $this-&gt;faker-&gt;name(),
            'scheduled_on' =&gt; date("Y-m-d H:i:s", strtotime('+22 minutes', strtotime('now'))),
            'status' =&gt; 'scheduled',
            'subject' =&gt; $this-&gt;faker-&gt;text(15),
            'title' =&gt; $this-&gt;faker-&gt;text(20),
            'first_text' =&gt; '&lt;a href="https://google.com"&gt;google test&lt;/a&gt;',
            'mail_template_blade' =&gt; 'primary.blade.php',
            'target_audience_info' =&gt; [
                ["6" =&gt; ["countries" =&gt; [["2" =&gt; 1], ["201" =&gt; 1]], "mail_driver" =&gt; "2"]],
                ["7" =&gt; ["countries" =&gt; [["201" =&gt; 2]], "mail_driver" =&gt; "1"]]
            ],
            'mail_template_name' =&gt; 'Primary'
        ]);

        $response-&gt;assertStatus(200)-&gt;assertJsonFragment([
            'message' =&gt; 'Campaign Created.'
        ]);
    }

    /**
     * @group campaignTests
     * @group campaignTestsAdd
     */
    public function test_add_new_campaign_status_not_scheduled()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Administrator');
        Passport::actingAs($user);

        $response = $this-&gt;postJson('/api/v1/campaigns', [
            'token' =&gt; Str::random(10),
            'name' =&gt; $this-&gt;faker-&gt;name(),
            'scheduled_on' =&gt; date("Y-m-d H:i:s", strtotime('+22 minutes', strtotime('now'))),
            'status' =&gt; 'schedulededede',
            'subject' =&gt; $this-&gt;faker-&gt;text(15),
            'title' =&gt; $this-&gt;faker-&gt;text(20),
            'first_text' =&gt; '&lt;a href="https://google.com"&gt;google test&lt;/a&gt;',
            'mail_template_blade' =&gt; 'primary.blade.php',
            'target_audience_info' =&gt; [
                ["6" =&gt; ["countries" =&gt; [["2" =&gt; 1], ["201" =&gt; 1]], "mail_driver" =&gt; "1"]],
                ["7" =&gt; ["countries" =&gt; [["201" =&gt; 2]], "mail_driver" =&gt; "1"]]
            ],
            'mail_template_name' =&gt; 'Primary'
        ]);

        $response
            -&gt;assertStatus(422)
            -&gt;assertJsonFragment(['message' =&gt; 'The given data was invalid.']);
    }

    /**
     * @group campaignTests
     * @group campaignTestsAdd
     */
    public function test_add_new_campaign_wrong_target_audience_info_format1()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Administrator');
        Passport::actingAs($user);

        $response = $this-&gt;postJson('/api/v1/campaigns', [
            'token' =&gt; Str::random(10),
            'name' =&gt; $this-&gt;faker-&gt;name(),
            'scheduled_on' =&gt; date("Y-m-d H:i:s", strtotime('+22 minutes', strtotime('now'))),
            'status' =&gt; 'scheduled',
            'subject' =&gt; $this-&gt;faker-&gt;text(15),
            'title' =&gt; $this-&gt;faker-&gt;text(20),
            'first_text' =&gt; '&lt;a href="https://google.com"&gt;google test&lt;/a&gt;',
            'mail_template_blade' =&gt; 'primary.blade.php',
            'target_audience_info' =&gt; [
                ["6" =&gt; [["201" =&gt; 1], "countries" =&gt; [["2" =&gt; 1], ["201" =&gt; 1]], "mail_driver" =&gt; "1"]],
                ["7" =&gt; ["countries" =&gt; [["201" =&gt; 2]], "mail_driver" =&gt; "1"]]
            ],
            'mail_template_name' =&gt; 'Primary'
        ]);

        $response
            -&gt;assertStatus(422)
            -&gt;assertJsonFragment(['message' =&gt; 'The given data was invalid.']);
    }

    /**
     * @group campaignTests
     * @group campaignTestsAdd
     */
    public function test_add_new_campaign_wrong_target_audience_info_format2()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Administrator');
        Passport::actingAs($user);

        $response = $this-&gt;postJson('/api/v1/campaigns', [
            'token' =&gt; Str::random(10),
            'name' =&gt; $this-&gt;faker-&gt;name(),
            'scheduled_on' =&gt; date("Y-m-d H:i:s", strtotime('+22 minutes', strtotime('now'))),
            'status' =&gt; 'scheduled',
            'subject' =&gt; $this-&gt;faker-&gt;text(15),
            'title' =&gt; $this-&gt;faker-&gt;text(20),
            'first_text' =&gt; '&lt;a href="https://google.com"&gt;google test&lt;/a&gt;',
            'mail_template_blade' =&gt; 'primary.blade.php',
            'target_audience_info' =&gt; [
                ["6" =&gt; ["countries" =&gt; [["2ds" =&gt; 1], ["201" =&gt; 1]], "mail_driver" =&gt; "1"]],
                ["7" =&gt; ["countries" =&gt; [["201" =&gt; 2]], "mail_driver" =&gt; "1"]]
            ],
            'mail_template_name' =&gt; 'Primary'
        ]);

        $response
            -&gt;assertStatus(422)
            -&gt;assertJsonFragment(['message' =&gt; 'The given data was invalid.']);
    }

    /**
     * @group campaignTests
     * @group campaignTestsAdd
     */
    public function test_add_new_campaign_wrong_target_audience_info_format3()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Administrator');
        Passport::actingAs($user);

        $response = $this-&gt;postJson('/api/v1/campaigns', [
            'token' =&gt; Str::random(10),
            'name' =&gt; $this-&gt;faker-&gt;name(),
            'scheduled_on' =&gt; date("Y-m-d H:i:s", strtotime('+22 minutes', strtotime('now'))),
            'status' =&gt; 'scheduled',
            'subject' =&gt; $this-&gt;faker-&gt;text(15),
            'title' =&gt; $this-&gt;faker-&gt;text(20),
            'first_text' =&gt; '&lt;a href="https://google.com"&gt;google test&lt;/a&gt;',
            'mail_template_blade' =&gt; 'primary.blade.php',
            'target_audience_info' =&gt; [
                ["6" =&gt; ["countries" =&gt; [["2" =&gt; 1], ["201" =&gt; 1]], "mail_driver" =&gt; "1asd"]],
                ["7" =&gt; ["countries" =&gt; [["201" =&gt; 2]], "mail_driver" =&gt; "1"]]
            ],
            'mail_template_name' =&gt; 'Primary'
        ]);

        $response
            -&gt;assertStatus(422)
            -&gt;assertJsonFragment(['message' =&gt; 'The given data was invalid.']);
    }

    /**
     * @group campaignTests
     * @group campaignTestsAdd
     */
    public function test_add_new_campaign_wrong_time()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Administrator');
        Passport::actingAs($user);

        $response = $this-&gt;postJson('/api/v1/campaigns', [
            'token' =&gt; Str::random(10),
            'name' =&gt; $this-&gt;faker-&gt;name(),
            'scheduled_on' =&gt; date("Y-m-d H:i:s", strtotime('+2 minutes', strtotime('now'))),
            'status' =&gt; 'scheduled',
            'subject' =&gt; $this-&gt;faker-&gt;text(15),
            'title' =&gt; $this-&gt;faker-&gt;text(20),
            'first_text' =&gt; '&lt;a href="https://google.com"&gt;google test&lt;/a&gt;',
            'mail_template_blade' =&gt; 'primary.blade.php',
            'target_audience_info' =&gt; [
                ["6" =&gt; ["countries" =&gt; [["2" =&gt; 1], ["201" =&gt; 1]], "mail_driver" =&gt; "1"]],
                ["7" =&gt; ["countries" =&gt; [["201" =&gt; 2]], "mail_driver" =&gt; "1"]]
            ],
            'mail_template_name' =&gt; 'Primary'
        ]);

        $response
            -&gt;assertStatus(422)
            -&gt;assertJsonFragment(['message' =&gt; 'The given data was invalid.']);
    }

    /**
     * @group campaignTests
     * @group campaignTestsAdd
     */
    public function test_add_new_campaign_no_name()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Administrator');
        Passport::actingAs($user);

        $response = $this-&gt;postJson('/api/v1/campaigns', [
            'token' =&gt; Str::random(10),
            'scheduled_on' =&gt; date("Y-m-d H:i:s", strtotime('+20 minutes', strtotime('now'))),
            'status' =&gt; 'scheduled',
            'subject' =&gt; $this-&gt;faker-&gt;text(15),
            'title' =&gt; $this-&gt;faker-&gt;text(20),
            'first_text' =&gt; '&lt;a href="https://google.com"&gt;google test&lt;/a&gt;',
            'mail_template_blade' =&gt; 'primary.blade.php',
            'target_audience_info' =&gt; [
                ["6" =&gt; ["countries" =&gt; [["2" =&gt; 1], ["201" =&gt; 1]], "mail_driver" =&gt; "1"]],
                ["7" =&gt; ["countries" =&gt; [["201" =&gt; 2]], "mail_driver" =&gt; "1"]]
            ],
            'mail_template_name' =&gt; 'Primary'
        ]);

        $response
            -&gt;assertStatus(422)
            -&gt;assertJsonFragment(['message' =&gt; 'The given data was invalid.']);
    }

    /**
     * @group campaignTests
     * @group campaignTestsUpdate
     */
    public function test_update_campaign_account_manager()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user2 = User::find(6);
        $user3 = User::find(7);
        $user-&gt;assignRole('Account Manager');
        Passport::actingAs($user);

        $campaign = Campaign::factory()-&gt;create();
        $ccn = ClientCampaignNewsletter::factory()-&gt;create([
            'campaign_id' =&gt; $campaign-&gt;id,
            'client_id' =&gt; $user2-&gt;id,
        ]);
        $ccn2 = ClientCampaignNewsletter::factory()-&gt;create([
            'campaign_id' =&gt; $campaign-&gt;id,
            'client_id' =&gt; $user3-&gt;id
        ]);

        $response = $this-&gt;putJson("/api/v1/campaigns/$campaign-&gt;id", [
            'token' =&gt; Str::random(10),
            'name' =&gt; "Djadji Campaign",
            'scheduled_on' =&gt; date("Y-m-d H:i:s", strtotime('+10 minutes', strtotime('now'))),
            'status' =&gt; 'scheduled',
            'subject' =&gt; $this-&gt;faker-&gt;text(15),
            'title' =&gt; $this-&gt;faker-&gt;text(20),
            'first_text' =&gt; '&lt;a href="https://google.com"&gt;google test&lt;/a&gt;',
            'mail_template_blade' =&gt; 'primary.blade.php',
            'target_audience_info' =&gt; [
                ["$user2-&gt;id" =&gt; ["countries" =&gt; [["2" =&gt; 1], ["201" =&gt; 1]], "mail_driver" =&gt; "1"]],
                ["$user3-&gt;id" =&gt; ["countries" =&gt; [["201" =&gt; 2]], "mail_driver" =&gt; "1"]]
            ],
            'mail_template_name' =&gt; 'Primary'
        ]);

        $response-&gt;assertStatus(403);
    }
    /**
     * @group campaignTests
     * @group campaignTestsUpdate
     */
    public function test_update_campaign_marketing()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user2 = User::find(6);
        $user3 = User::find(7);
        $user-&gt;assignRole('Marketing');
        Passport::actingAs($user);

        $campaign = Campaign::factory()-&gt;create();
        $ccn = ClientCampaignNewsletter::factory()-&gt;create([
            'campaign_id' =&gt; $campaign-&gt;id,
            'client_id' =&gt; $user2-&gt;id,
        ]);
        $ccn2 = ClientCampaignNewsletter::factory()-&gt;create([
            'campaign_id' =&gt; $campaign-&gt;id,
            'client_id' =&gt; $user3-&gt;id
        ]);

        $response = $this-&gt;putJson("/api/v1/campaigns/$campaign-&gt;id", [
            'token' =&gt; Str::random(10),
            'name' =&gt; "Djadji Campaign",
            'scheduled_on' =&gt; date("Y-m-d H:i:s", strtotime('+10 minutes', strtotime('now'))),
            'status' =&gt; 'scheduled',
            'subject' =&gt; $this-&gt;faker-&gt;text(15),
            'title' =&gt; $this-&gt;faker-&gt;text(20),
            'first_text' =&gt; '&lt;a href="https://google.com"&gt;google test&lt;/a&gt;',
            'mail_template_blade' =&gt; 'primary.blade.php',
            'target_audience_info' =&gt; [
                ["$user2-&gt;id" =&gt; ["countries" =&gt; [["2" =&gt; 1], ["201" =&gt; 1]], "mail_driver" =&gt; "1"]],
                ["$user3-&gt;id" =&gt; ["countries" =&gt; [["201" =&gt; 2]], "mail_driver" =&gt; "1"]]
            ],
            'mail_template_name' =&gt; 'Primary'
        ]);

        $response
            -&gt;assertStatus(200)
            -&gt;assertJsonFragment(['message' =&gt; 'Campaign Updated']);
    }

    /**
     * @group campaignTests
     * @group campaignTestsUpdate
     */
    public function test_update_campaign()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user2 = User::find(6);
        $user3 = User::find(7);
        $user-&gt;assignRole('Administrator');
        Passport::actingAs($user);

        $campaign = Campaign::factory()-&gt;create();
        $ccn = ClientCampaignNewsletter::factory()-&gt;create([
            'campaign_id' =&gt; $campaign-&gt;id,
            'client_id' =&gt; $user2-&gt;id,
        ]);
        $ccn2 = ClientCampaignNewsletter::factory()-&gt;create([
            'campaign_id' =&gt; $campaign-&gt;id,
            'client_id' =&gt; $user3-&gt;id
        ]);

        $response = $this-&gt;putJson("/api/v1/campaigns/$campaign-&gt;id", [
            'token' =&gt; Str::random(10),
            'name' =&gt; "Djadji Campaign",
            'scheduled_on' =&gt; date("Y-m-d H:i:s", strtotime('+10 minutes', strtotime('now'))),
            'status' =&gt; 'scheduled',
            'subject' =&gt; $this-&gt;faker-&gt;text(15),
            'title' =&gt; $this-&gt;faker-&gt;text(20),
            'first_text' =&gt; '&lt;a href="https://google.com"&gt;google test&lt;/a&gt;',
            'mail_template_blade' =&gt; 'primary.blade.php',
            'target_audience_info' =&gt; [
                ["$user2-&gt;id" =&gt; ["countries" =&gt; [["2" =&gt; 1], ["201" =&gt; 1]], "mail_driver" =&gt; "1"]],
                ["$user3-&gt;id" =&gt; ["countries" =&gt; [["201" =&gt; 2]], "mail_driver" =&gt; "1"]]
            ],
            'mail_template_name' =&gt; 'Primary'
        ]);

        $response
            -&gt;assertStatus(200)
            -&gt;assertJsonFragment(['message' =&gt; 'Campaign Updated']);
    }

    /**
     * @group campaignTests
     * @group campaignTestsUpdate
     */
    public function test_update_campaign_missing_data()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user2 = User::find(6);
        $user3 = User::find(7);
        $user-&gt;assignRole('Administrator');
        Passport::actingAs($user);

        $campaign = Campaign::factory()-&gt;create();
        $ccn = ClientCampaignNewsletter::factory()-&gt;create([
            'campaign_id' =&gt; $campaign-&gt;id,
            'client_id' =&gt; $user2-&gt;id
        ]);
        $ccn2 = ClientCampaignNewsletter::factory()-&gt;create([
            'campaign_id' =&gt; $campaign-&gt;id,
            'client_id' =&gt; $user3-&gt;id
        ]);

        $response = $this-&gt;putJson("/api/v1/campaigns/$campaign-&gt;id", [
            'token' =&gt; Str::random(10),
            'name' =&gt; "Djadji Campaign",
            'mail_template_blade' =&gt; 'primary.blade.php',
            'target_audience_info' =&gt; [
                ["$user2-&gt;id" =&gt; ["countries" =&gt; [["2" =&gt; 1], ["201" =&gt; 1]], "mail_driver" =&gt; "1"]],
                ["$user3-&gt;id" =&gt; ["countries" =&gt; [["201" =&gt; 2]], "mail_driver" =&gt; "1"]]
            ],
            'mail_template_name' =&gt; 'Primary'
        ]);

        $response-&gt;assertStatus(500);
    }

    /**
     * @group campaignTests
     * @group campaignTestsUpdate
     */
    public function test_update_campaign_already_sent()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user2 = User::find(6);
        $user3 = User::find(7);
        $user-&gt;assignRole('Administrator');
        Passport::actingAs($user);

        $campaign = Campaign::factory()-&gt;create(['status' =&gt; 'sent']);
        $ccn = ClientCampaignNewsletter::factory()-&gt;create([
            'campaign_id' =&gt; $campaign-&gt;id,
            'client_id' =&gt; $user2-&gt;id
        ]);
        $ccn2 = ClientCampaignNewsletter::factory()-&gt;create([
            'campaign_id' =&gt; $campaign-&gt;id,
            'client_id' =&gt; $user3-&gt;id
        ]);

        $response = $this-&gt;putJson("/api/v1/campaigns/$campaign-&gt;id", [
            'token' =&gt; Str::random(10),
            'name' =&gt; "Djadji Campaign",
            'scheduled_on' =&gt; date("Y-m-d H:i:s", strtotime('+10 minutes', strtotime('now'))),
            'status' =&gt; 'scheduled',
            'subject' =&gt; $this-&gt;faker-&gt;text(15),
            'title' =&gt; $this-&gt;faker-&gt;text(20),
            'first_text' =&gt; '&lt;a href="https://google.com"&gt;google test&lt;/a&gt;',
            'mail_template_blade' =&gt; 'primary.blade.php',
            'target_audience_info' =&gt; [
                ["$user2-&gt;id" =&gt; ["countries" =&gt; [["2" =&gt; 1], ["201" =&gt; 1]], "mail_driver" =&gt; "1"]],
                ["$user3-&gt;id" =&gt; ["countries" =&gt; [["201" =&gt; 2]], "mail_driver" =&gt; "1"]]
            ],
            'mail_template_name' =&gt; 'Primary'
        ]);

        $response
            -&gt;assertStatus(400)
            -&gt;assertJsonFragment(['message' =&gt; 'Campaign already sent.']);
    }

    /**
     * @group campaignTests
     * @group campaignTestsUpdate
     */
    public function test_update_campaign_pause_campaign()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user2 = User::find(6);
        $user3 = User::find(7);
        $user-&gt;assignRole('Administrator');
        Passport::actingAs($user);

        $campaign = Campaign::factory()-&gt;create();
        $ccn = ClientCampaignNewsletter::factory()-&gt;create([
            'campaign_id' =&gt; $campaign-&gt;id,
            'client_id' =&gt; $user2-&gt;id
        ]);
        $ccn2 = ClientCampaignNewsletter::factory()-&gt;create([
            'campaign_id' =&gt; $campaign-&gt;id,
            'client_id' =&gt; $user3-&gt;id
        ]);

        $response = $this-&gt;putJson("/api/v1/campaigns/$campaign-&gt;id", [
            'token' =&gt; Str::random(10),
            'name' =&gt; "Djadji Campaign",
            'scheduled_on' =&gt; date("Y-m-d H:i:s", strtotime('+10 minutes', strtotime('now'))),
            'status' =&gt; 'paused',
            'subject' =&gt; $this-&gt;faker-&gt;text(15),
            'title' =&gt; $this-&gt;faker-&gt;text(20),
            'first_text' =&gt; '&lt;a href="https://google.com"&gt;google test&lt;/a&gt;',
            'mail_template_blade' =&gt; 'primary.blade.php',
            'target_audience_info' =&gt; [
                ["$user2-&gt;id" =&gt; ["countries" =&gt; [["2" =&gt; 1], ["201" =&gt; 1]], "mail_driver" =&gt; "1"]],
                ["$user3-&gt;id" =&gt; ["countries" =&gt; [["201" =&gt; 2]], "mail_driver" =&gt; "1"]]
            ],
            'mail_template_name' =&gt; 'Primary'
        ]);

        $response
            -&gt;assertStatus(200)
            -&gt;assertJsonFragment(['message' =&gt; 'Campaign Updated']);
    }

    /**
     * @group campaignTests
     * @group campaignTestsUpdate
     */
    public function test_update_campaign_change_from_paused_to_active()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user2 = User::find(6);
        $user3 = User::find(7);
        $user-&gt;assignRole('Administrator');
        Passport::actingAs($user);

        $campaign = Campaign::factory()-&gt;create(['status' =&gt; 'paused']);
        $ccn = ClientCampaignNewsletter::factory()-&gt;create([
            'campaign_id' =&gt; $campaign-&gt;id,
            'client_id' =&gt; $user2-&gt;id
        ]);
        $ccn2 = ClientCampaignNewsletter::factory()-&gt;create([
            'campaign_id' =&gt; $campaign-&gt;id,
            'client_id' =&gt; $user3-&gt;id
        ]);

        $response = $this-&gt;putJson("/api/v1/campaigns/$campaign-&gt;id", [
            'token' =&gt; Str::random(10),
            'name' =&gt; "Djadji Campaign",
            'scheduled_on' =&gt; date("Y-m-d H:i:s", strtotime('+10 minutes', strtotime('now'))),
            'status' =&gt; 'active',
            'subject' =&gt; $this-&gt;faker-&gt;text(15),
            'title' =&gt; $this-&gt;faker-&gt;text(20),
            'first_text' =&gt; '&lt;a href="https://google.com"&gt;google test&lt;/a&gt;',
            'mail_template_blade' =&gt; 'primary.blade.php',
            'target_audience_info' =&gt; [
                ["$user2-&gt;id" =&gt; ["countries" =&gt; [["2" =&gt; 1], ["201" =&gt; 1]], "mail_driver" =&gt; "1"]],
                ["$user3-&gt;id" =&gt; ["countries" =&gt; [["201" =&gt; 2]], "mail_driver" =&gt; "1"]]
            ],
            'mail_template_name' =&gt; 'Primary'
        ]);

        $response
            -&gt;assertStatus(200)
            -&gt;assertJsonFragment(['message' =&gt; 'Campaign Updated']);
    }

    /**
     * @group campaignTests
     * @group campaignTestsDelete
     */
    public function test_delete_campaign_account_manager()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Account Manager');
        Passport::actingAs($user);

        $campaign = Campaign::factory()-&gt;create();
        $campaign-&gt;status = 'paused';
        $campaign-&gt;save();
        $response = $this-&gt;deleteJson("/api/v1/campaigns/$campaign-&gt;id");

        $response-&gt;assertStatus(403);
    }

    /**
     * @group campaignTests
     * @group campaignTestsDelete
     */
    public function test_delete_campaign_marketing()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Marketing');
        Passport::actingAs($user);

        $campaign = Campaign::factory()-&gt;create();
        $campaign-&gt;status = 'paused';
        $campaign-&gt;save();
        $response = $this-&gt;deleteJson("/api/v1/campaigns/$campaign-&gt;id");
        $campaign = $campaign-&gt;refresh();

        $response-&gt;assertStatus(204);
        $this-&gt;assertNotNull($campaign-&gt;deleted_at);
    }
    /**
     * @group campaignTests
     * @group campaignTestsDelete
     */
    public function test_delete_campaign()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Administrator');
        Passport::actingAs($user);

        $campaign = Campaign::factory()-&gt;create();
        $campaign-&gt;status = 'paused';
        $campaign-&gt;save();
        $response = $this-&gt;deleteJson("/api/v1/campaigns/$campaign-&gt;id");
        $campaign = $campaign-&gt;refresh();

        $response-&gt;assertStatus(204);
        $this-&gt;assertNotNull($campaign-&gt;deleted_at);
    }

    /**
     * @group campaignTests
     * @group campaignTestsDelete
     */
    public function test_delete_campaign_that_doesnt_exist()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Administrator');
        Passport::actingAs($user);

        $response = $this-&gt;deleteJson("/api/v1/campaigns/22");

        $response
            -&gt;assertStatus(422)
            -&gt;assertJsonFragment([
                'message' =&gt; 'Campaign Not Found'
            ]);
    }

    /**
     * @group campaignTests
     * @group campaignTestsDelete
     */
    public function test_delete_campaign_that_isnt_paused_with_no_errors()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Administrator');
        Passport::actingAs($user);

        $campaign = Campaign::factory()-&gt;create();
        $response = $this-&gt;deleteJson("/api/v1/campaigns/$campaign-&gt;id");

        $response
            -&gt;assertStatus(400)
            -&gt;assertJsonFragment([
                'message' =&gt; 'Please pause the campaign before deleting.'
            ]);
    }

    /**
     * @group campaignTests
     * @group campaignTestsDelete
     */
    public function test_delete_campaign_that_isnt_paused_with_errors()
    {
        $user = User::factory()-&gt;create(['is_client' =&gt; 0]);
        $user-&gt;assignRole('Administrator');
        Passport::actingAs($user);

        $campaign = Campaign::factory()-&gt;create();

        foreach ($campaign-&gt;target_audience_info as $clientKEY =&gt; $clientValue) {
            ClientCampaignNewsletter::factory()-&gt;create([
                'client_id' =&gt; key($clientValue),
                'campaign_id' =&gt; $campaign-&gt;id,
                'marketing_platform_id' =&gt; $clientValue[key($clientValue)]['mail_driver'] // Which mail Driver
            ]);
        }

        foreach ($campaign-&gt;clientCampaignNewsletters as $ccn) {
            $error = Error::factory()-&gt;create([
                'ccc_id' =&gt; $ccn-&gt;id,
            ]);
            $ccn-&gt;error_id = $error-&gt;id;
            $ccn-&gt;save();
        }

        $response = $this-&gt;deleteJson("/api/v1/campaigns/$campaign-&gt;id");

        $response-&gt;assertStatus(204);
    }
}

</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->






                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Unit Test Class - Thunder
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExample4" aria-expanded="false"
                                aria-controls="collapseExample4">+</button>
                            <button data-title="unit" class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
&lt;?php

namespace Tests\Unit;

use App\Models\Lead;
use App\Models\Newsletter;
use App\Models\NewsletterClientPlatform;
use App\Models\NewsletterClientPlatformError;
use App\Models\LeadMetadata;
use App\Models\NewsletterClient;
use App\Models\NewsletterClientPlatformLeadMetadata;
use App\Models\NewsletterCountry;
use App\Models\Setting;
use App\Models\Task;
use App\Repository\Newsletter\NewsletterRepository;
use App\Repository\NewsletterClientPlatform\NewsletterClientPlatformRepository;
use App\Repository\NewsletterClientPlatformError\NewsletterClientPlatformErrorRepository;
use App\Repository\Lead\LeadMetadataRepository;
use App\Repository\Setting\SettingRepository;
use App\Repository\Task\TaskRepository;
use App\Services\Newsletter\NewsletterService;
use App\Services\NewsletterClientPlatform\NewsletterClientPlatformService;
use App\Services\NewsletterClientPlatformError\NewsletterClientPlatformErrorService;
use App\Services\Lead\LeadMetadataService;
use App\Services\MailDriver\Drivers\GetResponseMailDriver;
use App\Services\MailDriver\MailDriverService;
use App\Services\Task\TaskService;
use Illuminate\Foundation\Testing\RefreshDatabase;
use Illuminate\Foundation\Testing\WithFaker;
use Illuminate\Support\Facades\Log;
// use PHPUnit\Framework\TestCase;
use Tests\TestCase;

class GetReponseTest extends TestCase
{
    use RefreshDatabase;
    use WithFaker;

    private MailDriverService $mailDriverService;
    private NewsletterClientPlatformService $newsletterClientPlatformService;
    private TaskService $taskService;
    private NewsletterService $newsletterService;
    private NewsletterClientPlatformErrorService $newsletterErrorService;
    private LeadMetadataService $leadMetadataService;

    public function setUp(): void
    {
        parent::setUp();
        $this-&gt;mailDriverService = new MailDriverService(new SettingRepository(new Setting()));
        $this-&gt;newsletterClientPlatformService = new NewsletterClientPlatformService(
            new NewsletterClientPlatformRepository(new NewsletterClientPlatform())
        );
        $this-&gt;taskService = new TaskService(new TaskRepository(new Task()));
        $this-&gt;newsletterService = new NewsletterService(
            new NewsletterRepository(new Newsletter()),
            $this-&gt;taskService
        );
        $this-&gt;newsletterErrorService = new NewsletterClientPlatformErrorService(
            new NewsletterClientPlatformErrorRepository(new NewsletterClientPlatformError())
        );
        $this-&gt;leadMetadataService = new LeadMetadataService(new LeadMetadataRepository(new LeadMetadata()));
    }

    /**
     * @group getResponse
     * @group getResponseAddNL
     */
    public function test_add_newsletter_gr()
    {
        $newsletter = Newsletter::factory()-&gt;create();
        $countries = [155, 201];
        $marketingPlatform = 1;
        $clients = [6, 7];

        $this-&gt;createLeadsAndTheirMetadatas($countries);
        $this-&gt;createNewsletterCountries($newsletter, $countries);
        $this-&gt;createNewsletterClientPlatformLeads($newsletter, $clients, $countries);

        foreach ($clients as $client) {
            $newsletterClient =
                NewsletterClient::where(&apos;newsletter_id&apos;, $newsletter-&gt;id)-&gt;where(&apos;client_id&apos;, $client)-&gt;first();
            $newsletterClientPlatform =
                NewsletterClientPlatform::where(&apos;newsletter_client_id&apos;, $newsletterClient-&gt;id)
                -&gt;where(&apos;marketing_platform_id&apos;, 1)-&gt;first();

            $getResponse = new GetResponseMailDriver($client, $marketingPlatform);
            $result = $getResponse-&gt;addNewsletter(
                $newsletter,
                $this-&gt;newsletterClientPlatformService,
                $newsletterClientPlatform,
                $this-&gt;taskService,
                $this-&gt;newsletterService,
                $this-&gt;newsletterErrorService,
                $this-&gt;leadMetadataService,
                $countries
            );

            $newsletterClientPlatform-&gt;refresh();
            $task = $this-&gt;taskService-&gt;findWhere([&apos;task_scope_id&apos; =&gt; $newsletterClientPlatform-&gt;id]);
            $errors = NewsletterClientPlatformError::where(
                &apos;newsletter_client_platform_id&apos;,
                $newsletterClientPlatform-&gt;id
            )-&gt;first();

            $this-&gt;assertTrue($result);
            $this-&gt;assertNotNull($newsletterClientPlatform-&gt;newsletter_id_on_platform);
            $this-&gt;assertNotNull($task);
            $this-&gt;assertNull($errors);
        }
    }

    /**
     * @group getResponse
     * @group getResponseAddNL
     */
    public function test_add_newsletter_gr_with_errors()
    {
        $newsletter = Newsletter::factory()-&gt;create([
            &apos;scheduled_on&apos; =&gt; date(&quot;Y-m-d H:i:s&quot;, strtotime(&apos;-22 minutes&apos;, strtotime(&apos;now&apos;))),
        ]);
        $countries = [155, 201];
        $clients = [6, 7];

        $this-&gt;createLeadsAndTheirMetadatas($countries);
        $this-&gt;createNewsletterCountries($newsletter, $countries);
        $this-&gt;createNewsletterClientPlatformLeads($newsletter, $clients, $countries);

        foreach ($clients as $client) {
            $newsletterClient =
                NewsletterClient::where(&apos;newsletter_id&apos;, $newsletter-&gt;id)-&gt;where(&apos;client_id&apos;, $client)-&gt;first();
            $newsletterClientPlatform =
                NewsletterClientPlatform::where(&apos;newsletter_client_id&apos;, $newsletterClient-&gt;id)
                -&gt;where(&apos;marketing_platform_id&apos;, 1)-&gt;first();

            $getResponse = new GetResponseMailDriver($client, 1);
            $result = $getResponse-&gt;addNewsletter(
                $newsletter,
                $this-&gt;newsletterClientPlatformService,
                $newsletterClientPlatform,
                $this-&gt;taskService,
                $this-&gt;newsletterService,
                $this-&gt;newsletterErrorService,
                $this-&gt;leadMetadataService,
                $countries
            );

            $task = $this-&gt;taskService-&gt;findWhere([&apos;task_scope_id&apos; =&gt; $newsletterClientPlatform-&gt;id]);
            $errors = NewsletterClientPlatformError::where(
                &apos;newsletter_client_platform_id&apos;,
                $newsletterClientPlatform-&gt;id
            )-&gt;first();

            $this-&gt;assertFalse($result);
            $this-&gt;assertNull($newsletterClientPlatform-&gt;newsletter_id_on_platform);
            $this-&gt;assertEmpty($task);
            $this-&gt;assertNotNull($errors);
        }
    }

    /**
     * @group getResponse
     * @group getResponseUpdateNL
     */
    public function test_update_newsletter_gr()
    {
        $newsletter = Newsletter::factory()-&gt;create();
        $countries = [155, 201];
        $clients = [6, 7];

        $this-&gt;createLeadsAndTheirMetadatas($countries);
        $this-&gt;createNewsletterCountries($newsletter, $countries);
        $this-&gt;createNewsletterClientPlatformLeads($newsletter, $clients, $countries);

        foreach ($clients as $client) {
            $newsletterClient =
                NewsletterClient::where(&apos;newsletter_id&apos;, $newsletter-&gt;id)-&gt;where(&apos;client_id&apos;, $client)-&gt;first();
            $newsletterClientPlatform =
                NewsletterClientPlatform::where(&apos;newsletter_client_id&apos;, $newsletterClient-&gt;id)
                -&gt;where(&apos;marketing_platform_id&apos;, 1)-&gt;first();

            $getResponse = new GetResponseMailDriver($client, 1);
            $result = $getResponse-&gt;addNewsletter(
                $newsletter,
                $this-&gt;newsletterClientPlatformService,
                $newsletterClientPlatform,
                $this-&gt;taskService,
                $this-&gt;newsletterService,
                $this-&gt;newsletterErrorService,
                $this-&gt;leadMetadataService,
                $countries
            );

            $newsletterClientPlatform-&gt;refresh();
            $newsletterClientPlatformBefore = $newsletterClientPlatform-&gt;newsletter_id_on_platform;
            $nameCopy = $newsletter-&gt;name;
            $newsletter-&gt;name = &quot;Novi Djadji TEST&quot;;

            $result2 = $getResponse-&gt;updateNewsletter(
                $newsletter,
                1,
                $this-&gt;newsletterClientPlatformService,
                $this-&gt;taskService,
                $this-&gt;newsletterService,
                $this-&gt;newsletterErrorService,
                $this-&gt;leadMetadataService,
                $countries,
                &apos;scheduled&apos;
            );

            $newsletterClientPlatform-&gt;refresh();
            $newsletterClientPlatformAfter = $newsletterClientPlatform-&gt;newsletter_id_on_platform;

            $result3 = $newsletterClientPlatformBefore !== $newsletterClientPlatformAfter;

            $this-&gt;assertTrue($result);
            $this-&gt;assertTrue($result2);
            $this-&gt;assertNotNull($newsletterClientPlatformBefore);
            $this-&gt;assertNotNull($newsletterClientPlatformAfter);
            $this-&gt;assertTrue($result3);

            $newsletter-&gt;name = $nameCopy;
        }
    }

    /**
     * @group getResponse
     * @group getResponseUpdateNL
     */
    public function test_update_newsletter_gr_change_status_to_paused()
    {
        $newsletter = Newsletter::factory()-&gt;create();
        $countries = [155, 201];
        $clients = [6, 7];

        $this-&gt;createLeadsAndTheirMetadatas($countries);
        $this-&gt;createNewsletterCountries($newsletter, $countries);
        $this-&gt;createNewsletterClientPlatformLeads($newsletter, $clients, $countries);

        foreach ($clients as $client) {
            $newsletterClient =
                NewsletterClient::where(&apos;newsletter_id&apos;, $newsletter-&gt;id)-&gt;where(&apos;client_id&apos;, $client)-&gt;first();
            $newsletterClientPlatform =
                NewsletterClientPlatform::where(&apos;newsletter_client_id&apos;, $newsletterClient-&gt;id)
                -&gt;where(&apos;marketing_platform_id&apos;, 1)-&gt;first();

            $getResponse = new GetResponseMailDriver($client, 1);
            $result = $getResponse-&gt;addNewsletter(
                $newsletter,
                $this-&gt;newsletterClientPlatformService,
                $newsletterClientPlatform,
                $this-&gt;taskService,
                $this-&gt;newsletterService,
                $this-&gt;newsletterErrorService,
                $this-&gt;leadMetadataService,
                $countries
            );

            $newsletterClientPlatform-&gt;refresh();
            $newsletterClientPlatformBefore = $newsletterClientPlatform-&gt;newsletter_id_on_platform;
            $newsletter-&gt;status = &quot;paused&quot;;

            $result2 = $getResponse-&gt;updateNewsletter(
                $newsletter,
                2,
                $this-&gt;newsletterClientPlatformService,
                $this-&gt;taskService,
                $this-&gt;newsletterService,
                $this-&gt;newsletterErrorService,
                $this-&gt;leadMetadataService,
                $countries,
                &apos;paused&apos;
            );

            $newsletterClientPlatform-&gt;refresh();
            $newsletterClientPlatformAfter = $newsletterClientPlatform-&gt;newsletter_id_on_platform;
            $result3 = $newsletterClientPlatformBefore === $newsletterClientPlatformAfter;
            $tasks = $this-&gt;taskService-&gt;findWhere([&apos;task_scope_id&apos; =&gt; $newsletterClientPlatform-&gt;id]);

            $this-&gt;assertTrue($result);
            $this-&gt;assertTrue($result2);
            $this-&gt;assertNotNull($newsletterClientPlatformBefore);
            $this-&gt;assertNotNull($newsletterClientPlatformAfter);
            $this-&gt;assertTrue($result3);
            $this-&gt;assertEmpty($tasks);

            // REVERT NEWSLETTER STATUS FOR THE NEXT CLIENT
            $newsletter-&gt;status = &quot;scheduled&quot;;
        }
    }

    /**
     * @group getResponse
     * @group getResponseUpdateNL
     */
    public function test_update_newsletter_gr_change_status_to_active()
    {
        $newsletter = Newsletter::factory()-&gt;create([
            &apos;status&apos; =&gt; &apos;paused&apos;
        ]);
        $countries = [155, 201];
        $clients = [6, 7];

        $this-&gt;createLeadsAndTheirMetadatas($countries);
        $this-&gt;createNewsletterCountries($newsletter, $countries);
        $this-&gt;createNewsletterClientPlatformLeads($newsletter, $clients, $countries);

        foreach ($clients as $client) {
            $newsletterClient =
                NewsletterClient::where(&apos;newsletter_id&apos;, $newsletter-&gt;id)-&gt;where(&apos;client_id&apos;, $client)-&gt;first();
            $newsletterClientPlatform =
                NewsletterClientPlatform::where(&apos;newsletter_client_id&apos;, $newsletterClient-&gt;id)
                -&gt;where(&apos;marketing_platform_id&apos;, 1)-&gt;first();

            $getResponse = new GetResponseMailDriver($client, 1);
            $result = $getResponse-&gt;addNewsletter(
                $newsletter,
                $this-&gt;newsletterClientPlatformService,
                $newsletterClientPlatform,
                $this-&gt;taskService,
                $this-&gt;newsletterService,
                $this-&gt;newsletterErrorService,
                $this-&gt;leadMetadataService,
                $countries
            );

            $newsletterClientPlatform-&gt;refresh();
            $newsletterClientPlatformBefore = $newsletterClientPlatform-&gt;newsletter_id_on_platform;
            $newsletter-&gt;status = &quot;scheduled&quot;;

            $result2 = $getResponse-&gt;updateNewsletter(
                $newsletter,
                2,
                $this-&gt;newsletterClientPlatformService,
                $this-&gt;taskService,
                $this-&gt;newsletterService,
                $this-&gt;newsletterErrorService,
                $this-&gt;leadMetadataService,
                $countries,
                &apos;scheduled&apos;
            );

            $newsletterClientPlatform-&gt;refresh();
            $newsletterClientPlatformAfter = $newsletterClientPlatform-&gt;newsletter_id_on_platform;
            $result3 = $newsletterClientPlatformBefore === $newsletterClientPlatformAfter;

            $this-&gt;assertTrue($result);
            $this-&gt;assertTrue($result2);
            $this-&gt;assertNotNull($newsletterClientPlatformBefore);
            $this-&gt;assertNotNull($newsletterClientPlatformAfter);
            $this-&gt;assertTrue($result3);

            // REVERT NEWSLETTER STATUS FOR THE NEXT CLIENT
            $newsletter-&gt;status = &quot;paused&quot;;
        }
    }

    /**
     * @group getResponse
     * @group getResponseUpdateNL
     */
    public function test_update_newsletter_gr_change_status_to_active_already_active()
    {
        $newsletter = Newsletter::factory()-&gt;create();
        $countries = [155, 201];
        $clients = [6, 7];

        $this-&gt;createLeadsAndTheirMetadatas($countries);
        $this-&gt;createNewsletterCountries($newsletter, $countries);
        $this-&gt;createNewsletterClientPlatformLeads($newsletter, $clients, $countries);

        foreach ($clients as $client) {
            $newsletterClient =
                NewsletterClient::where(&apos;newsletter_id&apos;, $newsletter-&gt;id)-&gt;where(&apos;client_id&apos;, $client)-&gt;first();
            $newsletterClientPlatform =
                NewsletterClientPlatform::where(&apos;newsletter_client_id&apos;, $newsletterClient-&gt;id)
                -&gt;where(&apos;marketing_platform_id&apos;, 1)-&gt;first();

            $getResponse = new GetResponseMailDriver($client, 1);
            $result = $getResponse-&gt;addNewsletter(
                $newsletter,
                $this-&gt;newsletterClientPlatformService,
                $newsletterClientPlatform,
                $this-&gt;taskService,
                $this-&gt;newsletterService,
                $this-&gt;newsletterErrorService,
                $this-&gt;leadMetadataService,
                $countries
            );

            $newsletterClientPlatform-&gt;refresh();
            $newsletterClientPlatformBefore = $newsletterClientPlatform-&gt;newsletter_id_on_platform;
            $newsletter-&gt;status = &quot;scheduled&quot;;

            $result2 = $getResponse-&gt;updateNewsletter(
                $newsletter,
                2,
                $this-&gt;newsletterClientPlatformService,
                $this-&gt;taskService,
                $this-&gt;newsletterService,
                $this-&gt;newsletterErrorService,
                $this-&gt;leadMetadataService,
                $countries,
                &apos;scheduled&apos;
            );

            $newsletterClientPlatform-&gt;refresh();
            $newsletterClientPlatformAfter = $newsletterClientPlatform-&gt;newsletter_id_on_platform;
            $result3 = $newsletterClientPlatformBefore === $newsletterClientPlatformAfter;
            $error =
                NewsletterClientPlatformError::where(
                    &apos;newsletter_client_platform_id&apos;,
                    $newsletterClientPlatform-&gt;id
                )-&gt;first();

            $this-&gt;assertTrue($result);
            $this-&gt;assertFalse($result2);
            $this-&gt;assertNotNull($newsletterClientPlatformBefore);
            $this-&gt;assertNotNull($newsletterClientPlatformAfter);
            $this-&gt;assertTrue($result3);
            $this-&gt;assertNotNull($error);
        }
    }

    /**
     * @group getResponse
     * @group getResponseDeleteNL1
     */
    public function test_delete_newsletter_gr()
    {
        $newsletter = Newsletter::factory()-&gt;create();
        $countries = [155, 201];
        $clients = [6, 7];

        $this-&gt;createLeadsAndTheirMetadatas($countries);
        $this-&gt;createNewsletterCountries($newsletter, $countries);
        $this-&gt;createNewsletterClientPlatformLeads($newsletter, $clients, $countries);

        foreach ($clients as $client) {
            $newsletterClient =
                NewsletterClient::where(&apos;newsletter_id&apos;, $newsletter-&gt;id)-&gt;where(&apos;client_id&apos;, $client)-&gt;first();
            $newsletterClientPlatform =
                NewsletterClientPlatform::where(&apos;newsletter_client_id&apos;, $newsletterClient-&gt;id)
                -&gt;where(&apos;marketing_platform_id&apos;, 1)-&gt;first();

            $getResponse = new GetResponseMailDriver($client, 1);
            $result = $getResponse-&gt;addNewsletter(
                $newsletter,
                $this-&gt;newsletterClientPlatformService,
                $newsletterClientPlatform,
                $this-&gt;taskService,
                $this-&gt;newsletterService,
                $this-&gt;newsletterErrorService,
                $this-&gt;leadMetadataService,
                $countries
            );

            $result2 = $getResponse-&gt;updateNewsletter(
                $newsletter,
                2,
                $this-&gt;newsletterClientPlatformService,
                $this-&gt;taskService,
                $this-&gt;newsletterService,
                $this-&gt;newsletterErrorService,
                $this-&gt;leadMetadataService,
                $countries,
                &apos;paused&apos;
            );

            $this-&gt;assertTrue($result2);

            $newsletterClientPlatform-&gt;refresh();
            $newsletterClientPlatformBefore = $newsletterClientPlatform-&gt;newsletter_id_on_platform;
            $result3 = $getResponse-&gt;deleteNewsletter(
                $newsletterClientPlatform,
                $this-&gt;newsletterErrorService,
                $this-&gt;newsletterClientPlatformService,
                $this-&gt;taskService,
                true
            );
            $newsletterClientPlatform-&gt;refresh();
            $newsletterClientPlatformAfter = $newsletterClientPlatform-&gt;newsletter_id_on_platform;

            $this-&gt;assertTrue($result);
            $this-&gt;assertTrue($result3);
            $this-&gt;assertNotNull($newsletterClientPlatformBefore);
            $this-&gt;assertNull($newsletterClientPlatformAfter);
        }
    }

    private function createLeadsAndTheirMetadatas(array $countries): void
    {
        $lead1 = Lead::factory()-&gt;create([
            &apos;client_id&apos; =&gt; 6,
            &apos;country_id&apos; =&gt; $countries[rand(0, 1)],
            &apos;contact_data&apos; =&gt; &apos;dragoslav.gagi8@gmail.com&apos;
        ]);

        $lead2 = Lead::factory()-&gt;create([
            &apos;client_id&apos; =&gt; 6,
            &apos;country_id&apos; =&gt; $countries[rand(0, 1)],
            &apos;contact_data&apos; =&gt; &apos;dragoslav.jankovic@quantox.com&apos;
        ]);

        $lead3 = Lead::factory()-&gt;create([
            &apos;client_id&apos; =&gt; 7,
            &apos;country_id&apos; =&gt; $countries[rand(0, 1)],
            &apos;contact_data&apos; =&gt; &apos;dragoslav.jankovicc@gmail.com&apos;
        ]);

        LeadMetadata::factory()-&gt;create([
            &apos;lead_id&apos; =&gt; $lead1-&gt;id,
            &apos;marketing_platform_id&apos; =&gt; 1,
            &apos;contact_id&apos; =&gt; &quot;nXdH&quot;,
            &apos;status&apos; =&gt; &apos;subscribed&apos;
        ]);

        LeadMetadata::factory()-&gt;create([
            &apos;lead_id&apos; =&gt; $lead2-&gt;id,
            &apos;marketing_platform_id&apos; =&gt; 1,
            &apos;contact_id&apos; =&gt; &quot;nXHI&quot;,
            &apos;status&apos; =&gt; &apos;subscribed&apos;
        ]);

        LeadMetadata::factory()-&gt;create([
            &apos;lead_id&apos; =&gt; $lead3-&gt;id,
            &apos;marketing_platform_id&apos; =&gt; 1,
            &apos;contact_id&apos; =&gt; &quot;nXdJ&quot;,
            &apos;status&apos; =&gt; &apos;subscribed&apos;
        ]);
    }

    private function createNewsletterCountries(Newsletter $newsletter, array $countries): void
    {
        foreach ($countries as $country) {
            NewsletterCountry::create([
                &apos;newsletter_id&apos; =&gt; $newsletter-&gt;id,
                &apos;country_id&apos; =&gt; $country
            ]);
        }
    }

    private function createNewsletterClientPlatformLeads(Newsletter $newsletter, array $clients, array $countries): void
    {
        foreach ($clients as $client) {
            $newsletterClient = NewsletterClient::factory()-&gt;create([
                &apos;newsletter_id&apos; =&gt; $newsletter-&gt;id,
                &apos;client_id&apos; =&gt; $client,
            ]);

            $newsletterClientPlatform = NewsletterClientPlatform::create([
                &apos;newsletter_client_id&apos; =&gt; $newsletterClient-&gt;id,
                &apos;marketing_platform_id&apos; =&gt; 1
            ]);

            $leadMetadatas = LeadMetadata::select(&apos;lead_metadata.id as lmdID&apos;)
                -&gt;join(&apos;leads&apos;, &apos;lead_metadata.lead_id&apos;, &apos;=&apos;, &apos;leads.id&apos;)
                -&gt;where(&apos;leads.client_id&apos;, $client)
                -&gt;where(&apos;lead_metadata.marketing_platform_id&apos;, 1)
                -&gt;where(&apos;lead_metadata.status&apos;, &apos;subscribed&apos;)
                -&gt;where(&apos;leads.is_bot&apos;, 0)
                -&gt;whereIn(&apos;leads.country_id&apos;, $countries)
                -&gt;get();

            foreach ($leadMetadatas as $leadMetadata) {
                NewsletterClientPlatformLeadMetadata::create([
                    &apos;newsletter_client_platform_id&apos; =&gt; $newsletterClientPlatform-&gt;id,
                    &apos;lead_metadata_id&apos; =&gt; $leadMetadata-&gt;lmdID
                ]);
            }
        }
    }
}

</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->




                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Query Builder - Thunder, SDS
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExample4" aria-expanded="false"
                                aria-controls="collapseExample4">+</button>
                            <button data-title="query-builder" class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
/**
* Returns number of subscribed users for specified day and widget.
*
* @param int $widget_id
* @param string $day Eg. (2016-04-31)
* @param bool $allWidgets
* @param User|null $client
* @return object|null
*/
private function subscribedForTheDay(
    int $widget_id,
    string $day,
    bool $allWidgets,
    ?User $client
) {
    $arr = explode('-', $day);

    return DB::table('lead_metadata')
        -&gt;select(
            $allWidgets === false ? 'leads.widget_id' : 'leads.client_id',
            DB::raw("COUNT(DISTINCT lead_id) AS num_of_subscribed"),
        )-&gt;leftJoin('leads', 'leads.id', '=', 'lead_metadata.lead_id')
        -&gt;where('lead_metadata.status', '=', 'subscribed')
        -&gt;whereRaw("YEAR(lead_metadata.created_at) = {$arr[0]}")
        -&gt;whereRaw("MONTH(lead_metadata.created_at) = {$arr[1]}")
        -&gt;whereRaw("DAY(lead_metadata.created_at) = {$arr[2]}")
        -&gt;where(
            $allWidgets === false ? 'leads.widget_id' : 'leads.client_id',
            '=',
            $allWidgets === false ? $widget_id : $client-&gt;id
        )
        -&gt;groupBy($allWidgets === false ? 'leads.widget_id' : 'leads.client_id')
        -&gt;first();
}    

public function findWithReports($id)
{
    $q = DB::table('campaigns')-&gt;select(
        'campaigns.*',
        DB::raw('ifnull(help_table_1.num_of_opens, 0) AS action_open'),
        DB::raw('ifnull(help_table_2.num_of_clicks, 0) AS action_click'),
        DB::raw('ifnull(help_table_3.num_of_delivered, 0) AS action_delivered'),
        DB::raw('ifnull(help_table_4.num_of_errors, 0) AS num_of_errors'),
        DB::raw('if(help_table_4.num_of_errors &gt; 0, "error", campaigns.status) AS status'),
    )
        -&gt;leftJoin(
            DB::raw("(SELECT campaign_id, SUM(help_table_1_1.num_of_opens) AS num_of_opens 
            FROM `client_campaign_newsletter` ccn
            LEFT JOIN (SELECT ccc_id, count(ccc_id) AS num_of_opens FROM `opens` GROUP BY ccc_id) help_table_1_1
            ON help_table_1_1.ccc_id = ccn.id 
            GROUP BY campaign_id) AS help_table_1"),
            'campaigns.id',
            '=',
            'help_table_1.campaign_id'
        )
        -&gt;leftJoin(
            DB::raw("(SELECT campaign_id, SUM(help_table_2_1.num_of_clicks) AS num_of_clicks 
            FROM `client_campaign_newsletter` ccn
            LEFT JOIN (SELECT ccc_id, count(ccc_id) AS num_of_clicks FROM `clicks` GROUP BY ccc_id) AS help_table_2_1
            ON help_table_2_1.ccc_id = ccn.id 
            GROUP BY campaign_id) AS help_table_2"),
            'campaigns.id',
            '=',
            'help_table_2.campaign_id'
        )
        -&gt;leftJoin(
            DB::raw("(SELECT campaign_id, SUM(delivered_count) AS num_of_delivered 
            FROM `client_campaign_newsletter` 
            GROUP BY campaign_id) AS help_table_3"),
            'campaigns.id',
            '=',
            'help_table_3.campaign_id'
        )
        -&gt;leftJoin(
            DB::raw("(SELECT campaign_id, COUNT(error_id) AS num_of_errors 
            FROM `client_campaign_newsletter` 
            GROUP BY campaign_id) AS help_table_4"),
            'campaigns.id',
            '=',
            'help_table_4.campaign_id'
        )-&gt;where('id', '=', $id);

    $q = $q-&gt;whereNull('deleted_at');

    return  $q-&gt;first();
}
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->




                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Raw Select, With, Max, Virtual Tables - Thunder, SDS
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExample4" aria-expanded="false"
                                aria-controls="collapseExample4">+</button>
                            <button data-title="raw-sql" class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
/**
* Finds the name of the widget with the best CTA%
*
* Custom table looks like this:\
* | WIDGET_ID | IMPRESSIONS | CONVERSIONS | CTA
*
* @param int $client_id
* @return array
*/
private function bestCTA(int $client_id)
{
    /* ADDED MULTIPLE WITHS */

    return DB::select("WITH 
    num_of_conversions_table AS (
        SELECT widget_id, count(*) AS conversions
        FROM widget_trackings
        WHERE `action` = 'conversion'
        GROUP BY widget_id
    ),
    num_of_impressions_table AS (
        SELECT widget_id, count(*) AS impressions
        FROM widget_trackings
        WHERE `action` = 'impression'
        GROUP BY widget_id
    ),
    custom_table AS (
        SELECT widget_trackings.widget_id,
            num_of_conversions_table.conversions AS num_of_conversions,
            num_of_impressions_table.impressions AS num_of_impressions,
            (num_of_conversions_table.conversions * 100 / num_of_impressions_table.impressions) AS CTA
        FROM widget_trackings
        LEFT JOIN num_of_conversions_table
        ON widget_trackings.widget_id = num_of_conversions_table.widget_id
        LEFT JOIN num_of_impressions_table
        ON widget_trackings.widget_id = num_of_impressions_table.widget_id
        LEFT JOIN widgets
            ON widget_trackings.widget_id = widgets.id
        WHERE widgets.client_id = $client_id
        GROUP BY widget_trackings.widget_id
    )
    SELECT widgets.name
    FROM custom_table
    LEFT JOIN widgets
    ON widgets.id = custom_table.widget_id
    WHERE custom_table.CTA = (
        SELECT MAX(custom_table.CTA)
        FROM custom_table
    )
    LIMIT 1");

    /* ADDED 1 WITH AND LIMIT 1 */

    // return DB::select("WITH custom_table AS (
    //     SELECT widget_trackings.widget_id,
    //         help_table_1.conversions AS num_of_conversions,
    //         help_table_2.impressions AS num_of_impressions,
    //         (help_table_1.conversions * 100 / help_table_2.impressions) AS CTA
    //     FROM widget_trackings
    //     LEFT JOIN (
    //         SELECT widget_id, count(*) AS conversions
    //         FROM widget_trackings
    //         WHERE `action` = 'conversion'
    //         GROUP BY widget_id
    //     ) AS help_table_1
    //     ON widget_trackings.widget_id = help_table_1.widget_id
    //     LEFT JOIN (
    //         SELECT widget_id, count(*) AS impressions
    //         FROM widget_trackings
    //         WHERE `action` = 'impression'
    //         GROUP BY widget_id
    //     ) AS help_table_2
    //     ON widget_trackings.widget_id = help_table_2.widget_id
    //     LEFT JOIN widgets
    //         ON widget_trackings.widget_id = widgets.id
    //     WHERE widgets.client_id = $client_id
    //     GROUP BY widget_trackings.widget_id
    // )
    // SELECT MAX(custom_table.CTA) AS MAX_CTA
    // FROM custom_table");

    /* OLD WAY */

    // return DB::select("SELECT MAX(custom_table.CTA) AS MAX_CTA
    // FROM (
    //     SELECT widget_trackings.widget_id,
    //         help_table_1.conversions AS num_of_conversions,
    //         help_table_2.impressions AS num_of_impressions,
    //         (help_table_1.conversions * 100 / help_table_2.impressions) AS CTA
    //     FROM widget_trackings
    //     LEFT JOIN (
    //         SELECT widget_id, count(*) AS conversions
    //         FROM widget_trackings
    //         WHERE `action` = 'conversion'
    //         GROUP BY widget_id
    //     ) AS help_table_1
    //     ON widget_trackings.widget_id = help_table_1.widget_id
    //     LEFT JOIN (
    //         SELECT widget_id, count(*) AS impressions
    //         FROM widget_trackings
    //         WHERE `action` = 'impression'
    //         GROUP BY widget_id
    //     ) AS help_table_2
    //     ON widget_trackings.widget_id = help_table_2.widget_id
    //     LEFT JOIN widgets
    //         ON widget_trackings.widget_id = widgets.id
    //     WHERE widgets.client_id = $client_id
    //     GROUP BY widget_trackings.widget_id
    // ) AS custom_table");
}
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->




                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Multiple Databases - Thunder, SDS
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExample4" aria-expanded="false"
                                aria-controls="collapseExample4">+</button>
                            <button data-title="mdbs" class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
In User Model - protected $connection = 'users';
In Migration - $table->foreign('user_id')->references('id')->on('hypknowledge_users.users')->onDelete('set null');
In Request - 'user_id' => 'bail|required|integer|exists:users.hypknowledge_users.users,id'

In .env - 
    DB_HOST_USERS=mysql
    DB_PORT_USERS=3306
    DB_DATABASE_USERS=hypknowledge_users
    DB_USERNAME_USERS=root
    DB_PASSWORD_USERS=root

In config/database.php - 
        'mysql' =&gt; [
            'driver' =&gt; 'mysql',
            'url' =&gt; env('DATABASE_URL'),
            'host' =&gt; env('DB_HOST', '127.0.0.1'),
            'port' =&gt; env('DB_PORT', '3306'),
            'database' =&gt; env('DB_DATABASE', 'forge'),
            'username' =&gt; env('DB_USERNAME', 'forge'),
            'password' =&gt; env('DB_PASSWORD', ''),
            'unix_socket' =&gt; env('DB_SOCKET', ''),
            'charset' =&gt; 'utf8mb4',
            'collation' =&gt; 'utf8mb4_unicode_ci',
            'prefix' =&gt; '',
            'prefix_indexes' =&gt; true,
            'strict' =&gt; false,
            'engine' =&gt; null,
            'options' =&gt; extension_loaded('pdo_mysql') ? array_filter([
                PDO::MYSQL_ATTR_SSL_CA =&gt; env('MYSQL_ATTR_SSL_CA'),
            ]) : [],
        ],
        'users' =&gt; [
            'driver' =&gt; 'mysql',
            'url' =&gt; env('DATABASE_URL_USERS'),
            'host' =&gt; env('DB_HOST_USERS', '127.0.0.1'),
            'port' =&gt; env('DB_PORT_USERS', '3306'),
            'database' =&gt; env('DB_DATABASE_USERS', 'forge'),
            'username' =&gt; env('DB_USERNAME_USERS', 'forge'),
            'password' =&gt; env('DB_PASSWORD_USERS', ''),
            'unix_socket' =&gt; env('DB_SOCKET_USERS', ''),
            'charset' =&gt; 'utf8mb4',
            'collation' =&gt; 'utf8mb4_unicode_ci',
            'prefix' =&gt; '',
            'prefix_indexes' =&gt; true,
            'strict' =&gt; false,
            'engine' =&gt; null,
            'options' =&gt; extension_loaded('pdo_mysql') ? array_filter([
                PDO::MYSQL_ATTR_SSL_CA =&gt; env('MYSQL_ATTR_SSL_CA'),
            ]) : [],
        ],

</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->





                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Excel Export - Thunder, SDS
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExample4" aria-expanded="false"
                                aria-controls="collapseExample4">+</button>
                            <button data-title="excel" class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
&lt;?php

namespace App\Exports;

use Maatwebsite\Excel\Concerns\WithHeadings;
use Illuminate\Support\Facades\DB;
use Maatwebsite\Excel\Concerns\FromQuery;
use Maatwebsite\Excel\Concerns\WithStrictNullComparison;

class SDSCL25Export implements FromQuery, WithHeadings, WithStrictNullComparison
{
    /**
     * @return \Illuminate\Support\Collection
     */
    public function query()
    {
        return DB::table('questionnaire')-&gt;select(
            'age',
            'date',
            'height',
            'initials',
            'sex',
            'gender_identity',
            'weight',
            'work_hours',
            'what_describes_schedule',
            'do_you_have_bed_partner',
            'how_much_sleep_get_per_night',
            'how_much_sleep_do_you_spend_in_bed',
            DB::raw('ROUND(how_much_sleep_get_per_night / how_much_sleep_do_you_spend_in_bed * 100, 2)'),
            'race_ethnicity',
            // 'other_ethnicity',
            'other_ethnicity_value',
            'school_degree',
            'hypertension',
            'country',
            'zip_code',
            'question_1',
            'question_2',
            'question_3',
            'question_4',
            'question_5',
            'question_6',
            'question_7',
            'question_8',
            'question_9',
            'question_10',
            'question_11',
            'question_12',
            'question_13',
            'question_14',
            'question_15',
            'question_16',
            'question_17',
            'question_18',
            'question_19',
            'question_20',
            'question_21',
            'question_22',
            'question_23',
            'question_24',
            'question_25',
            DB::raw('(question_1+
            question_2+
            question_3+
            question_4+
            question_5+
            question_6+
            question_7+
            question_8+
            question_9+
            question_10+
            question_11+
            question_12+
            question_13+
            question_14+
            question_15+
            question_16+
            question_17+
            question_18+
            question_19+
            question_20+
            question_21+
            question_22+
            question_23+
            question_24+
            question_25)')
        )-&gt;where('type', 'sds-cl-25')-&gt;orderBy('id');
    }

    public function headings(): array
    {
        return [
            'AGE',
            'DATE',
            'HEIGHT',
            'INITIALS',
            'SEX',
            'GENDER_IDENTITY',
            'WEIGHT',
            'WORK_HOURS',
            'SCHEDULE',
            'BED_PARTNER',
            'TST',
            'TIB',
            'SE',
            'ETHNICITY',
            'OTHER_ETHNICITY',
            'SCHOOL_DEGREE',
            'HYPERTENSION',
            'COUNTRY',
            'ZIP/POSTAL CODE',
            'Q1',
            'Q2',
            'Q3',
            'Q4',
            'Q5',
            'Q6',
            'Q7',
            'Q8',
            'Q9',
            'Q10',
            'Q11',
            'Q12',
            'Q13',
            'Q14',
            'Q15',
            'Q16',
            'Q17',
            'Q18',
            'Q19',
            'Q20',
            'Q21',
            'Q22',
            'Q23',
            'Q24',
            'Q25',
            'TOTAL_SCORE',
        ];
    }
}

</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->









                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Relationship with nested relationships - Thunder
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExample4" aria-expanded="false"
                                aria-controls="collapseExample4">+</button>
                            <button data-title="excel" class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
    public function testInfo()
    {
        return $this-&gt;hasOne(TestInfo::class, 'newsletter_id', 'id')-&gt;with('options');
    }

</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->


                    </div>











                </div>
                <!-- ---------- LARAVEL ---------- -->





                <!-- ---------- PHP ---------- -->
                <div id="php">
                    <h1 class="collapse-btn-G collapsed mb-5" type="button" data-toggle="collapse"
                        data-target="#php-collapse" aria-expanded="false" aria-controls="php-collapse">
                        <u>PHP</u>
                        <span class="collapse-arrow">&#8250;</span>
                    </h1>


                    <div class="collapse" id="php-collapse">


                        <!-- SECTION START -->
                        <p class="font-weight-bold important-color">
                            Database Class (PDO) - Tatamata
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleP5" aria-expanded="false"
                                aria-controls="collapseExampleP5">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
&lt;?php

/*

1. SELECT ALL
2. SELECT ALL WHERE
3. SELECT ONE
4. SELECT ONE WHERE
5. SELECT JOIN
6. INSERT
7. UPDATE
8. DELETE

*/

if (session_status() == PHP_SESSION_NONE) {
  session_start();
}

class Database extends PDO {
  private $host; // Host
  private $db_name; // DB Name
  private $username; // DB Username
  private $password; // DB Password


  private static $instance = null; // Instanca klase
  public $connection = null; // Konekcija

  private function __construct() {
    if ($_SERVER['SERVER_NAME'] == "localhost") {
      $this-&gt;host = "localhost"; // Host
      $this-&gt;db_name = "karagaca"; // DB Name
      $this-&gt;username = "root"; // DB Username
      $this-&gt;password = ""; // DB Password
    } else {
      $this-&gt;host = "localhost"; // Host
      $this-&gt;db_name = "tatamatars_main"; // DB Name
      $this-&gt;username = "32131"; // DB Username
      $this-&gt;password = "123131231322131"; // DB Password
    }
    try {
      $this-&gt;connection = new PDO('mysql:host=' . $this-&gt;host . ';dbname=' . $this-&gt;db_name . ';charset=utf8', $this-&gt;username, $this-&gt;password);
      $this-&gt;connection-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
      $this-&gt;connection-&gt;setAttribute(PDO::ATTR_FETCH_TABLE_NAMES, PDO::FETCH_ASSOC);
    } catch (PDOException $e) {
      echo "&lt;p class='alert mb-0 alert-danger'&gt;PDO EXCEPTION: " . $e-&gt;getMessage() . "&lt;/p&gt;";

      die("Database didn't connect.");
    }

    // $this-&gt;connection = mysqli_connect($this-&gt;host, $this-&gt;username, $this-&gt;password, $this-&gt;db_name);
  }

  public function getConnection() {
    return $this-&gt;connection;
  }

  public static function getInstance() {
    if (!isset(self::$instance)) {
      self::$instance = new Database();
    }

    return self::$instance;
  }

  /* oSELECT ONE WHERE */

  public function takenEmail($email) {
    try {
      $query = Database::getInstance()-&gt;getConnection()-&gt;prepare("SELECT * FROM user WHERE email = :email");
      $query-&gt;execute(array(
        ':email' =&gt; $email,
      ));

      $user = $query-&gt;fetch(PDO::FETCH_ASSOC);

      if ($user) {
        return true;
      }

      return false;
    } catch (PDOException $e) {
      echo "&lt;p class='alert mb-0 alert-danger'&gt;PDO EXCEPTION: " . $e-&gt;getMessage() . "&lt;/p&gt;";

      return false;
    }
  }

  /* oINSERT */

  public function registerUser($data) {
    try {
      $data['password'] = password_hash($data['password'], PASSWORD_BCRYPT); // Hashovanje sifre sa md5
      $query = Database::getInstance()-&gt;getConnection()-&gt;prepare("INSERT INTO user (email, password, username, image) VALUES (?, ?, ?, ?)");
      $result = $query-&gt;execute([
        $data['email'],
        $data['password'],
        $data['username'],
        $data['image'],
      ]);

      $data['id'] = Database::getInstance()-&gt;getConnection()-&gt;lastInsertId();
      $data['is_admin'] = false;

      $data = $this-&gt;fixData($data);

      if ($result) { // Ukoliko je query uspesan pravimo sesiju i vracamo true
        $_SESSION['user'] = $data;

        return true;
      }

      return false;
    } catch (PDOException $e) {
      echo "&lt;p class='alert mb-0 alert-danger'&gt;PDO EXCEPTION: " . $e-&gt;getMessage() . "&lt;/p&gt;";

      return false;
    }
  }

  public function fixData($data) {
    //Get keys
    $keys = array_keys($data);

    //Map keys to format function
    $keys = array_map(function($key){
      return $key = "user." . $key;
    }, $keys);

    //Use array_combine to map formatted keys to array values
    $data = array_combine($keys, $data);

    return $data;
  }

  /* oUPDATE */

  public function updateProduct($data, $productID) {
    try {
      $query = Database::getInstance()-&gt;getConnection()-&gt;prepare("UPDATE `product` SET name = ?, price = ?, image = ?, description = ? WHERE id = ?");
      $result = $query-&gt;execute([
        $data['name_edit'],
        $data['price_edit'],
        $data['image_edit'],
        $data['description_edit'],
        $productID,
        ]);

      return $result;
    } catch (PDOException $e) {
      echo "&lt;p class='alert mb-0 alert-danger'&gt;PDO EXCEPTION: " . $e-&gt;getMessage() . "&lt;/p&gt;";

      return false;
    }
  }

  public function loginUser($data) {
    try {
      $query = Database::getInstance()-&gt;getConnection()-&gt;prepare("SELECT * FROM user WHERE email = :email");
      $query-&gt;execute(array(
        ':email' =&gt; $data['email'],
      ));

      $user = $query-&gt;fetch(PDO::FETCH_ASSOC);

      if ($user &amp;&amp; password_verify($data['password'], $user['user.password'])) {
        $_SESSION['user'] = $user;

        return true;
      }

      return false;
    } catch (PDOException $e) {
      echo "&lt;p class='alert mb-0 alert-danger'&gt;PDO EXCEPTION: " . $e-&gt;getMessage() . "&lt;/p&gt;";

      exit;
    }
  }

  public function isUserLoggedIn() {
    if (isset($_SESSION['user'])) {
      return true;
    }

    return false;
  }

  public function logoutUser() {
    unset($_SESSION['user']);
  }

  public function getUserByID($id) {
    try {
      $query = Database::getInstance()-&gt;getConnection()-&gt;prepare("SELECT * FROM user WHERE id = :id");
      $query-&gt;execute(array(
        ':id' =&gt; $id,
      ));

      $user = $query-&gt;fetch(PDO::FETCH_ASSOC);

      return $user;
    } catch (PDOException $e) {
      echo "&lt;p class='alert mb-0 alert-danger'&gt;PDO EXCEPTION: " . $e-&gt;getMessage() . "&lt;/p&gt;";

      exit;
    }
  }

  public function getUserByEmail($email) {
    try {
      $query = Database::getInstance()-&gt;getConnection()-&gt;prepare("SELECT * FROM user WHERE email = :email");
      $query-&gt;execute(array(
        ':email' =&gt; $email,
      ));

      $user = $query-&gt;fetch(PDO::FETCH_ASSOC);

      return $user;
    } catch (PDOException $e) {
      echo "&lt;p class='alert mb-0 alert-danger'&gt;PDO EXCEPTION: " . $e-&gt;getMessage() . "&lt;/p&gt;";

      exit;
    }
  }

  public function getPasswordForUser($id) {
    try {
      $query = Database::getInstance()-&gt;getConnection()-&gt;prepare("SELECT password FROM user WHERE id = :id");
      $query-&gt;execute(array(
        ':id' =&gt; $id,
      ));

      $password = $query-&gt;fetch()['password'];

      return $password;
    } catch (PDOException $e) {
      echo "&lt;p class='alert mb-0 alert-danger'&gt;PDO EXCEPTION: " . $e-&gt;getMessage() . "&lt;/p&gt;";

      exit;
    }
  }

  public function updateUserPassword($id, $password) {
    try {
      $password = md5(md5($password)); // Hashovanje sifre sa md5
      $query = Database::getInstance()-&gt;getConnection()-&gt;prepare("UPDATE `user` SET password = :password WHERE id = :id");
      $result = $query-&gt;execute([
        ':password' =&gt; $password,
        ':id' =&gt; $id,
      ]);

      return $result;
    } catch (PDOException $e) {
      echo "&lt;p class='alert mb-0 alert-danger'&gt;PDO EXCEPTION: " . $e-&gt;getMessage() . "&lt;/p&gt;";

      exit;
    }
  }

  /* oSELECT ALL */

  public function getAllUsers() {
    try {
      $query = Database::getInstance()-&gt;getConnection()-&gt;prepare("SELECT * FROM `user` u");
      $query-&gt;execute();
      $users = $query-&gt;fetchAll(PDO::FETCH_ASSOC);

      return $users;
    } catch (PDOException $e) {
      echo "&lt;p class='alert mb-0 alert-danger'&gt;PDO EXCEPTION: " . $e-&gt;getMessage() . "&lt;/p&gt;";

      return [];
    }
  }

  // COURESES =====================================================================================================================================

  /* oDELETE */

  public function deleteCourse($id) {
    try {
      $query = Database::getInstance()-&gt;getConnection()-&gt;prepare("DELETE FROM course WHERE id = :id LIMIT 1");
      $result = $query-&gt;execute(array(':id' =&gt; $id));

      $query = Database::getInstance()-&gt;getConnection()-&gt;prepare("DELETE FROM user_course WHERE course_id = :id");
      $result = $query-&gt;execute(array(':id' =&gt; $id));

      $query = Database::getInstance()-&gt;getConnection()-&gt;prepare("DELETE FROM `clip` WHERE course_id = :id");
      $result = $query-&gt;execute(array(':id' =&gt; $id));

      $query = Database::getInstance()-&gt;getConnection()-&gt;prepare("DELETE FROM `chapter` WHERE course_id = :id");
      $result = $query-&gt;execute(array(':id' =&gt; $id));

      return $result;
    } catch (PDOException $e) {
      echo "&lt;p class='alert mb-0 alert-danger'&gt;PDO EXCEPTION: " . $e-&gt;getMessage() . "&lt;/p&gt;";

      exit;
    }
  }

  /* oSELECT ONE WHERE */

  public function getCourse($id) {
    try {
      $query = Database::getInstance()-&gt;getConnection()-&gt;prepare("SELECT * FROM course c JOIN grade g ON g.grade_id = c.course_grade_id WHERE id = :id");
      $query-&gt;execute(array(
        ':id' =&gt; $id,
      ));

      $course = $query-&gt;fetch(PDO::FETCH_ASSOC);

      return $course;
    } catch (PDOException $e) {
      echo "&lt;p class='alert mb-0 alert-danger'&gt;PDO EXCEPTION: " . $e-&gt;getMessage() . "&lt;/p&gt;";

      return null;
    }
  }

  // USER_COURSE =================================================================================================================================================

  /* oDELETE */

  public function deleteCoursePurchase($id) {
    try {
      $query = Database::getInstance()-&gt;getConnection()-&gt;prepare("DELETE FROM `user_course` WHERE id = :id LIMIT 1");
      $result = $query-&gt;execute(array(
        ':id' =&gt; $id,
      ));

      return $result;
    } catch (PDOException $e) {
      echo "&lt;p class='alert mb-0 alert-danger'&gt;PDO EXCEPTION: " . $e-&gt;getMessage() . "&lt;/p&gt;";

      exit;
    }
  }

  // PASSWORD RESET ================================================================================================================================================

  public function getPasswordReset($selector, $expires) {
    try {
      $query = Database::getInstance()-&gt;getConnection()-&gt;prepare("SELECT * FROM `password_reset` WHERE selector = :selector AND expires &gt;= :expires");
      $query-&gt;execute([
        ":selector" =&gt; $selector,
        ":expires" =&gt; $expires
      ]);

      $password_reset = $query-&gt;fetch();

      return $password_reset;
    } catch (PDOException $e) {
      echo "&lt;p class='alert mb-0 alert-danger'&gt;PDO EXCEPTION: " . $e-&gt;getMessage() . "&lt;/p&gt;";

      die();
    }
  }

  public function deletePasswordReset($email) {
    try {
      $query = Database::getInstance()-&gt;getConnection()-&gt;prepare("DELETE FROM password_reset WHERE email = :email");
      $result = $query-&gt;execute([
        ':email' =&gt; $email,
      ]);

      return $result;
    } catch (PDOException $e) {
      echo "&lt;p class='alert mb-0 alert-danger'&gt;PDO EXCEPTION: " . $e-&gt;getMessage() . "&lt;/p&gt;";
      echo $e-&gt;getLine();

      exit;
    }
  }

  public function insertPasswordReset($data) {
    try {
      $data = (object) $data;
      $hashedToken = password_hash($data-&gt;token, PASSWORD_DEFAULT);
      $query = Database::getInstance()-&gt;getConnection()-&gt;prepare("INSERT INTO password_reset (email, selector, token, expires) VALUES (?, ?, ?, ?)");
      $result = $query-&gt;execute([
        $data-&gt;email,
        $data-&gt;selector,
        $hashedToken,
        $data-&gt;expires,
      ]);

      return $result;
    } catch (PDOException $e) {
      echo "&lt;p class='alert mb-0 alert-danger'&gt;PDO EXCEPTION: " . $e-&gt;getMessage() . "&lt;/p&gt;";
      echo $e-&gt;getLine();

      exit;
    }
  }

  public function deleteLoginInfo($id) {
    try {
      $query = Database::getInstance()-&gt;getConnection()-&gt;prepare("DELETE FROM `login_details` WHERE id= ?");
      $result = $query-&gt;execute([
        $id,
      ]);

      return $result;
    } catch (PDOException $e) {
      echo "&lt;p class='alert mb-0 alert-danger'&gt;PDO EXCEPTION: " . $e-&gt;getMessage() . "&lt;/p&gt;";
      echo $e-&gt;getLine();

      exit;
    }
  }
}
                          
          </pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->

                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark important-color">
                            login.php - Tatamata
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExample4" aria-expanded="false"
                                aria-controls="collapseExample4">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
&lt;?php

include_once 'includes/functions.php';
require_once 'classes/Database.php';

if (Database::getInstance()-&gt;isUserLoggedIn()) {
  $_SESSION['unauthorized_access'] = '&lt;div class="container-fluid"&gt;
    &lt;div class="row"&gt;
      &lt;div class="col-md-10 col-sm-10 offset-sm-1 offset-md-1 p-0 mt-5"&gt;
        &lt;div class="alert alert-danger alert-dismissible show" role="alert"&gt;
          &lt;strong&gt;Danger!&lt;/strong&gt; Access denied! &lt;i class="fas fa-exclamation-triangle"&gt;&lt;/i&gt;
          &lt;button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"&gt;&lt;/button&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;';
  header("Location: pocetna");

  exit;
}

if (isset($_POST['login'])) {
  $email = clean($_POST['email']);
  $password = clean($_POST['password']);

  $errors = array();

  if (empty($email)) {
    $errors['email'] = '&lt;div class="mb-0 invalid-feedback"&gt;Please enter email.&lt;/div&gt;';
  } else {
    if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {
      $errors['email'] = '&lt;div class="mb-0 invalid-feedback"&gt;Wrong email format.&lt;/div&gt;';
    }
  }

  if (empty($password)) {
    $errors['password'] = '&lt;div class="invalid-feedback"&gt;Please enter password.&lt;/div&gt;';
  }

  if (count($errors) == 0) {
    $data = array(
      "email" =&gt; $email,
      "password" =&gt; $password,
    );

    if (Database::getInstance()-&gt;loginUser($data)) {
      $_SESSION['login_success_message'] = '&lt;div class="container-fluid"&gt;
        &lt;div class="row"&gt;
          &lt;div class="col-md-10 col-sm-10 offset-sm-1 offset-md-1 p-0 mt-5"&gt;
            &lt;div class="alert alert-warning alert-dismissible show mb-5" role="alert"&gt;
              &lt;strong&gt;Login successful! &lt;i class="fas fa-check"&gt;&lt;/i&gt;&lt;/strong&gt; Welcome ' . $_SESSION['user']['user.username'] .
          '. &lt;button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"&gt;&lt;/i&gt;&lt;/button&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;';

      header("Location: mojikursevi");

      exit;
    } else {
      $errors['wrong_combination'] = '&lt;div class="alert alert-danger alert-dismissible show" role="alert"&gt;
      &lt;strong&gt;Danger!&lt;/strong&gt; Wrong combination.
      &lt;button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"&gt;&lt;/i&gt;&lt;/button&gt;
    &lt;/div&gt;';
    }
  }
}
?&gt;

&lt;?php include 'includes/header.php'; ?&gt;


&lt;!-- -------- LOGIN ---------- --&gt;
&lt;section id="login" class="login-form mt-4"&gt;

  &lt;div class="container"&gt;
    &lt;div class="row justify-content-center"&gt;

      &lt;div class="col-lg-6 col-md-8 col-sm-10 col-10 g-0"&gt;

        &lt;?php printFormatedFlashMessage("reset_password_success_message"); ?&gt;
        &lt;?php printFormatedFlashMessage("logout_success_message"); ?&gt;
        &lt;?php echo $errors['wrong_combination'] ?? ""; ?&gt;


        &lt;div class="login-form-container"&gt;
          &lt;h1&gt;Login&lt;/h1&gt;
          &lt;p class="mb-4"&gt;Fields marked with &lt;strong class="text-danger"&gt;*&lt;/strong&gt; are required.&lt;/p&gt;

          &lt;form id="login-form" method="POST"&gt;
            &lt;div class="mb-3"&gt;
              &lt;label class="form-label"&gt;Email &lt;strong class="text-danger"&gt;*&lt;/strong&gt;&lt;/label&gt;
              &lt;input id="email" name="email" type="email" class="form-control &lt;?php if (isset($errors['email'])) echo 'is-invalid';
                                                                              else if (isset($email)) echo 'is-valid'; ?&gt;" placeholder="Enter email" value="&lt;?php echo $email ?? ""; ?&gt;"&gt;
              &lt;?php echo $errors['email'] ?? ""; ?&gt;
            &lt;/div&gt;
            &lt;div class="mb-3"&gt;
              &lt;label class="form-label"&gt;Password &lt;strong class="text-danger"&gt;*&lt;/strong&gt;&lt;/label&gt;
              &lt;input id="password" name="password" type="password" class="form-control &lt;?php if (isset($errors['password'])) echo 'is-invalid'; ?&gt;" placeholder="Enter password"&gt;
              &lt;?php echo $errors['password'] ?? ""; ?&gt;
            &lt;/div&gt;

            &lt;div class="forgot-password-container d-flex justify-content-between"&gt;
              &lt;a href="&lt;?php echo BASE_URL . "zaboravljena-lozinka"; ?&gt;" class="zab-sifru mt-2 d-inline-block text-white"&gt;Zaboravili ste ifru?&lt;/a&gt;
              &lt;button name="login" id="login-btn" type="submit" class="btn btn-primary"&gt;Login&lt;/button&gt;
            &lt;/div&gt;

          &lt;/form&gt;
        &lt;/div&gt;

        &lt;div class="mt-4 text-white text-center go-back"&gt;
          &lt;a href="&lt;?php echo BASE_URL; ?&gt;pocetna"&gt;
            &lt;i class="fas fa-arrow-left"&gt;&lt;/i&gt; Odustani
          &lt;/a&gt;
        &lt;/div&gt;


      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/section&gt;
&lt;!-- -------- LOGIN ---------- --&gt;

&lt;?php include 'includes/footer.php'; ?&gt;
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->


                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark important-color">
                            register.php - Tatamata
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExample4" aria-expanded="false"
                                aria-controls="collapseExample4">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
&lt;?php

include_once 'includes/functions.php';
include_once 'includes/config.php';
require_once 'classes/Database.php';

if (Database::getInstance()-&gt;isUserLoggedIn()) {
  $_SESSION['unauthorized_access'] = '&lt;div class="container-fluid"&gt;
    &lt;div class="row"&gt;
      &lt;div class="col-md-10 col-sm-10 offset-sm-1 offset-md-1 p-0 mt-5"&gt;
        &lt;div class="alert alert-danger alert-dismissible show" role="alert"&gt;
          &lt;strong&gt;Danger!&lt;/strong&gt; Access denied! &lt;i class="fas fa-exclamation-triangle"&gt;&lt;/i&gt;
          &lt;button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"&gt;&lt;/button&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;';
  header("Location: pocetna");

  exit;
}

if (isset($_POST['register'])) {
  $email = clean($_POST['email']);
  $password = clean($_POST['password']);
  $password2 = clean($_POST['password2']);
  $firstname = clean($_POST['firstname']);
  $lastname = clean($_POST['lastname']);
  $phone_number = clean($_POST['phone_number']);
  $grade = clean($_POST['grade']);
  $slazemSe = $_POST['slazem_se'] ?? 0;

  $errors = array();

  if (empty($email)) {
    $errors['email'] = '&lt;div class="mb-0 invalid-feedback"&gt;Please enter email.&lt;/div&gt;';
  } else {
    if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {
      $errors['email'] = '&lt;div class="mb-0 invalid-feedback"&gt;Wrong email format.&lt;/div&gt;';
    }
  }

  if (empty($password)) {
    $errors['password'] = '&lt;div class="mb-0 invalid-feedback"&gt;Please enter password ifru.&lt;/div&gt;';
  } else {
    if ($password != $password2) {
      $errors['password_confirm'] = '&lt;div class="mb-0 invalid-feedback"&gt;Passwords do not match.&lt;/div&gt;';
    } else {
      if (empty($password2)) {
        $errors['password2'] = '&lt;div class="mb-0 invalid-feedback"&gt;Please confirm password.&lt;/div&gt;';
      }
    }
  }

  if (empty($firstname)) {
    $errors['firstname'] = '&lt;div class="mb-0 invalid-feedback"&gt;Please enter firstname.&lt;/div&gt;';
  } else {
    if (!isLettersOnly($firstname)) {
      $errors['firstname'] = '&lt;div class="mb-0 invalid-feedback"&gt;Only letters allowed.&lt;/div&gt;';
    }
  }

  if (empty($lastname)) {
    $errors['lastname'] = '&lt;div class="mb-0 invalid-feedback"&gt;Please enter lastname.&lt;/div&gt;';
  } else {
    if (!isLettersOnly($lastname)) {
      $errors['lastname'] = '&lt;div class="mb-0 invalid-feedback"&gt;Only letters allowed.&lt;/div&gt;';
    }
  }

  if ($slazemSe === 0) {
    $errors['slazem_se'] = '&lt;div class="mb-0 invalid-feedback"&gt;Niste prihvatili uslove korienja.&lt;/div&gt;';
  }

  if (count($errors) == 0) {
    $data = array(
      "email" =&gt; $email,
      "password" =&gt; $password,
      "firstname" =&gt; $firstname,
      "lastname" =&gt; $lastname,
      "phone_number" =&gt; $phone_number,
      "grade" =&gt; $grade,
    );

    if (Database::getInstance()-&gt;takenEmail($email)) {
      $errors['taken_email'] = '&lt;div class="alert alert-danger alert-dismissible show" role="alert"&gt;
      &lt;strong&gt;Greka!&lt;/strong&gt; Email is taken.
      &lt;button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"&gt;&lt;/button&gt;
    &lt;/div&gt;';
    } else if (Database::getInstance()-&gt;registerUser($data)) {
      $_SESSION['register_success_message'] = '&lt;div class="container-fluid"&gt;
        &lt;div class="row"&gt;
          &lt;div class="col-md-10 col-sm-10 offset-sm-1 offset-md-1 p-0 mt-5"&gt;
            &lt;div class="alert alert-warning alert-dismissible show" role="alert" style="margin-bottom: 4rem;"&gt;
              &lt;strong&gt;Registration successful! &lt;i class="fas fa-check"&gt;&lt;/i&gt;&lt;/strong&gt; Welcome ' . $_SESSION['user']['user.username'] .
          '. &lt;button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"&gt;&lt;/button&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;';

      header("Location: " . BASE_URL . "kursevi");

      exit;
    }
  }
}
?&gt;

&lt;?php include 'includes/header.php'; ?&gt;

&lt;!-- -------- REGISTRACIJA ---------- --&gt;
&lt;section id="register" class="registracija mt-4 mb-5"&gt;
  &lt;div class="container"&gt;
    &lt;div class="row justify-content-center"&gt;
      &lt;div class="col-lg-6 col-md-8 col-sm-10 col-10 g-0"&gt;

        &lt;div class="login-form-container"&gt;

          &lt;h1 class="mb-1"&gt;Register&lt;/h1&gt;
          &lt;p class="mb-4"&gt;Fields marked with &lt;strong class="text-danger"&gt;*&lt;/strong&gt; are required.&lt;/p&gt;

          &lt;?php echo $errors['taken_email'] ?? ""; ?&gt;

          &lt;form method="POST"&gt;

            &lt;div class="mb-4"&gt;
              &lt;label class="form-label"&gt;Firstname &lt;strong class="text-danger"&gt;*&lt;/strong&gt;&lt;/label&gt;
              &lt;input name="firstname" type="text" class="form-control &lt;?php if (isset($errors['firstname'])) echo 'is-invalid';
                                                                      else if (isset($firstname)) echo 'is-valid'; ?&gt;" placeholder="Enter firstname" value="&lt;?php echo $firstname ?? ""; ?&gt;"&gt;
              &lt;?php echo $errors['firstname'] ?? ""; ?&gt;
            &lt;/div&gt;

            &lt;div class="mb-4"&gt;
              &lt;label class="form-label"&gt;Lastname &lt;strong class="text-danger"&gt;*&lt;/strong&gt;&lt;/label&gt;
              &lt;input name="lastname" type="text" class="form-control &lt;?php if (isset($errors['lastname'])) echo 'is-invalid';
                                                                      else if (isset($lastname)) echo 'is-valid'; ?&gt;" placeholder="Enter lastname" value="&lt;?php echo $lastname ?? ""; ?&gt;"&gt;
              &lt;?php echo $errors['lastname'] ?? ""; ?&gt;
            &lt;/div&gt;

            &lt;div class="mb-4"&gt;
              &lt;label class="form-label"&gt;Email &lt;strong class="text-danger"&gt;*&lt;/strong&gt;&lt;/label&gt;
              &lt;input name="email" type="email" class="form-control &lt;?php if (isset($errors['email']) || isset($errors['taken_email'])) echo 'is-invalid';
                                                                    else if (isset($email)) echo 'is-valid'; ?&gt;" placeholder="Enter email" value="&lt;?php echo $email ?? ""; ?&gt;"&gt;
              &lt;?php echo $errors['email'] ?? ""; ?&gt;
            &lt;/div&gt;

            &lt;div class="mb-4"&gt;
              &lt;label class="form-label"&gt;Password &lt;strong class="text-danger"&gt;*&lt;/strong&gt;&lt;/label&gt;
              &lt;input name="password" type="password" class="form-control &lt;?php if (isset($errors['password']) || isset($errors['password_confirm'])) echo 'is-invalid'; ?&gt;" placeholder="Confirm password"&gt;
              &lt;?php echo $errors['password'] ?? ""; ?&gt;
              &lt;?php echo $errors['password_confirm'] ?? ""; ?&gt;
            &lt;/div&gt;

            &lt;div class="mb-4"&gt;
              &lt;label class="form-label"&gt;Confirm password &lt;strong class="text-danger"&gt;*&lt;/strong&gt;&lt;/label&gt;
              &lt;input name="password2" type="password" class="form-control &lt;?php if (isset($errors['password2'])) echo 'is-invalid'; ?&gt;" placeholder="Potvrdite ifru"&gt;
              &lt;?php echo $errors['password2'] ?? ""; ?&gt;
            &lt;/div&gt;

            &lt;div class="mb-4"&gt;
              &lt;label class="form-label"&gt;Zemlja &lt;strong class="text-danger"&gt;*&lt;/strong&gt;&lt;/label&gt;
              &lt;select class="form-select" name="country" aria-label="Default select example"&gt;
                &lt;option value="Srbija" selected&gt;Srbija&lt;/option&gt;
                &lt;option value="Other"&gt;Preostale zemlje&lt;/option&gt;
              &lt;/select&gt;
            &lt;/div&gt;

            &lt;div id="grade-div" class="mb-4"&gt;
              &lt;label class="form-label"&gt;Koji si razred? &lt;strong class="text-danger"&gt;*&lt;/strong&gt;&lt;/label&gt;
              &lt;select class="form-select" name="grade" aria-label="Default select example"&gt;
                &lt;option value="Osmi" selected&gt;Osmi&lt;/option&gt;
                &lt;option value="Sedmi"&gt;Sedmi&lt;/option&gt;
                &lt;option value="Sesti"&gt;esti&lt;/option&gt;
                &lt;option value="Peti"&gt;Peti&lt;/option&gt;
                &lt;option value="Nizi"&gt;Nii razredi osnovne kole&lt;/option&gt;
                &lt;option value="Srednja skola"&gt;Srednja kola&lt;/option&gt;
              &lt;/select&gt;
            &lt;/div&gt;

            &lt;div id="number-div" style="margin-bottom: 2rem;"&gt;
              &lt;label class="form-label"&gt;Broj telefona&lt;/label&gt;
              &lt;input name="phone_number" type="tel" , pattern="[0-9-+]*" class="form-control" placeholder="Unesite broj telefona" value="&lt;?php echo $phone_number ?? ""; ?&gt;"&gt;
              &lt;?php echo $errors['phone_number'] ?? ""; ?&gt;
            &lt;/div&gt;

            &lt;div class="mb-3 form-check"&gt;
              &lt;input type="checkbox" name="slazem_se" class="form-check-input &lt;?php if (isset($errors['slazem_se'])) echo 'is-invalid'; ?&gt;" id="exampleCheck1" &lt;?php if (isset($slazemSe) &amp;&amp; $slazemSe !== 0) echo 'checked'; ?&gt;&gt;
              &lt;label class="form-check-label" for="exampleCheck1"&gt;Slaem se sa &lt;a target="_blank" href="&lt;?php echo BASE_URL; ?&gt;uslovi-koriscenja"&gt;uslovima korisenja&lt;/a&gt; i &lt;a target="_blank" href="&lt;?php echo BASE_URL; ?&gt;politika-privatnosti"&gt;politikom privatnosti&lt;/a&gt;&lt;/label&gt;
            &lt;/div&gt;

            &lt;button name="register" type="submit" class="btn btn-primary"&gt;Register&lt;/button&gt;

            &lt;div class="line-container d-flex justify-content-between"&gt;
              &lt;div class="line"&gt;&lt;/div&gt;
              &lt;div class="ili mx-1"&gt;ili&lt;/div&gt;
              &lt;div class="line"&gt;&lt;/div&gt;
            &lt;/div&gt;

            &lt;div class="not-registered-container d-flex justify-content-between align-items-center"&gt;
              &lt;p class="mb-0 d-inline-block text-white niste-reg"&gt;Ve imate nalog?&lt;/p&gt;
              &lt;a href="&lt;?php echo BASE_URL . 'prijava'; ?&gt;"&gt;&lt;button type="button" class="btn btn-primary scale-btn-2"&gt;Prijavi se&lt;/button&gt;&lt;/a&gt;
            &lt;/div&gt;

          &lt;/form&gt;
        &lt;/div&gt;

        &lt;div class="mt-4 text-white text-center go-back"&gt;
          &lt;a href="&lt;?php echo BASE_URL; ?&gt;pocetna"&gt;
            &lt;i class="fas fa-arrow-left"&gt;&lt;/i&gt; Odustani
          &lt;/a&gt;
        &lt;/div&gt;

      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/section&gt;
&lt;!-- -------- REGISTRACIJA ---------- --&gt;

&lt;?php include 'includes/footer.php'; ?&gt;
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->


                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark important-color">
                            CRUD.php - Tatamata
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExample1" aria-expanded="false"
                                aria-controls="collapseExample1">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
&lt;?php ob_start(); ?&gt;

&lt;?php require_once './header_admin.php'; ?&gt;

&lt;?php

if (isset($_POST['delete-course'])) {
  $id = clean($_POST['course_id']);

  if (Database::getInstance()-&gt;deleteCourse($id)) {
    $_SESSION['delete_product_success_message'] = '&lt;div class="container-fluid"&gt;
    &lt;div class="row"&gt;
      &lt;div class="col-md-10 col-sm-10 offset-sm-1 offset-md-1 p-0 mt-5"&gt;
        &lt;div class="alert alert-warning alert-dismissible fade show" role="alert"&gt;
          Success! &lt;strong&gt;"' . clean($_POST['product_name']) . '"&lt;/strong&gt; successfully deleted! &lt;i class="fas fa-check"&gt;&lt;/i&gt;
          &lt;button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"&gt;&lt;/button&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;';
  }
}

if (isset($_POST['update-course'])) {
  $id_edit = clean($_POST['id_edit']);
  $name_edit = clean($_POST['name_edit']);
  $description_edit = clean($_POST['description_edit']);

  $errors = array();

  if (empty($name_edit)) {
    $errors['name_edit'] = '&lt;div class="mb-0 invalid-feedback"&gt;Please enter name.&lt;/div&gt;';
  }

  if (empty($description_edit)) {
    $errors['description_edit'] = '&lt;div class="mb-0 invalid-feedback"&gt;Please enter description.&lt;/div&gt;';
  }

  if (count($errors) == 0) {
    $data = array(
      "name_edit" =&gt; $name_edit,
      "description_edit" =&gt; $description_edit,
    );

    if (Database::getInstance()-&gt;updateCourse($data, $id_edit)) {
      $_SESSION['update_product_success_message'] = '&lt;div class="container-fluid"&gt;
      &lt;div class="row"&gt;
        &lt;div class="col-md-10 col-sm-10 offset-sm-1 offset-md-1 p-0 mt-5"&gt;
          &lt;div class="alert alert-warning alert-dismissible fade show" role="alert"&gt;
            Success! &lt;strong&gt;"' . $name_edit . '"&lt;/strong&gt; successfully updated! &lt;i class="fas fa-check"&gt;&lt;/i&gt;
            &lt;button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"&gt;&lt;/button&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;';
      $name_edit = "";
      $description_edit = "";
    }
  }
}

if (isset($_POST['add-course'])) {
  $name = clean($_POST['name']);
  $description = clean($_POST['description']);

  $errors = array();

  if (empty($name)) {
    $errors['name'] = '&lt;div class="mb-0 invalid-feedback"&gt;Please enter name.&lt;/div&gt;';
  }

  if (empty($description)) {
    $errors['description'] = '&lt;div class="mb-0 invalid-feedback"&gt;Please enter description.&lt;/div&gt;';
  }

  if (count($errors) == 0) {
    $data = array(
      "name" =&gt; $name,
      "description" =&gt; $description,
    );

    if (Database::getInstance()-&gt;addCourse($data)) {
      $_SESSION['add_product_success_message'] = '&lt;div class="container-fluid"&gt;
      &lt;div class="row"&gt;
        &lt;div class="col-md-10 col-sm-10 offset-sm-1 offset-md-1 p-0 mt-5"&gt;
          &lt;div class="alert alert-warning alert-dismissible fade show" role="alert"&gt;
            Success!&lt;strong&gt; "' . $name . '"&lt;/strong&gt; successfully added! &lt;i class="fas fa-check"&gt;&lt;/i&gt;
            &lt;button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"&gt;&lt;/button&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;';

      $name = "";
      $description = "";
    }
  }
}

$courses = Database::getInstance()-&gt;getAllCourses();
$grades = Database::getInstance()-&gt;getAllGrades();

?&gt;

&lt;!-- Button trigger modal --&gt;
&lt;button type="button" class="btn-sm btn-danger text-white" data-bs-toggle="modal" data-bs-target="#deleteCourseModal&lt;?php echo $course['id']; ?&gt;" style="border: none; background-color: transparent;"&gt;
  &lt;svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash text-danger" viewBox="0 0 16 16"&gt;
    &lt;path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z" /&gt;
    &lt;path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4L4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3h11v1h-11z" /&gt;
  &lt;/svg&gt;
&lt;/button&gt;

&lt;!-- DELETE Modal --&gt;
&lt;div class="modal fade" id="deleteCourseModal&lt;?php echo $course['id']; ?&gt;" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true"&gt;
  &lt;div class="modal-dialog"&gt;
    &lt;div class="modal-content"&gt;
      &lt;div class="modal-header"&gt;
        &lt;h5 class="modal-title text-danger" id="exampleModalLabel"&gt;Danger &lt;i class="fas fa-exclamation-circle"&gt;&lt;/i&gt;&lt;/h5&gt;
        &lt;button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"&gt;&lt;/button&gt;
      &lt;/div&gt;
      &lt;div class="modal-body"&gt;
        Are you sure that you want to delete course &lt;strong class="text-danger"&gt;"&lt;?php echo $course['name'] ?? "Error"; ?&gt;"&lt;/strong&gt; ?
      &lt;/div&gt;
      &lt;div class="modal-footer"&gt;
        &lt;form method="POST" class="d-inline"&gt;
          &lt;input type="hidden" name="course_id" value="&lt;?php echo $course['id'] ?? "-1"; ?&gt;"&gt;
          &lt;input type="hidden" name="course_name" value="&lt;?php echo $course['name'] ?? "Error"; ?&gt;"&gt;
          &lt;button name="delete-course" type="submit" class="btn btn-danger text-white"&gt;Yes&lt;/button&gt;
        &lt;/form&gt;
        &lt;button type="button" class="btn btn-secondary" data-bs-dismiss="modal"&gt;Cancel&lt;/button&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;


&lt;?php require_once './footer_admin.php'; ?&gt;
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->



                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark important-color">
                            Header - Tatamata
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleP3" aria-expanded="false"
                                aria-controls="collapseExampleP3">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
&lt;?php require_once "classes/Database.php"; ?&gt;
&lt;?php require_once "includes/config.php"; ?&gt;
&lt;?php
$currentPage = substr($_SERVER['SCRIPT_NAME'], strrpos($_SERVER['SCRIPT_NAME'], '/')); //  /prijava /registracija /index.php
// echo $currentPage;
?&gt;

&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;

&lt;head&gt;
  &lt;meta charset="UTF-8"&gt;
  &lt;?php if ($currentPage != '/kupovina-kursa.php') { ?&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
  &lt;?php } ?&gt;
  &lt;meta http-equiv="X-UA-Compatible" content="ie=edge"&gt;
  &lt;title&gt;TataMata&lt;/title&gt;
  &lt;!-- BOOTSTRAP --&gt;
  &lt;link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous"&gt;
  &lt;!-- CUSTOM CSS --&gt;
  &lt;link rel="stylesheet" href="&lt;?php echo BASE_URL . "public/css/styles.css" ?&gt;"&gt; &lt;!-- Ovde treba putanja kao da smo u index.php fajlu a ne u header.php --&gt;
  &lt;!-- FONT AWESOME --&gt;
  &lt;script src="https://kit.fontawesome.com/5c5689b7a2.js"&gt;&lt;/script&gt;
  &lt;!-- PLAYER --&gt;
  &lt;link rel="stylesheet" href="https://cdn.plyr.io/3.6.4/plyr.css"&gt;

  &lt;script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"&gt;&lt;/script&gt;
  &lt;script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js" integrity="sha384-q2kxQ16AaE6UbzuKqyBE9/u/KzioAlnx2maXQHiDX9d4/zp8Ok3f+M7DPm+Ib6IU" crossorigin="anonymous"&gt;&lt;/script&gt;
  &lt;script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.min.js" integrity="sha384-pQQkAEnwaBkjpqZ8RU1fF1AKtTcHJwFl3pblpTlHXybJjHpMYo79HY3hIi4NKxyj" crossorigin="anonymous"&gt;&lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;

  &lt;button id="scroll-to-top" style="display: none" class="btn btn-primary"&gt;&lt;i class="fas fa-angle-double-up"&gt;&lt;/i&gt;&lt;/button&gt;

  &lt;div id="body-container" class="&lt;?php if ($currentPage == '/index.php') echo "home"; ?&gt;"&gt;

    &lt;?php if ($currentPage == '/index.php') { ?&gt;
      &lt;div class="max-width-90"&gt;
      &lt;?php } ?&gt;

      &lt;?php if ($currentPage != '/prijava.php' &amp;&amp; $currentPage != '/registracija.php' &amp;&amp; $currentPage != '/zaboravljena-lozinka.php' &amp;&amp; $currentPage != '/kreiraj-novu-sifru.php') { ?&gt;
        &lt;!-- NAVBAR --&gt;
        &lt;nav class="navbar navbar-expand-lg navbar-light"&gt;
          &lt;div class="container-fluid navbar-container"&gt;
            &lt;a class="navbar-brand scale-btn-2" href="&lt;?php echo BASE_URL . "pocetna"; ?&gt;"&gt;&lt;img src="&lt;?php echo BASE_URL . 'public/images/LOGO_VEKTOR.svg' ?&gt;" alt=""&gt;&lt;/a&gt;
            &lt;div class="mobile-nav-container d-flex justify-content-between"&gt;
              &lt;a class="brand-mobile" href="&lt;?php echo BASE_URL . "pocetna"; ?&gt;"&gt;&lt;img src="&lt;?php echo BASE_URL . 'public/images/LOGO_VEKTOR.svg' ?&gt;" alt=""&gt;&lt;/a&gt;
              &lt;button class="navbar-toggler custom-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"&gt;
                &lt;span class="navbar-toggler-icon"&gt;&lt;/span&gt;
              &lt;/button&gt;
            &lt;/div&gt;
            &lt;div class="collapse navbar-collapse" id="navbarSupportedContent"&gt;

              &lt;ul class="navbar-nav left-nav ms-auto mb-2 mb-lg-0"&gt;
                &lt;?php if (Database::getInstance()-&gt;isUserLoggedIn()) { ?&gt;
                  &lt;li class="nav-item"&gt;
                    &lt;a class="nav-link me-4 moji-kursevi scale-btn-2" href="&lt;?php echo BASE_URL . "mojikursevi"; ?&gt;"&gt;MOJI KURSEVI&lt;/a&gt;
                  &lt;/li&gt;
                &lt;?php } ?&gt;
                &lt;li class="nav-item"&gt;
                  &lt;a class="nav-link active scale-btn-2" href="&lt;?php echo BASE_URL . "kursevi"; ?&gt;"&gt;KURSEVI&lt;/a&gt;
                &lt;/li&gt;
              &lt;/ul&gt;

              &lt;ul class="navbar-nav left-nav mx-auto mb-2 mb-lg-0"&gt;
                &lt;li class="nav-item"&gt;
                  &lt;a class="nav-link middle-nav ms-0" href="&lt;?php echo BASE_URL . "pocetna#o-meni"; ?&gt;"&gt;BREND&lt;/a&gt;
                &lt;/li&gt;
                &lt;li class="nav-item ms-0"&gt;
                  &lt;a class="nav-link middle-nav" href="&lt;?php echo BASE_URL . "pocetna#usluge"; ?&gt;"&gt;USLUGE&lt;/a&gt;
                &lt;/li&gt;
                &lt;li class="nav-item"&gt;
                  &lt;a class="nav-link middle-nav" href="&lt;?php echo BASE_URL . "pocetna#najcesca-pitanja"; ?&gt;"&gt;NAJEA PITANJA&lt;/a&gt;
                &lt;/li&gt;
                &lt;li class="nav-item"&gt;
                  &lt;a class="nav-link middle-nav" href="&lt;?php echo BASE_URL . "pocetna#kontakt"; ?&gt;"&gt;KONTAKT&lt;/a&gt;
                &lt;/li&gt;
              &lt;/ul&gt;

              &lt;ul class="navbar-nav mb-2 mb-lg-0"&gt;
                &lt;?php if (!Database::getInstance()-&gt;isUserLoggedIn()) { ?&gt;
                  &lt;li class="nav-item"&gt;
                    &lt;a class="nav-link prijava-nav" href="&lt;?php echo BASE_URL . "prijava"; ?&gt;"&gt;PRIJAVI SE&lt;/a&gt;
                  &lt;/li&gt;
                  &lt;li class="nav-item"&gt;
                    &lt;a class="nav-link registracija-nav scale-btn-2" href="&lt;?php echo BASE_URL . "registracija"; ?&gt;"&gt;REGISTRACIJA&lt;/a&gt;
                  &lt;/li&gt;
                &lt;?php } else { ?&gt;
                  &lt;li class="nav-item dropdown"&gt;
                    &lt;a class="nav-link logged-in-as&lt;?php if (isset($currentPage) &amp;&amp; $currentPage == '/profil.php') echo ' active'; ?&gt; dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false"&gt;
                      &lt;i class="far fa-user"&gt;&lt;/i&gt;&amp;nbsp; &lt;?php echo $_SESSION['user']['user.firstname'] . " " . $_SESSION['user']['user.lastname']; ?&gt;
                      &lt;svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-caret-down-fill rotate" viewBox="0 0 16 16"&gt;
                        &lt;path d="M7.247 11.14L2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z" /&gt;
                      &lt;/svg&gt;
                    &lt;/a&gt;
                    &lt;ul class="dropdown-menu" aria-labelledby="navbarDropdown"&gt;
                      &lt;li&gt;
                        &lt;a class="dropdown-item" href="&lt;?php echo BASE_URL . "profil"; ?&gt;"&gt;
                          &lt;div class="row"&gt;
                            &lt;div class="col"&gt;Profil&lt;/div&gt;
                            &lt;div class="col text-right" style="text-align: right;"&gt;&lt;i class="far fa-user"&gt;&lt;/i&gt;&lt;/div&gt;
                          &lt;/div&gt;
                        &lt;/a&gt;
                      &lt;/li&gt;
                      &lt;li&gt;
                        &lt;hr class="dropdown-divider"&gt;
                      &lt;/li&gt;
                      &lt;?php if ($_SESSION['user']['user.is_admin']) { ?&gt;
                        &lt;li&gt;
                          &lt;a class="dropdown-item" href="&lt;?php echo BASE_URL . "admin/overview"; ?&gt;"&gt;
                            &lt;div class="row"&gt;
                              &lt;div class="col"&gt;Admin&lt;/div&gt;
                              &lt;div class="col" style="text-align: right;"&gt;
                                &lt;i class="fas fa-crown"&gt;&lt;/i&gt;
                              &lt;/div&gt;
                            &lt;/div&gt;
                          &lt;/a&gt;
                        &lt;/li&gt;
                        &lt;li&gt;
                          &lt;hr class="dropdown-divider"&gt;
                        &lt;/li&gt;
                      &lt;?php } ?&gt;
                      &lt;li&gt;
                        &lt;a class="dropdown-item" href="&lt;?php echo BASE_URL . "odjava"; ?&gt;"&gt;
                          &lt;div class="row"&gt;
                            &lt;div class="col"&gt;Odjavi se&lt;/div&gt;
                            &lt;div class="col text-right" style="text-align: right;"&gt;
                              &lt;svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-left" viewBox="0 0 16 16"&gt;
                                &lt;path fill-rule="evenodd" d="M6 12.5a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v2a.5.5 0 0 1-1 0v-2A1.5 1.5 0 0 1 6.5 2h8A1.5 1.5 0 0 1 16 3.5v9a1.5 1.5 0 0 1-1.5 1.5h-8A1.5 1.5 0 0 1 5 12.5v-2a.5.5 0 0 1 1 0v2z" /&gt;
                                &lt;path fill-rule="evenodd" d="M.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L1.707 7.5H10.5a.5.5 0 0 1 0 1H1.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z" /&gt;
                              &lt;/svg&gt;
                            &lt;/div&gt;
                          &lt;/div&gt;
                        &lt;/a&gt;
                      &lt;/li&gt;
                    &lt;/ul&gt;
                  &lt;/li&gt;
                &lt;?php } ?&gt;
              &lt;/ul&gt;

            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/nav&gt;
        &lt;!-- NAVBAR --&gt;
      &lt;?php } ?&gt;
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->

                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark important-color">
                            Footer - Cinematic
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleP4" aria-expanded="false"
                                aria-controls="collapseExampleP4">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  &lt;br&gt;&lt;br&gt;&lt;br&gt;

  &lt;script src="https://code.jquery.com/jquery-3.4.1.min.js"&gt;&lt;/script&gt;
  &lt;script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"&gt;&lt;/script&gt;
  &lt;!-- OWL CAROUSEL --&gt;
  &lt;script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js" integrity="sha512-bPs7Ae6pVvhOSiIcyUClR7/q2OAsRiovw4vAkX+zJbw3ShAeeqezq50RIIcIURq7Oa20rW2n2q+fyXBNcU9lrw==" crossorigin="anonymous"&gt;&lt;/script&gt;
  &lt;script src="public/scripts/script.js"&gt;&lt;/script&gt;

&lt;/body&gt;
&lt;/html&gt;
          </pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->


                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark important-color">
                            Is Admin - Tatamata
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleP5" aria-expanded="false"
                                aria-controls="collapseExampleP5">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
&lt;?php require_once "../classes/Database.php"; ?&gt;
&lt;?php require_once "../includes/config.php"; ?&gt;
&lt;?php require_once "../includes/functions.php"; ?&gt;
&lt;?php

$loggedIn = Database::getInstance()-&gt;isUserLoggedIn();

if (!$loggedIn || ($loggedIn &amp;&amp; !$_SESSION['user']['user.is_admin'])) {
  $_SESSION['unauthorized_access'] = '&lt;div class="container-fluid"&gt;
    &lt;div class="row"&gt;
      &lt;div class="col-md-10 col-sm-10 offset-sm-1 offset-md-1 p-0 mt-5"&gt;
        &lt;div class="alert alert-danger alert-dismissible fade show" role="alert"&gt;
          &lt;strong&gt;Greka!&lt;/strong&gt; Zabranjen pristup! &lt;i class="fas fa-exclamation-triangle"&gt;&lt;/i&gt;
          &lt;button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"&gt;&lt;/button&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;';
  header("Location: " . BASE_URL . "pocetna");

  exit;
}
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->


                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark important-color">
                            Odjava / Logout - Tatamata
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleP5" aria-expanded="false"
                                aria-controls="collapseExampleP5">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
&lt;?php

require_once 'classes/Database.php';

if (!Database::getInstance()-&gt;isUserLoggedIn()) {
  $_SESSION['unauthorized_access'] = '&lt;div class="container-fluid"&gt;
    &lt;div class="row"&gt;
      &lt;div class="col-md-10 col-sm-10 offset-sm-1 offset-md-1 p-0 mt-5"&gt;
        &lt;div class="alert alert-danger alert-dismissible show" role="alert"&gt;
          &lt;strong&gt;Greka!&lt;/strong&gt; Zabranjen pristup! &lt;i class="fas fa-exclamation-triangle"&gt;&lt;/i&gt;
          &lt;button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"&gt;&lt;/i&gt;&lt;/button&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;';
  header("Location: pocetna");

  exit;
}

$leavingUN = $_SESSION['user']['user.firstname'] . " " . $_SESSION['user']['user.lastname'];

Database::getInstance()-&gt;logoutUser();
$_SESSION['logout_success_message'] = '&lt;div class="container-fluid"&gt;
  &lt;div class="row"&gt;
    &lt;div class="col-md-10 col-sm-10 offset-sm-1 offset-md-1 p-0 mt-5"&gt;
      &lt;div class="alert alert-warning alert-dismissible show" role="alert"&gt;
        &lt;strong&gt;Logout successful! &lt;i class="fas fa-check"&gt;&lt;/i&gt;&lt;/strong&gt; See you soon ' . $leavingUN .
      '. &lt;button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"&gt;&lt;/i&gt;&lt;/button&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;';
header("Location: prijava");

exit;              
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->

                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark important-color">
                            config.php - Tatamata
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleP5" aria-expanded="false"
                                aria-controls="collapseExampleP5">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
&lt;?php

if ($_SERVER['SERVER_NAME'] == "localhost") {
  define("BASE_URL", "https://" . $_SERVER['SERVER_NAME'] . '/hakeri_2021/');
} else {
  define("BASE_URL", "https://" . $_SERVER['SERVER_NAME'] . '/hakaton/');
}
                    </pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->


                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark important-color">
                            functions.php (clean, flashMessages, lettersOnly) - Tatamata
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleP5" aria-expanded="false"
                                aria-controls="collapseExampleP5">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
&lt;?php

&lt;?php printFormatedFlashMessage("add_product_success_message"); ?&gt;
&lt;?php printFormatedFlashMessage("delete_product_success_message"); ?&gt;
&lt;?php printFormatedFlashMessage("update_product_success_message"); ?&gt;

function clean($input) {
  $input = trim($input);
  $input = str_replace('"', "", $input);
  $input = str_replace("'", "", $input);
  $input = htmlspecialchars($input); // Mora ispod str_replace jer htmlspecialchars pretvara " u &amp;nesto; i onda ga str_replace ne nadje
  // $input = mysqli_real_escape_string(Database::getInstance()-&gt;getConnection(), $input);

  return $input;
}

function isLettersOnly($text) {
  if (preg_match('/^[a-zA-Z]+$/', $text)) {
    return true;
  }

  return false;
}

function isAdress($text) {
  if (preg_match('/^[a-zA-Z]+[0-9]+$/', $text)) {
    return true;
  }

  return false;
}

function isPhoneNumber($text) {
  if (preg_match('/^[0-9-]+$/', $text)) {
    return true;
  }

  return false;
}
// URADI VALIDACIJU VREMENA ( ([0-1][0-9] | [2][0-3]):[0-5][0-9])

function isVreme($text) {
  if (preg_match('/^([0-1][0-9]|[2][0-3]):[0-5][0-9]+$/', $text)) {
    return true;
  }

  return false;
}

function printFormatedFlashMessage($sessionName) {
  if (isset($_SESSION[$sessionName])) {
    echo $_SESSION[$sessionName];
    unset($_SESSION[$sessionName]);
  }
}

function printFlashMessage($sessionName) {
  if (isset($_SESSION[$sessionName])) {
    echo "&lt;div class='container-fluid text-uppercase success-message-custom'&gt;
            &lt;div class='row'&gt;
                &lt;div class='col-md-10 col-sm-10 offset-sm-1 offset-md-1 p-0 mt-5'&gt;
                    &lt;div class='alert alert-success alert-dismissible fade show' role='alert'&gt;
                      &lt;button type='button' class='btn-close' data-bs-dismiss='alert' aria-label='Close'&gt;&lt;/button&gt;
                      &lt;strong&gt;" . $_SESSION[$sessionName] . " &lt;i class='fas fa-check'&gt;&lt;/i&gt;&lt;/strong&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;";
    unset($_SESSION[$sessionName]);
  }
}
          </pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->

                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark important-color">
                            .htaccess - Tatamata
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleP5" aria-expanded="false"
                                aria-controls="collapseExampleP5">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
## SOURCE: http://www.developphp.com/video/Miscellaneous/Semantic-URL-htaccess-Tutorial-SEO-Friendly-and-Clean-Links

# Turn Rewrite Engine On

RewriteEngine on  

# NC makes the rule non case sensitive
# L makes this the last rule that this specific condition will match
# $ in the regular expression makes the matching stop so that "customblah" will not work

# RewriteCond %{REQUEST_FILENAME} !-f
# RewriteRule ^([^\.]+)$ $1.php [NC,L]


# RewriteRule ^(registracija|prijava|odjava|kursevi|profil)$ $1.php [NC,L]

  RewriteRule ^kupovina-kursa/([0-9]+)$ kupovina-kursa.php?id=$1 [NC,L]

  RewriteRule ^admin/user/([a-zA-Z0-9]+)$ admin/user.php?id=$1 [NC,L]
  RewriteRule ^admin/userslogs/([0-9]+)$ admin/userslogs.php?page=$1 [NC,L]
  RewriteRule ^([^\.0-9]+)$ $1.php [NC,L]
  RewriteRule pocetna index.php [NC,L]
  RewriteRule ^kurs/([0-9]+)$ kurs.php?id=$1 [NC,L]




#^((?!\/profile\/[a-zA-Z0-9]+).)*$
#^([^\.0-9]+)|^((?!\/profile\/[a-zA-Z0-9]+).)*$

# Rewrite for article.php?id=1&amp;title=Title-Goes-Here
# RewriteRule ^article/([0-9]+)/([0-9a-zA-Z_-]+)$ article.php?id=$1&amp;title=$2 [NC,L]


#RewriteCond %{HTTP_REFERER} !^http://localhost/karagaca/videos/.*$ [NC]
#RewriteCond %{HTTP_REFERER} !^http://www.localhost/karagaca/videos/.*$ [NC]
#RewriteRule .(mp4|mp3|avi)$ - [F]


## https://stackoverflow.com/a/43953920/9522864 ##

RewriteCond %{REQUEST_URI} \.(mp4|mp3|avi)$ [NC]
RewriteCond %{HTTP_REFERER} !^http://localhost/karagaca/.*$ [NC]
RewriteCond %{HTTP_REFERER} !^http://www.localhost/karagaca/.*$ [NC]
RewriteCond %{HTTP_REFERER} !^https://tatamata.rs/.*$ [NC]
RewriteCond %{HTTP_REFERER} !^https://www.tatamata.rs/.*$ [NC]
RewriteRule ^.* - [F,L]
          </pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->

                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark important-color">
                            PHPMailer - Tatamata
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleP5" aria-expanded="false"
                                aria-controls="collapseExampleP5">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
// Import PHPMailer classes into the global namespace
// These must be at the top of your script, not inside a function
use PHPMailer\PHPMailer\PHPMailer;
use PHPMailer\PHPMailer\SMTP;
use PHPMailer\PHPMailer\Exception;

// Load Composer's autoloader
require 'vendor/autoload.php';

// Instantiation and passing `true` enables exceptions
$mail = new PHPMailer(true);

try {
  //Server settings
  // $mail-&gt;SMTPDebug = SMTP::DEBUG_SERVER;                      // Enable verbose debug output
  $mail-&gt;isSMTP();                                            // Send using SMTP
  $mail-&gt;Host       = 'mail.tatamata.rs';                    // Set the SMTP server to send through
  $mail-&gt;SMTPAuth   = true;                                   // Enable SMTP authentication
  $mail-&gt;Username   = 'admin@tatamata.rs';                     // SMTP username
  $mail-&gt;Password   = 'sifra';                               // SMTP password
  $mail-&gt;SMTPSecure = PHPMailer::ENCRYPTION_STARTTLS;         // Enable TLS encryption; `PHPMailer::ENCRYPTION_SMTPS` encouraged
  $mail-&gt;Port       = 25;                                    // TCP port to connect to, use 465 for `PHPMailer::ENCRYPTION_SMTPS` above

  //Recipients
  $mail-&gt;setFrom('admin@tatamata.rs', 'Admin Tatamata');
  // $mail-&gt;addAddress('joe@example.net', 'Joe User');     // Add a recipient
  $mail-&gt;addAddress('dragoslav.gagi8@gmail.com');               // Name is optional
  $mail-&gt;addAddress('admin@tatamata.rs');               // Name is optional
  // $mail-&gt;addReplyTo('admin@tatamata.rs', 'Information');

  // Attachments
  // $mail-&gt;addAttachment('/var/tmp/file.tar.gz');         // Add attachments
  // $mail-&gt;addAttachment('/tmp/image.jpg', 'new.jpg');    // Optional name

  // Content
  $mail-&gt;isHTML(true);                                  // Set email format to HTML
  $mail-&gt;Subject = 'Korisnik je kupio kurs';
  $mail-&gt;Body    = 'Korisnik &lt;strong&gt;"' . $_SESSION['user']['user.firstname'] . " " . $_SESSION['user']['user.lastname'] . "\"&lt;/strong&gt; je kupio kurs &lt;strong&gt;\"" . $course['name'] . "\"&lt;/strong&gt; i potvrdio uplatu. &lt;br&gt;&lt;br&gt; Broj telefona: " . $_SESSION['user']['user.phone_number'] . "&lt;br&gt;Email: " . $_SESSION['user']['user.email'];

  $mail-&gt;send();
  // echo 'Message has been sent';
} catch (Exception $e) {
  echo "Message could not be sent. Mailer Error: {$mail-&gt;ErrorInfo}";
}
          </pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->

                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark important-color">
                            Upload Single File - Tatamata
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleP5" aria-expanded="false"
                                aria-controls="collapseExampleP5">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
&lt;?php

FORA KOD UPLOADOVANJA FAJLOVA JE TA STO JE ON UPLOADOVAN NA TEMP LOKACIJI I ONDA NAKON SVIH PROVERA MORAMO DA POMERIMO FAJL SA TEMP LOKACIJE I TEMP IMENOM 
NA PRAVU LOKACIJU I SA PRAVIM IMENOM. PRAVU LOKACIJU MORAMO PREKO __DIR__ ILI NECEGA SLICNOG, NE MOZE PREKO HTTP://URL/PUBLIC....

&lt;form enctype="multipart/form-data" method="POST"&gt;
&lt;input type="file" name="file"&gt;

if (!empty($_FILES['file']['name'])) { // Da li je poslao neke fajlove
  $file = $_FILES['file'];

  $file_name = $file['name'];
  $file_tmp = $file['tmp_name'];
  $file_size = $file['size'];
  $file_error = $file['error'];

  $file_ext = explode('.', $file_name);
  $file_ext = strtolower(end($file_ext));

  $file_name_new = $file_name;
  $file_destination = dirname(__FILE__, 2) . '/videos/' . $file_name_new;

  $uploadOk = 1;

  // Check if $uploadOk is set to 0 by an error
  if ($uploadOk == 0) {
    echo "Sorry, your file was not uploaded.";
    // if everything is ok, try to upload file
  } else {
    if (move_uploaded_file($file_tmp, $file_destination)) {
      echo "The file " . htmlspecialchars(basename($_FILES["upload"]["name"])) . " has been uploaded.";
    } else {
      echo "Sorry, there was an error uploading your file.";
    }
  }
}           
                    </pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->

                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark important-color">
                            Upload Multiple Files - Tatamata
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleP5" aria-expanded="false"
                                aria-controls="collapseExampleP5">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
&lt;?php

if (!isset($_POST['contact'])) {
  exit;
}

&lt;form enctype="multipart/form-data" action="contact-form-logic.php" method="POST" onsubmit="return validateForm()"&gt;
&lt;input id="contact-files" class="form-control" type="file" multiple name="files[]"&gt;

if (!empty($_FILES['files']['name'][0])) { // Da li je poslao neke fajlove
  $files = $_FILES['files'];

  $uploaded = array();
  $failed = array();

  $allowed = ['pdf', 'jpg', 'jpeg', 'png', 'jfif'];

  foreach ($files['name'] as $position =&gt; $file_name) {
    $file_tmp = $files['tmp_name'][$position];
    $file_size = $files['size'][$position];
    $file_error = $files['error'][$position];

    $file_ext = explode('.', $file_name);
    $file_ext = strtolower(end($file_ext));

    if (in_array($file_ext, $allowed)) {
      if ($file_error === 0) {

        if ($file_size &lt;= 5242880) {
          $file_name_new = $file_name;
          $file_destination = 'uploads/' . $file_name_new;

          if (move_uploaded_file($file_tmp, $file_destination)) {
            $uploaded[$position] = $file_destination;          
          } else {
            $failed[$position] = "[{$file_name}] failed upload";
          }
        } else {
          $failed[$position] = "[{$file_name}] is too large";
        }
      } else {
        $failed[$position] = "[{$file_name}] failed to upload";
      }
    } else {
      $failed[$position] = "[{$file_name}] file extension '{$file_ext}' is not allowed";
    }
  }

  if (!empty($uploaded)) {
    try {
      array_map('unlink', glob('uploads/*')); // Deletes all uploads
      $_SESSION['contact_form_success'] = '&lt;div class="alert alert-warning alert-dismissible show mt-5" role="alert"&gt;
        Poruka uspeno poslata.&lt;button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"&gt;&lt;/i&gt;&lt;/button&gt;
      &lt;/div&gt;';
      header("Location: " . BASE_URL . "pocetna");

      exit;
    } catch (Exception $e) {
      echo "Message could not be sent. Mailer Error: {$mail-&gt;ErrorInfo}";
    }
  }

  if (!empty($failed)) {
    print_r($failed);
  }
} else { // Nije poslao fajlove

}              
                    </pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->

                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark important-color">
                            Google Captcha - Hakaton 2021
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleP5" aria-expanded="false"
                                aria-controls="collapseExampleP5">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
https://www.google.com/recaptcha/admin/

if (isset($_POST['ponudismestaj'])) {
  $errors = array();

  // Call the function post_captcha
  $res = post_captcha($_POST['g-recaptcha-response']);

  if (!$res['success']) {
    // What happens when the CAPTCHA wasn't checked
    $errors['captcha'] = '&lt;div class="mb-2 text-danger font-weight-bold"&gt;Molimo potvrdite da niste robot.&lt;/div&gt;';
  } else {
    $ime = clean($_POST['ime'] ?? null);
    $prezime = clean($_POST['prezime'] ?? null);
    ......................
  }
}

function post_captcha($user_response) {
  $fields_string = '';
  $fields = array(
    'secret' =&gt; 'private-key',
    'response' =&gt; $user_response
  );
  foreach ($fields as $key =&gt; $value)
    $fields_string .= $key . '=' . $value . '&amp;';
  $fields_string = rtrim($fields_string, '&amp;');

  $ch = curl_init();
  curl_setopt($ch, CURLOPT_URL, 'https://www.google.com/recaptcha/api/siteverify');
  curl_setopt($ch, CURLOPT_POST, count($fields));
  curl_setopt($ch, CURLOPT_POSTFIELDS, $fields_string);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, True);

  $result = curl_exec($ch);
  curl_close($ch);

  return json_decode($result, true);
}

&lt;script src="https://www.google.com/recaptcha/api.js"&gt;&lt;/script&gt; ovo ide u head tag

&lt;div class="g-recaptcha" data-sitekey="public-key"&gt;&lt;/div&gt; ovo ide pre submit dugmeta


                    </pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->



                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Header Already Sent Information - E-commerce 2020.
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExample2" aria-expanded="false"
                                aria-controls="collapseExample2">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  ob_start();
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->

                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Session Already Exists - Cinematic
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  if (session_status() == PHP_SESSION_NONE) {
    session_start();
  }
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->


                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Database Class - Cinematic
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExample4" aria-expanded="false"
                                aria-controls="collapseExample4">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
&lt;?php 

  if (session_status() == PHP_SESSION_NONE) {
      session_start();
  }

  class Database{
      private $host = "localhost"; // Host
      private $db_name = "cinematic"; // DB Name
      private $username = "root"; // DB Username
      private $password = ""; // DB Password

      private static $instance = null; // Instanca klase
      public $connection = null; // Konekcija
  
      private function __construct(){    
          $this->connection = mysqli_connect($this->host, $this->username, $this->password, $this->db_name);
      }

      public function getConnection(){
          return $this->connection;
      }
      
      public static function getInstance(){
          if(!isset(self::$instance)){
              self::$instance = new Database();
          }

          return self::$instance;
      }   
  }
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->





                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Film / Knjiga Class - Cinematic, Neda
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleP1" aria-expanded="false"
                                aria-controls="collapseExampleP1">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  require_once 'Database.php';

  class Film{

      public function dodaj($props){
          $props = (object) $props;
          // print_r($props);
          $query = "INSERT INTO Film (naziv, anr, trailer, trajanje, glumci, direktor, kontent, godina, slika, dan, vreme, uskoro) VALUES ('$props->nazivFilma2', '$props->zanr2', '$props->trailer2', '$props->trajanje2', '$props->glumci2', '$props->reziser2', '$props->sadrzaj2', '$props->godina2', '$props->slika2', '$props->dan2', '$props->vreme2', '$props->uskoro2')";
          $result = mysqli_query(Database::getInstance()->getConnection(), $query) or die(mysqli_error(Database::getInstance()->getConnection()));

          // print_r($query);
          
          if($result){
              return true;
          }

          return false;
      }

      public static function uzmiSve(){
          $query = "SELECT * FROM Film";
          $result = mysqli_query(Database::getInstance()->getConnection(), $query);
          $filmovi = mysqli_fetch_all($result, MYSQLI_ASSOC);
          
          return $filmovi;
      }

      public static function vratiPoID($filmID){
          $query = "SELECT * FROM Film WHERE id = $filmID";
          $result = mysqli_query(Database::getInstance()->getConnection(), $query);
          $film = $result->fetch_assoc();
          
          return $film;
      }

      public static function izbrisi($filmID){
          $query = "DELETE FROM Film WHERE id = $filmID LIMIT 1";
          $result = mysqli_query(Database::getInstance()->getConnection(), $query);

          return $result;
      }

      public static function izmeni($props, $filmID){
          $props = (object) $props;
          $query = "UPDATE Film SET naziv = '$props->nazivFilma', anr = '$props->zanr', trailer = '$props->trailer', trajanje = '$props->trajanje', glumci = '$props->glumci', direktor = '$props->reziser', kontent = '$props->sadrzaj', godina = '$props->godina', slika = '$props->slika', vreme = '$props->vreme', dan = '$props->dan', uskoro = '$props->uskoro' WHERE id = $filmID LIMIT 1";
          $result = mysqli_query(Database::getInstance()->getConnection(), $query) or die(mysqli_error(Database::getInstance()->getConnection()));

          return $result;
      }

      public static function pripadaKorisniku($knjigaID, $korisnikID){
        $query = "SELECT korisnik_id FROM Knjiga WHERE id = $knjigaID";
        $result = mysqli_query(Database::getInstance()->getConnection(), $query);
        $red = mysqli_fetch_array($result);      

        if($red['korisnik_id'] == $korisnikID){
            return true;
        }

        return false;
    }

    public static function sortirajPoCeni(){
        $query = "SELECT * FROM Knjiga ORDER BY cena";
        $result = mysqli_query(Database::getInstance()->getConnection(), $query);
        $knjige = mysqli_fetch_all($result, MYSQLI_ASSOC);
        
        return $knjige;
    }

    public static function sortirajPoNazivu(){
        $query = "SELECT * FROM Knjiga ORDER BY naslov";
        $result = mysqli_query(Database::getInstance()->getConnection(), $query);
        $knjige = mysqli_fetch_all($result, MYSQLI_ASSOC);
        
        return $knjige;
    }

    public static function trazi($tekst){
        $query = "SELECT * FROM Knjiga WHERE naslov LIKE '%" . $tekst . "%'";
        $result = mysqli_query(Database::getInstance()->getConnection(), $query);
        $knjige = mysqli_fetch_all($result, MYSQLI_ASSOC);

        return $knjige;
    }

    public static function nadjiKorisnika($korisnikID){
      $query = "SELECT nadimak FROM Korisnik WHERE id = $korisnikID";
      $result = mysqli_query(Database::getInstance()->getConnection(), $query);
      $korisnik = mysqli_fetch_array($result);      

      return $korisnik['nadimak'];
    }

  }
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->

                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Korisnik Class - Cinematic
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleP2" aria-expanded="false"
                                aria-controls="collapseExampleP2">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  require_once 'Database.php'; // Pozivanje fajla gde je Database

  class Korisnik{

      public static function registruj($ime, $email, $password, $isAdmin){
          $password = md5(md5($password)); // Hashovanje sifre sa md5
          $query = "INSERT INTO Korisnik (ime, email, password, is_admin) VALUES ('$ime', '$email', '$password', '$isAdmin')";
          $result = mysqli_query(Database::getInstance()->getConnection(), $query);
          
          if($result){ // Ukoliko je query uspesan pravimo sesiju i vracamo true
              self::napraviSession(mysqli_insert_id(Database::getInstance()->getConnection()), $ime, $email, $isAdmin);

              return true;
          }

          return false;
      }

      public static function zauzetEmail($email){
          $query = "SELECT email FROM Korisnik WHERE email = '$email'";
          $result = mysqli_query(Database::getInstance()->getConnection(), $query);
          $korisnik = mysqli_fetch_array($result);

          if($korisnik){
              return true;
          }

          return false;
      }

      public static function zauzetoIme($ime){
          $query = "SELECT ime FROM Korisnik WHERE ime = '$ime'";
          $result = mysqli_query(Database::getInstance()->getConnection(), $query);
          $korisnik = mysqli_fetch_array($result);

          if($korisnik){
              return true;
          }

          return false;
      }

      public static function prijavi($email, $password){
          $password = md5(md5($password));
          $query = "SELECT id, ime, email, is_admin FROM Korisnik WHERE email = '$email' AND password = '$password'";
          $result = mysqli_query(Database::getInstance()->getConnection(), $query);

          $korisnik = mysqli_fetch_array($result);

          if($korisnik){
              self::napraviSession($korisnik['id'], $korisnik['ime'], $korisnik['email'], $korisnik['is_admin']);

              return true;
          }

          return false;
      }

      public static function napraviSession($id, $ime, $email, $isAdmin){
          $_SESSION['korisnik'] = [
              'id' => $id,
              'ime' => $ime,
              'email' => $email,
              'isAdmin' => $isAdmin,
          ];
      }

      public static function odjavi(){
          // Gasimo i unistavamo sesiju nakon logout
          session_unset();
          session_destroy();
      }

      public static function ulogovan(){
          // Ako je sesija aktivna znaci da je korisnik ulogovan i dalje.
          if(isset($_SESSION['korisnik'])){
              return true;
          }

          return false;
      }

  }
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->



                    </div>






                </div>
                <!-- ---------- PHP ---------- -->




                <!-- ---------- NODEJS ---------- -->
                <div id="nodejs" class="mb-5">
                    <h1 class="collapse-btn-G collapsed mb-5" type="button" data-toggle="collapse"
                        data-target="#nodejs-collapse" aria-expanded="false" aria-controls="nodejs-collapse">
                        <u>NODEJS</u>
                        <span class="collapse-arrow">&#8250;</span>
                    </h1>

                    <div class="collapse" id="nodejs-collapse">


                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Nodemon - DFD.
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleJS1" aria-expanded="false"
                                aria-controls="collapseExampleJS1">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  npm i nodemon --save

  "scripts": {
    "server": "nodemon app.js"
  },

  npm run server
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->




                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Database Config - DFD.
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleJS1" aria-expanded="false"
                                aria-controls="collapseExampleJS1">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  /* ********** DB CONFIG ********** */

  module.exports = {
    database: 'mongodb://admin:admin123@ds135068.mlab.com:35068/dfd',
    secret: 'dfd'
  }
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->





                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Passport Config - DFD.
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleJS1" aria-expanded="false"
                                aria-controls="collapseExampleJS1">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  const LocalStrategy = require('passport-local').Strategy;
  const UserModel = require('../models/user.model');
  const config = require('../config/database');
  const bcrypt = require('bcryptjs');
  
  module.exports = (passport) => {
    // Local Strategy
  
    passport.use(new LocalStrategy((username, password, done) => {
      // Match Username
  
      let query = {
        username: username
      };
  
      UserModel.findOne(query, (error, user) => {
        if(error){
          throw error;
        }
  
        if(!user){
          return done(null, false, {
            message: 'No User Found'
          });
        }
  
        // Match Password
  
        bcrypt.compare(password, user.password, (error, isMatch) => {
          if(error){
            throw error;
          }
  
          if(isMatch){
            return done(null, user);
          }else{
            return done(null, false, {
              message: 'Wrong Password'
            });
          }
        })
      });
  
    }));
  
    passport.serializeUser((user, done) => {
      done(null, user.id);
    });
  
    passport.deserializeUser((id, done) => {
      UserModel.findById(id, (error, user) => {
        done(error, user);
      });
    });
  }
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->




                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Comment Controller (async, await) - DFD.
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleJS1" aria-expanded="false"
                                aria-controls="collapseExampleJS1">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  /* ********** MODELS ********** */

  const CommentModel = require('../models/comment.model');
  const UserModel = require('../models/user.model');
  const MovieModel = require('../models/movie.model');
  
  /* ********** OPERATIONS ********** */
  
      /* ********** CREATE ********** */
  
          exports.create = (req, res, next) => {
  
            // Create Comment Object
  
            let comment = new CommentModel({
              body: req.body.commentBody,
              author: req.user._id,
              movie: req.body.movieID
            });
  
            // Save Comment
  
            comment.save(async (error) => {
              if(!error){
  
                // Push Comment To Movie / User Comments Array | Relationships
  
                await UserModel.findById(comment.author, (error, user) => {
                  if(error)
                    return next(error);
              
                  user.comments.push(comment._id);
                  user.save();    
                });
  
                await MovieModel.findById(comment.movie, (error, movie) => {
                  if(error)
                    return next(error);
              
                  movie.comments.push(comment._id);
                  movie.save();    
                });
  
                req.flash('createdComment', 'Comment Successfully Sent.')
                res.redirect('/movie/' + req.body.movieID);
              }else{
                  return next(error);
              }
            });
          };
  
      /* ********** UPDATE ********** */
  
          exports.update = (req, res, next) => {
            CommentModel.findByIdAndUpdate(req.params.id, {
              body: req.body.commentBodyEdit
            }, (error, comment) => {
              if(error)
                return next(error);
              
              req.flash('updatedComment', 'Comment Successfully Updated.')
              res.redirect('/movie/' + req.body.movieID);
            });
          };
  
      /* ********** DELETE ********** */
  
          exports.delete = (req, res, next) => {
            CommentModel.findByIdAndRemove(req.params.id, (error, comment) => {
              if(error){
                return next(error);
              }
  
              // Remove Comment From Movie / User Comments Array
  
              UserModel.findById(comment.author, (error, user) => {
                if(error)
                  return next(error);
            
                  // const index = user.comments.indexOf(req.params.id);
                  // if (index > -1) {
                  //   user.comments.splice(index, 1);
                  // }
  
                user.comments.pull({_id: req.params.id});
                user.save();
              });
  
              MovieModel.findById(comment.movie, (error, movie) => {
                if(error)
                  return next(error);
            
                  // const index = movie.comments.indexOf(req.params.id);
                  // if (index > -1) {
                  //   movie.comments.splice(index, 1);
                  // }
  
  
                  movie.comments.pull({_id: req.params.id});
                  movie.save();  
              });
  
              req.flash('deletedComment', 'Comment Successfully Deleted.')
              res.redirect('/movie/' + req.body.movieID);
            });
          };
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->










                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Like Controller - DFD.
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleJS1" aria-expanded="false"
                                aria-controls="collapseExampleJS1">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  /* ********** MODELS ********** */

  const MovieModel = require('../models/movie.model');
  const UserModel = require('../models/user.model');
  const CommentModel = require('../models/comment.model');
  const LikeModel = require('../models/like.model');
  
  /* ********** OPERATIONS ********** */
  
      /* ********** CREATE ********** */
  
          exports.create = (req, res, next) => {
              let movieName; // We Need This Name When We Redirect
  
              // Create Like Object
  
              let like = new LikeModel({
                  author: req.user._id,
                  movie: req.params.id
                });
  
                // Save Like
              
                like.save(async (error) => {
                  if(!error){
  
                  // Push Like To Movie / User Likes Array | Relationships
              
                  await UserModel.findById(like.author, (error, user) => {
                      if(error)
                        return next(error);
                  
                      user.likes.push(like._id);
                      user.save();    
                    });
              
                    await MovieModel.findById(like.movie, (error, movie) => {
                      if(error)
                        return next(error);
                  
                      movieName = movie.name;
                      movie.likes.push(like._id);
                      movie.save();    
                    });
              
                    req.flash('createdLike', 'Movie "' + movieName + '" Liked.');
                    res.redirect('/movie/' + req.params.id);
                  }else{
                      return next(error);
                  }
                });
          };
  
      /* ********** DELETE ********** */
  
          exports.delete = (req, res, next) => {
            let movieName; // For Redirect
  
            LikeModel.findByIdAndRemove(req.params.likeid, async (error, like) => {
              if(error){
                return next(error);
              }
  
              // Remove Like From Movie / User Likes Array | Relationships
  
              await UserModel.findById(like.author, (error, user) => {
                if(error)
                  return next(error);
            
                  // const index = user.movies.indexOf(req.params.id);
                  // if (index > -1) {
                  //   user.movies.splice(index, 1);
                  // }
  
                user.likes.pull({_id: req.params.likeid});
                user.save(); 
              });
  
              await MovieModel.findById(like.movie, (error, movie) => {
                if(error)
                  return next(error);
            
                  // const index = user.movies.indexOf(req.params.id);
                  // if (index > -1) {
                  //   user.movies.splice(index, 1);
                  // }
  
                movieName = movie.name;
                movie.likes.pull({_id: req.params.likeid});
                movie.save(); 
              });
  
              req.flash('deletedLike', 'Movie "' + movieName + '" Unliked.');
              res.redirect('/movie/' + req.params.id);
            });
          };
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->













                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            User Controller Populate Chain - DFD.
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleJS1" aria-expanded="false"
                                aria-controls="collapseExampleJS1">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  /* ********** MODELS ********** */

  const UserModel = require('../models/user.model');
  const bcrypt = require('bcryptjs');
  const passport = require('passport');
  
  /* ********** OPERATIONS ********** */
  
      /* ********** REGISTER ********** */
  
          exports.registerView = (req, res) => {
            res.render('user/registerORlogin' ,{
              title: 'Register Here',
              layout: 'main',
              registering: true
            });
          };
  
          exports.register = (req, res, next) => {
            let confirmPasswordError = false;
            let isValid = false;
            let beforeHash;
  
            // Create User Object
  
            let user = new UserModel({
              username: req.body.username,
              email: req.body.email,
              password: req.body.password
            });
  
            beforeHash = user.password;
  
            user.validate((error) => {
              if(beforeHash !== req.body.confirmPassword){
                confirmPasswordError = true;
              }
  
              if(!error && !confirmPasswordError){
                isValid = true;
              }else{
                if((error && error.name == 'ValidationError') || confirmPasswordError){
                  handleValidationErrors(error, req.body, confirmPasswordError);
                }else
                  console.log("Error: " + error);
              }
  
              // Hash
  
              bcrypt.genSalt(10, (error, salt) => {
                bcrypt.hash(user.password, salt, (error, hash) => {
                  if(error){
                    console.log("Error: " + error);
            
                    return next(error);
                  }
            
                  user.password = hash;
                  
                  if(isValid){
                    user.save();
                
                    req.flash('userRegistered', 'Welcome To DFD "' + req.body.username + '" You Can Now Login.');
                    res.redirect('/');
                  }else{
                    res.render("user/registerORlogin", {
                      title: 'Register Here',
                      layout: 'main',
                      user: req.body,
                      registering: true
                    });
                  }
                });
              });
            });
  
          };
  
      /* ********** LOGIN ********** */
  
          exports.loginView = (req, res) => {
            res.render('user/registerORlogin' ,{
              title: 'Login Here',
              layout: 'main',
              registering: false,
              message: req.flash('error'),
              notLoggedIn: req.flash('notLoggedIn')
            });
          };
  
          exports.login = (req, res, next) => {
            passport.authenticate('local', {
              successRedirect: '/',
              failureRedirect: '/login',
              failureFlash: true,
              successFlash: true,
            })(req, res, next);
  
            req.flash('success', 'Welcome Back "' + req.body.username + '".');
          };
  
      /* ********** LOGOUT ********** */
  
          exports.logout = (req, res, next) => {
            if(!req.isAuthenticated()){
              req.flash('notLoggedIn', "Please Login.");
              res.redirect('/login');
  
              return(next);
            }
  
            req.flash('userLoggedOut', 'See Ya Later "' + req.user.username + '".');
            req.logout();
            res.redirect('/');
          };
  
      /* ********** PROFILE ********** */
  
          exports.profileView = (req, res, next) => {
            UserModel.findById(req.params.id, (error, user) => {
              if(error){
                return next(error);
              }
  
              res.render('user/profile', {
                // title: 'Update Movie "' + movie.name + '".',
                layout: 'main',
                user: user,
              });
            }).populate('movies').populate('comments').populate({
              path: 'likes',
              populate:{
                path: 'movie',
                model: 'MovieModel',
              }
            });
          };
  
  /* ********** METHODS ********** */
  
      function handleValidationErrors(error, body, confirmPasswordError){
        if(error){
          for(field in error.errors){
            switch(error.errors[field].path){
              case 'username':
                body['usernameError'] = error.errors[field].message;
                break;
              case 'email':
                body['emailError'] = error.errors[field].message;
                break;
              case 'password':
                body['passwordError'] = error.errors[field].message;
                break;
            }
          }
        }
  
        if(confirmPasswordError){
          body['confirmPasswordError'] = 'Passwords Do Not Match.';
        }
      }
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->












                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Movie Controller - DFD.
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleJS1" aria-expanded="false"
                                aria-controls="collapseExampleJS1">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  /* ********** MODELS ********** */

  const MovieModel = require('../models/movie.model');
  const UserModel = require('../models/user.model');
  const CommentModel = require('../models/comment.model');
  const LikeModel = require('../models/like.model');
  
  /* ********** OPERATIONS ********** */
  
      /* ********** GET ALL ********** */
  
          exports.getAll = function (req, res) {
            MovieModel.find((error, movies) => {
              if(error){
                console.log('Error | getAllMovies.' + error);
              }else{
  
                let dates = new Array();
                let options = { year: 'numeric', month: 'long', day: 'numeric' };
  
                movies.forEach((movie) => {
                  let date = movie.created_at;
                  date = date.toLocaleDateString("en-US", options);
                  dates.push(date);
                });
  
                res.render('index' , {
                  layout: 'main',
                  createdMovie: req.flash('createdMovie'),
                  deletedMovie: req.flash('deletedMovie'),
                  userRegistered: req.flash('userRegistered'),
                  userLoggedOut: req.flash('userLoggedOut'),
                  alreadyLoggedIn: req.flash('alreadyLoggedIn'),
                  message: req.flash('error'),
                  success: req.flash('success'),
                  movies: movies,
                  dates: dates
                });
              }
            }).populate('author');
          };
  
      /* ********** CREATE ********** */
  
          exports.createView = (req, res) => {
            res.render('movie/createORupdate' ,{
              title: 'Suggest New Movie',
              layout: 'main'
            });
          };
  
          exports.create = (req, res, next) => {
  
            // Create Movie Object
  
            let movie = new MovieModel({
              name: req.body.name,
              description: req.body.description,
              image: req.body.image,
              author: req.user._id
            });
  
            // Save Movie
  
            movie.save((error) => {
              if(!error){
  
                // Push Movie User Movies Array | Relationships
  
                UserModel.findById(movie.author, (error, user) => {
                  if(error)
                    return next(error);
              
                  user.movies.push(movie._id);
                  user.save();    
                });
  
                req.flash('createdMovie', 'Movie "' + req.body.name + '" Successfully Suggested.')
                res.redirect('/');
              }else{
                if(error.name == 'ValidationError'){
                  handleValidationErrors(error, req.body);
                  res.render("movie/createORupdate", {
                    title: "Suggest New Movie",
                    movie: req.body,
                    userLel: req.user
                  });
                }
                else
                  console.log("Error: " + error);
              }
            });
          };
  
      /* ********** READ ********** */
  
          exports.read = (req, res, next) => {
  
            // console.log("\n\n\n\n\n******************************")
            // console.log("USAO U READ")
            // console.log("******************************")
  
            let correctUser = false;
            let alreadyLiked = false;
            let likeID;
  
            // Find Movie 
  
            MovieModel.findById(req.params.id, (error, movie) => {
  
              // console.log("******************************")
              // console.log("MOVIE FIND")
              // console.log(movie);
              // console.log("******************************")
  
              if(!movie)
                return next(); // Failed To Cast Ako Nema Slike
  
              if(error){
                return next(error);
              }
  
              // Find User For That Movie 
  
              UserModel.findById(movie.author, (error, user) => {
  
                // console.log("******************************")
                // console.log("USER FIND")
                // console.log(user);
                // console.log("******************************")
                
                if(error)
                  return next(error);
  
                // console.log("REQ: " + req.user);
                // console.log("U: " + user);
  
                // Check If User Is Author So He Can Edit And Delete Movie
                
                if(req.user && user && String(req.user._id) == String(user._id)){
                  correctUser = true
                }
  
                // Check To See If User Already Liked The Movie 
  
                if(req.user){
                  movie.likes.forEach((like) => {
  
                    req.user.likes.forEach((userLike) => {
                      if(String(like) == String(userLike)){
                        alreadyLiked = true;
                        likeID = like;
                      }
                    });    
            
                  });
                }
  
                let options = { year: 'numeric', month: 'long', day: 'numeric' };
                let date = movie.created_at;
                date = date.toLocaleDateString("en-US", options);
  
                res.render('movie/read' , {
                  layout: 'main',
                  movie: movie,
                  date: date,
                  updatedMovie: req.flash('updatedMovie'),
                  notAuthorized: req.flash('notAuthorized'),
                  createdComment: req.flash('createdComment'),
                  updatedComment: req.flash('updatedComment'),
                  deletedComment: req.flash('deletedComment'),
                  createdLike: req.flash('createdLike'),
                  deletedLike: req.flash('deletedLike'),
                  user: user,
                  correctUser: correctUser,
                  alreadyLiked: alreadyLiked,
                  likeID: likeID,
                });
              });
  
            }).populate({
              path: 'comments',
              populate:{
                path: 'author',
                model: 'UserModel',
                populate: {
                  path: 'likes',
                  model: 'LikeModel'
                }
              }
            });
          };
  
          // SAME AS ABOVE, ONLY ONE DIFFERENCE, OPTIMIZE THIS !!!!!!!!!!!! TODO 
  
          exports.readComment = (req, res, next) => {
            let correctUser = false;
            let alreadyLiked = false;
            let likeID;
            let commentID = req.params.commentID;
            
            MovieModel.findById(req.params.id, (error, movie) => {
  
              if(error){
                return next(error);
              }
  
              UserModel.findById(movie.author, (error, user) => {
                if(error)
                  return next(error);
  
  
                // console.log("REQ: " + req.user);
                // console.log("U: " + user);
                
                if(req.user && user && String(req.user._id) == String(user._id)){
                  correctUser = true
                }
  
                if(req.user){
                  movie.likes.forEach((like) => {
  
                    req.user.likes.forEach((userLike) => {
                      if(String(like) == String(userLike)){
                        alreadyLiked = true;
                        likeID = like;
                      }
                    });    
            
                  });
                }
  
                let options = { year: 'numeric', month: 'long', day: 'numeric' };
                let date = movie.created_at;
                date = date.toLocaleDateString("en-US", options)
  
                res.render('movie/read' , {
                  layout: 'main',
                  movie: movie,
                  date: date,
                  updatedMovie: req.flash('updatedMovie'),
                  notAuthorized: req.flash('notAuthorized'),
                  createdComment: req.flash('createdComment'),
                  updatedComment: req.flash('updatedComment'),
                  deletedComment: req.flash('deletedComment'),
                  createdLike: req.flash('createdLike'),
                  deletedLike: req.flash('deletedLike'),
                  user: user,
                  correctUser: correctUser,
                  alreadyLiked: alreadyLiked,
                  likeID: likeID,
                  commentID: commentID,
                });
              });
  
            }).populate({
              path: 'comments',
              populate:{
                path: 'author',
                model: 'UserModel',
                populate: {
                  path: 'likes',
                  model: 'LikeModel'
                }
              }
            });
          };
  
      /* ********** UPDATE ********** */
  
          exports.updateView = (req, res, next) => {
            MovieModel.findById(req.params.id, (error, movie) => {
              if(error){
                return next(error);
              }
  
              // console.log("\n\n\nMOVIE: " + movie.author + ".");
              // console.log("AUTHOR: " + req.user._id + ".\n\n\n\n");
  
              let omg1 = String (movie.author);
              let omg2 = String(req.user._id);
  
              if(omg1 == omg2){
                // console.log("DSADSADAS");
              }
  
              if(omg1 != omg2){
                req.flash('notAuthorized', 'Not Authorized.');
                res.redirect('/movie/' + movie._id);
              }else{
                res.render('movie/createORupdate', {
                  title: 'Update Movie "' + movie.name + '".',
                  layout: 'main',
                  movie: movie,
                  updating: true,
                });
              }
            });
          };
  
          exports.update = (req, res, next) => {
            MovieModel.findByIdAndUpdate(req.params.id, {
              $set: req.body
            }, (error, movie) => {
              if(error)
                return next(error);
              
              req.flash('updatedMovie', 'Movie "' + req.body.name + '" Successfully Updated.')
              res.redirect('/movie/' + req.params.id);
            });
          };
  
          // exports.update = (req, res) => {
          //   MovieModel.findOneAndUpdate({
          //     _id: req.body._id,
          //   }, req.body, {
          //       new: true,
          //       runValidators: true
          //   }, (error, movie) => {
  
          //     console.log(movie);
          //     if(!error){
          //       req.flash('updatedMovie', 'Movie "' + req.body.name + '" Successfully Updated.')
          //       res.redirect('/movie/' + req.params.id);
          //     }else{
          //       if(error.name == "ValidationError"){
          //         handleValidationErrors(error, req.body);
          //         res.render("movie/createORupdate", {
          //           title: 'Update Movie "' + req.body.name + '".',
          //           movie: movie,
          //           updating: true
          //         });
          //       }else{
          //         console.log("Error: " + error);
          //       }
          //     }
          //   });
          // };
  
      /* ********** DELETE ********** */
  
          exports.delete = (req, res, next) => {
            MovieModel.findByIdAndRemove(req.params.id, (error, movie) => {
              if(error){
                return next(error);
              }
  
              LikeModel.find((error, likes) => {
                likes.forEach((like) => {
                  if(String(like.movie) == String(req.params.id)){
  
                    // Pre Brisanja Likea Moramo Iz User Likes Arraya Da Izbrisemo Like
  
                    UserModel.findById(like.author, (error, user) => {
                      if(error)
                        return next(error);
                        
                        user.likes.pull({_id: like._id});
                        user.save(); 
                    });
  
                    like.remove();
                  }
                })
              });
  
  
              // Moram Izbrisati Iz User Movies Ovaj Movie I Sve Komentare Vezane Za Taj Film Kao i Kad Brisem Komentare Onda I Iz Usera Moram Komentare || Ovo mora da moze lakse
  
              UserModel.findById(movie.author, (error, user) => {
                if(error)
                  return next(error);
            
                  // const index = user.movies.indexOf(req.params.id);
                  // if (index > -1) {
                  //   user.movies.splice(index, 1);
                  // }
  
                user.movies.pull({_id: req.params.id});
                user.save(); 
              });
  
              CommentModel.find((error, comments) => {
                comments.forEach((comment) => {
                  if(String(comment.movie) == String(req.params.id)){
                    
                    // Pre Brisanja Komentara Moramo Iz User Comments Arraya Da Izbrisemo Comment
  
                    UserModel.findById(comment.author, (error, user) => {
                      if(error)
                        return next(error);
                  
                        // const index = user.comments.indexOf(comment._id);
                        // if (index > -1) {
                        //   user.comments.splice(index, 1);
                        // }
                      
                        
                        user.comments.pull({_id: comment._id});
                        user.save(); 
                    });
  
                    comment.remove();
                  }
                });
              });
  
              req.flash('deletedMovie', 'Movie "' + movie.name + '" Successfully Deleted.')
              res.redirect('/');
            });
          };
  
  /* ********** METHODS ********** */
  
      function handleValidationErrors(error, body){
        for(field in error.errors){
          switch(error.errors[field].path){
            case 'name':
              body['nameError'] = error.errors[field].message;
              break;
            case 'description':
              body['descriptionError'] = error.errors[field].message;
              break;
          }
        }
      }
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->












                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Comment Model - DFD.
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleJS1" aria-expanded="false"
                                aria-controls="collapseExampleJS1">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  const mongoose = require('mongoose');
  const Schema = mongoose.Schema;
  
  let commentSchema = new Schema({
      body: {
        type: String,
      },
      author: {
          type: mongoose.Schema.Types.ObjectId,
          ref: 'UserModel'
      },
      movie: { 
          type: mongoose.Schema.Types.ObjectId,
          ref: 'MovieModel'
      },
      created_at: {
        type: Date,
        default: Date.now
      },
  });
  
  // Export the model
  module.exports = mongoose.model('CommentModel', commentSchema);
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->






                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Movie Model - DFD.
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleJS1" aria-expanded="false"
                                aria-controls="collapseExampleJS1">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  const mongoose = require('mongoose');
  const Schema = mongoose.Schema;
  
  let movieSchema = new Schema({
      name: {
        type: String,
        minlength: [2, 'Name Should Be At Least 2 Characters Long'],
        maxlength: [30, "Name Can't Be Longer Than 30 Characters"],
        required: [true, "Name Field Is Required"]
      },
      description: {
        type: String,
        minlength: [30, 'Description Should Be At Least 30 Characters Long'],
        maxlength: [500, "Description Can't Be Longer Than 30 Characters"],
        required: [true, "Description Field Is Required"]
      },
      image: { // TODO
        type: String
      },
      created_at: {
        type: Date,
        default: Date.now
      },
      author: {
        type: mongoose.Schema.Types.ObjectId,
        ref: 'UserModel'
      },
      comments: [{
        type: mongoose.Schema.Types.ObjectId,
        ref: 'CommentModel'
      }],
      likes: [{
        type: mongoose.Schema.Types.ObjectId,
        ref: 'LikeModel'
      }]
  });
  
  // Export the model
  module.exports = mongoose.model('MovieModel', movieSchema);
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->







                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Database Config - DFD.
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleJS1" aria-expanded="false"
                                aria-controls="collapseExampleJS1">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  const mongoose = require('mongoose');
  const Schema = mongoose.Schema;
  
  let userSchema = new Schema({
      username: {
        type: String,
        minlength: [2, 'Username Should Be At Least 2 Characters Long'],
        maxlength: [30, "Username Can't Be Longer Than 30 Characters"],
        required: [true, "Username Field Is Required"],
      },
      email: {
        type: String,
        required: [true, "Email Field Is Required"],
        // validate: [validateEmail, 'Please fill a valid email address'],
        match: [/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/, 'Please Enter a Valid Email']
      },
      password: {
        type: String,
        required: [true, "Password Field Is Required"]
      },
      created_at: {
        type: Date,
        default: Date.now
      },
      movies: [{
        type: mongoose.Schema.Types.ObjectId,
        ref: 'MovieModel'
      }],
      comments: [{
        type: mongoose.Schema.Types.ObjectId,
        ref: 'CommentModel'
      }],
      likes: [{
        type: mongoose.Schema.Types.ObjectId,
        ref: 'LikeModel'
      }]
  });
  
  // let validateEmail = (email) => {
  //   var re = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;
  
  //   return re.test(email)
  // };
  
  // Export the model
  module.exports = mongoose.model('UserModel', userSchema);
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->






                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            User Model - DFD.
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleJS1" aria-expanded="false"
                                aria-controls="collapseExampleJS1">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  const mongoose = require('mongoose');
  const Schema = mongoose.Schema;
  
  let userSchema = new Schema({
      username: {
        type: String,
        minlength: [2, 'Username Should Be At Least 2 Characters Long'],
        maxlength: [30, "Username Can't Be Longer Than 30 Characters"],
        required: [true, "Username Field Is Required"],
      },
      email: {
        type: String,
        required: [true, "Email Field Is Required"],
        // validate: [validateEmail, 'Please fill a valid email address'],
        match: [/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/, 'Please Enter a Valid Email']
      },
      password: {
        type: String,
        required: [true, "Password Field Is Required"]
      },
      created_at: {
        type: Date,
        default: Date.now
      },
      movies: [{
        type: mongoose.Schema.Types.ObjectId,
        ref: 'MovieModel'
      }],
      comments: [{
        type: mongoose.Schema.Types.ObjectId,
        ref: 'CommentModel'
      }],
      likes: [{
        type: mongoose.Schema.Types.ObjectId,
        ref: 'LikeModel'
      }]
  });
  
  // let validateEmail = (email) => {
  //   var re = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;
  
  //   return re.test(email)
  // };
  
  // Export the model
  module.exports = mongoose.model('UserModel', userSchema);
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->














                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            User Routes - DFD.
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleJS1" aria-expanded="false"
                                aria-controls="collapseExampleJS1">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  const express = require('express');
  const router = express.Router();
  
  // Require The Controllers
  
  const userController = require('../controllers/user.controller');
  
  // Routes
  
  router.get('/register', ifLoggedIn, userController.registerView);
  router.post('/register', ifLoggedIn, userController.register);
  
  router.get('/login', ifLoggedIn, userController.loginView);
  router.post('/login', ifLoggedIn, userController.login);
  
  router.get('/logout', userController.logout);
  
  router.get('/users/:id', userController.profileView);
  
  // Access Control
  
  function ifLoggedIn(req, res, next){
    if(req.isAuthenticated()){
      req.flash('alreadyLoggedIn', "Please Logout Before Doing That.");
      res.redirect('/');
    }else{
      return next();
    }
  }
  
  // Export Router
  
  module.exports = router;
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->














                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Movie Routes - DFD.
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleJS1" aria-expanded="false"
                                aria-controls="collapseExampleJS1">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  const express = require('express');
  const router = express.Router();
  
  // Require The Controllers
  
  const movieController = require('../controllers/movie.controller');
  
  // Routes
  
  router.get('/', movieController.getAll);
  router.get('/movie/create', ensureAuthenticated, movieController.createView);
  router.post('/movie/create', ensureAuthenticated, movieController.create);
  router.get('/movie/:id', movieController.read);
  router.get('/movie/:id/comment/:commentID', movieController.readComment);
  router.get('/movie/update/:id', ensureAuthenticated, movieController.updateView);
  router.post('/movie/update/:id', ensureAuthenticated, movieController.update);
  router.post('/movie/delete/:id', ensureAuthenticated, movieController.delete);
  
  // Access Control
  
  function ensureAuthenticated(req, res, next){
    if(req.isAuthenticated()){
      return next();
    }else{
      req.flash('notLoggedIn', "Please Login.");
      res.redirect('/login');
    }
  }
  
  // Export Router
  
  module.exports = router;
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->














                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            HELP (Flash Messages, Handlebars Nesting) - DFD.
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleJS1" aria-expanded="false"
                                aria-controls="collapseExampleJS1">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  https://gist.github.com/brianmacarthur/a4e3e0093d368aa8e423



  res.render('index' , {
    layout: 'main',
    createdMovie: req.flash('createdMovie'),
    deletedMovie: req.flash('deletedMovie'),
    userRegistered: req.flash('userRegistered'),
    userLoggedOut: req.flash('userLoggedOut'),
    context: {
      users: users,
      movies: movies
    },
    // movies: movies,
    message: req.flash('error'),
    success: req.flash('success'),
    // users: users
  });


  {{#context}}
    {{#this.movies}}    
      {{#../this.users}}
        {{this._id}}
        {{../this.author}}
          {{#ifEquals this._id ../this.author}}
            ZASTO NE ULAZI U OVAJ IF
          {{/ifEquals}}
      {{/../this.users}}
    {{/this.movies}}
  {{/context}}
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->




                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            APP JS - DFD.
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleJS1" aria-expanded="false"
                                aria-controls="collapseExampleJS1">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  /* ********** DEPENDENCIES ********** */

  const express = require('express');
  const mongoose = require('mongoose');
  const bodyParser = require('body-parser');
  const path = require('path');
  const expressHandlebars = require('express-handlebars');
  const session = require('express-session');
  const flash = require('req-flash');
  const cookieParser = require('cookie-parser');
  const passport = require('passport');
  const config = require('./config/database');
  
  
  /* ********** INITIALIZE EXPRESS APP ********** */
  
  const app = express();
  
  /* ********** IMPORT ROUTES ********** */
  
  const movieRoutes = require('./routes/movie.route');
  const userRoutes = require('./routes/user.route');
  const commentRoutes = require('./routes/comment.route');
  const likeRoutes = require('./routes/like.route');
  
  
  /* ********** MONGOOSE ********** */
  
  let dev_db_url = config.database;
  const mongoDB = process.env.MONGODB_URI || dev_db_url;
  mongoose.connect(mongoDB, {
    useNewUrlParser: true,
    useUnifiedTopology: true
  });
  mongoose.Promise = global.Promise;
  const db = mongoose.connection;
  db.on('error', console.error.bind(console, '\n\n *** MongoDB connection error:'));
  
  /* ********** APP USE ********** */
  
  app.use(bodyParser.json());
  app.use(bodyParser.urlencoded({extended: false}));
  app.use(cookieParser());
  app.use(session({
    secret: 'yourMOM',
    resave: true,
    saveUninitialized: true
  }));
  app.use(flash());
  // app.use(express.static(__dirname + '/public/'));
  app.use('*/images', express.static(path.join(__dirname, 'public/images')));
  app.use('*/js', express.static(path.join(__dirname, 'public/js')));
  app.use('*/css', express.static(path.join(__dirname, 'public/css')));
  
  /* ********** APP SET ********** */
  
  app.set('views', path.join(__dirname, '/views/'));
  app.engine('.hbs', expressHandlebars({
    extname: '.hbs',
    // defaultLayout: 'mainLayout',
    layoutsDir: __dirname + '/views/layouts',
    helpers: {
      ifEqualsString: (arg1, arg2, options) => {
        return (String(arg1) == String(arg2)) ? options.fn(this) : options.inverse(this);
      }
    }
  }));
  app.set('view engine', '.hbs');
  // app.set('views', path.join(__dirname, 'views'));
  
  /* ********** PASSPORT ********** */
  
  require('./config/passport')(passport);
  app.use(passport.initialize());
  app.use(passport.session());
  
  app.get('*', (req, res, next) => {
    res.locals.loggedInUser = req.user || null;
    next();
  });
  
  app.use("/", movieRoutes);
  app.use('/', userRoutes);
  app.use('/', commentRoutes);
  app.use('/', likeRoutes);
  
  /* ********** SERVER START ********** */
  
  let portNumber = process.env.PORT || 3000;
  
  app.listen(portNumber, () => {
      console.log("*** Server is running on port: " + portNumber);
  });
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->







                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Index View - DFD.
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleJS1" aria-expanded="false"
                                aria-controls="collapseExampleJS1">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  {{#if message}}
  &lt;div class="container-fluid mt-5"&gt;
    &lt;div class="alert alert-success"&gt;{{message}}&lt;/div&gt;
  &lt;/div&gt;
{{/if}}


{{#if alreadyLoggedIn}}
  &lt;div class="container-fluid mt-5"&gt;
    &lt;div class="alert alert-danger"&gt;{{alreadyLoggedIn}}&lt;/div&gt;
  &lt;/div&gt;
{{/if}}

&lt;div class="container-fluid container-max-width mt-5"&gt;
  &lt;div class="row" id="row-for-movie-cards"&gt;

    {{#each movies}}

        &lt;div class="col-md-8 offset-md-2 offset-sm-1 col-sm-10 card mb-3 mt-3"&gt;
          &lt;div class="card-border"&gt;
            &lt;a href="/movie/{{this._id}}" class="card-header-link"&gt;
              &lt;h3 class="card-header"&gt;{{this.name}}&lt;/h3&gt;
            &lt;/a&gt;
            &lt;div class="card-body"&gt;
              {{!-- &lt;h5 class="card-title"&gt;Special title treatment&lt;/h5&gt; --}}
              {{!-- &lt;h6 class="card-subtitle text-muted"&gt;Support card subtitle&lt;/h6&gt; --}}
            &lt;/div&gt;
            &lt;a href="/movie/{{this._id}}"&gt;
              &lt;img style="height: 500px; width: 100%; display: block;" src="{{this.image}}" alt="Card image"&gt;
            &lt;/a&gt;
            &lt;div class="card-body"&gt;
              &lt;p class="card-text"&gt;{{this.description}}&lt;/p&gt;
              &lt;i class="far fa-user"&gt;&lt;/i&gt; Suggested By: &lt;a href="/users/{{this.author._id}}"&gt;{{this.author.username}}&lt;/a&gt; 
              &lt;br&gt;&lt;i class="far fa-comments"&gt;&lt;/i&gt; Comments: {{this.comments.length}}
              &lt;br&gt;&lt;i class="far fa-heart"&gt;&lt;/i&gt; Likes: {{this.likes.length}}
            &lt;/div&gt;
            &lt;div class="card-footer dateDIVClass text-muted" id="dateDIV{{this._id}}" style="margin-top: .5rem;"&gt;
              {{this.created_at}}
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;

    {{/each}}

  &lt;/div&gt;
&lt;/div&gt;
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->







                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Profile View - DFD.
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleJS1" aria-expanded="false"
                                aria-controls="collapseExampleJS1">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>


  &lt;div class="row"&gt;
    &lt;div class="col-md-8 offset-md-2" id="body-container"&gt;

      User Profile For: {{user.username}} &lt;hr&gt;

      {{#if user.movies}}

        Movies That "{{user.username}}" Suggested: &lt;br&gt;

        {{#each user.movies}}
          &lt;a href="/movie/{{this._id}}" style="text-decoration: none;"&gt;&amp;nbsp; &amp;nbsp; &amp;bull; &amp;nbsp;{{this.name}}&lt;/a&gt;&lt;br&gt;
        {{/each}}
      
      {{/if}}

      {{#if user.comments}}

        &lt;br&gt;Comments By "{{user.username}}": &lt;br&gt;

        {{#each user.comments}}
          &lt;a href="/movie/{{this.movie}}/comment/{{this._id}}" style="text-decoration: none;"&gt;&amp;nbsp; &amp;nbsp; &amp;bull; &amp;nbsp;{{this.body}}&lt;/a&gt;&lt;br&gt;
        {{/each}}
      
      {{/if}}

      {{#if user.likes}}

        &lt;br&gt;Movies That "{{user.username}}" Liked: &lt;br&gt;

        {{#each user.likes}}
          &lt;a href="/movie/{{this.movie._id}}" style="text-decoration: none;"&gt;&amp;nbsp; &amp;nbsp; &amp;bull; &amp;nbsp;{{this.movie.name}}&lt;/a&gt;&lt;br&gt;
        {{/each}}
      
      {{/if}}
    &lt;/div&gt; 
  &lt;/div&gt;
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->






                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Register / Login View - DFD.
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleJS1" aria-expanded="false"
                                aria-controls="collapseExampleJS1">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  &lt;div class="row"&gt;
    &lt;div class="col-md-8 offset-md-2" id="body-container"&gt;

      {{#if message}}
          &lt;div class="alert alert-danger"&gt;{{message}}&lt;/div&gt;
      {{/if}}  

      {{#if notLoggedIn}}
        &lt;div class="alert alert-danger"&gt;{{notLoggedIn}}&lt;/div&gt;
      {{/if}}

      &lt;h3&gt;{{title}}&lt;/h3&gt;

      {{#if registering}}
        &lt;form action="/register" method="POST"&gt;
      {{else}}
        &lt;form action="/login" method="POST"&gt;
      {{/if}}
      {{!-- &lt;input type="hidden" name="_id"&gt; --}}
        &lt;fieldset&gt;
          &lt;div class="form-group"&gt;
            &lt;label for="usernameID"&gt;Username&lt;/label&gt;
            &lt;input type="text"  name="username" class="form-control {{#if user.usernameError}}is-invalid{{/if}}" value="{{user.username}}" id="usernameID" placeholder="Enter Username"&gt;
            &lt;div class="text-danger"&gt;
              {{user.usernameError}}
              {{user.usernameTaken}}
            &lt;/div&gt;
          &lt;/div&gt;
          {{#if registering}}
            &lt;div class="form-group"&gt;
              &lt;label for="emailID"&gt;Email&lt;/label&gt;
              &lt;input type="email"  name="email" class="form-control {{#if user.emailError}}is-invalid{{/if}}" value="{{user.email}}" id="emailID" placeholder="Enter Email"&gt;
              &lt;div class="text-danger"&gt;
                {{user.emailError}}
                {{user.emailTaken}}
              &lt;/div&gt;
            &lt;/div&gt;
          {{/if}}
          &lt;div class="form-group"&gt;
            &lt;label for="passwordID"&gt;Password&lt;/label&gt;
            &lt;input type="password"  name="password" class="form-control {{#if user.passwordError}}is-invalid{{/if}}" id="passwordID" placeholder="Enter Password"&gt;
            &lt;div class="text-danger"&gt;
              {{user.passwordError}}
            &lt;/div&gt;
          &lt;/div&gt;
          {{#if registering}}
            &lt;div class="form-group"&gt;
              &lt;label for="confirm-passwordID"&gt;Confirm Password&lt;/label&gt;
              &lt;input type="password"  name="confirmPassword" class="form-control {{#if user.confirmPasswordError}}is-invalid{{/if}}" id="confirm-passwordID" placeholder="Confirm Password"&gt;
              &lt;div class="text-danger"&gt;
              {{user.confirmPasswordError}}
            &lt;/div&gt;
            &lt;/div&gt;
          {{/if}}
          &lt;button type="submit" class="btn btn-primary"&gt;Submit&lt;/button&gt;
        &lt;/fieldset&gt;
      &lt;/form&gt;
      
    &lt;/div&gt; 
  &lt;/div&gt;
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->





                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Read Movie - DFD.
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleJS1" aria-expanded="false"
                                aria-controls="collapseExampleJS1">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  {{!-- {{log commentID}} --}}

  &lt;div class="container-fluid container-max-width mt-5"&gt;
    &lt;div class="row" id="row-for-movie-cards"&gt;
  
        &lt;div class="col-md-8 col-sm-6 offset-md-2 offset-sm-6 card mb-3 mt-3"&gt;
          {{#if updatedMovie}}
            &lt;div class="alert alert-success mb-5"&gt;{{updatedMovie}}&lt;/div&gt;
          {{/if}}
  
          {{#if createdComment}}
            &lt;div class="alert alert-success mb-5"&gt;{{createdComment}}&lt;/div&gt;
          {{/if}}
  
          {{#if updatedComment}}
            &lt;div class="alert alert-success mb-5"&gt;{{updatedComment}}&lt;/div&gt;
          {{/if}}
  
          {{#if deletedComment}}
            &lt;div class="alert alert-success mb-5"&gt;{{deletedComment}}&lt;/div&gt;
          {{/if}}
  
          {{#if createdLike}}
            &lt;div class="alert alert-success mb-5"&gt;{{createdLike}}&lt;/div&gt;
          {{/if}}
  
          {{#if deletedLike}}
            &lt;div class="alert alert-success mb-5"&gt;{{deletedLike}}&lt;/div&gt;
          {{/if}}
  
          &lt;div class="card-border"&gt;
  
            {{#if notAuthorized}}
                &lt;div class="alert alert-danger mt-3"&gt;{{notAuthorized}}&lt;/div&gt;
            {{/if}}
  
            &lt;h3 class="card-header"&gt;{{movie.name}}&lt;/h3&gt;
            &lt;div class="card-body"&gt;
              {{!-- &lt;h5 class="card-title"&gt;Special title treatment&lt;/h5&gt; --}}
              {{!-- &lt;h6 class="card-subtitle text-muted"&gt;Support card subtitle&lt;/h6&gt; --}}
            &lt;/div&gt;
            &lt;img style="height: 500px; width: 100%; display: block;" src="{{movie.image}}" alt="Card image"&gt;
            &lt;div class="card-body"&gt;
              &lt;p class="card-text"&gt;{{movie.description}}&lt;/p&gt;
              &lt;br&gt;&lt;i class="far fa-user"&gt;&lt;/i&gt; Suggested By:  &lt;a href="/users/{{user._id}}"&gt;{{user.username}}&lt;/a&gt; 
              &lt;br&gt;&lt;i class="far fa-comments"&gt;&lt;/i&gt; Comments: {{movie.comments.length}}
              &lt;br&gt;&lt;i class="far fa-heart"&gt;&lt;/i&gt; Likes: {{movie.likes.length}}
              &lt;br&gt;&lt;br&gt;
  
              {{#if loggedInUser}}
                {{#if correctUser}}
                    &lt;a href="/movie/update/{{movie._id}}" class="card-link btn btn-warning"&gt;&lt;i class="far fa-edit"&gt;&lt;/i&gt; Edit&lt;/a&gt;
                    &lt;button data-toggle="modal" data-target="#deleteModal" class="card-link btn btn-danger mr-4"&gt;&lt;i class="far fa-trash-alt"&gt;&lt;/i&gt; Delete&lt;/button&gt;
                {{/if}}
              {{/if}}
  
              {{!-- Ako Nije Ulogovan Izbaci Mu Modal --}}
  
              {{#unless loggedInUser}}
                &lt;button data-toggle="modal" data-target="#likeModal" class="card-link btn btn-outline-danger" style="display: block;"&gt;&lt;i class="fa fa-heart"&gt;&lt;/i&gt; Like&lt;/button&gt;
              {{/unless}}
  
              {{#if loggedInUser}}
  
                {{#if alreadyLiked}}
                  &lt;form action="/movie/{{movie._id}}/likes/delete/{{likeID}}" method="POST" style="display: inline-block;"&gt;
                    &lt;button type="submit" class="card-link btn btn-danger"&gt;&lt;i class="fa fa-heart"&gt;&lt;/i&gt; Liked&lt;/button&gt;
                  &lt;/form&gt;
                {{else}}
                  &lt;form action="/movie/{{movie._id}}/likes/create" method="POST" style="display: inline-block;"&gt;
                    &lt;button type="submit" class="card-link btn btn-outline-danger"&gt;&lt;i class="fa fa-heart"&gt;&lt;/i&gt; Like&lt;/button&gt;
                  &lt;/form&gt;
                {{/if}}
  
              {{/if}}
            &lt;/div&gt;
  
            &lt;div class="card-footer text-muted" id="dateID"&gt;
              &lt;strong&gt;Created At: &lt;/strong&gt; {{date}}
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
  
    &lt;/div&gt;
  &lt;/div&gt; 
  
  &lt;div class="modal" id="deleteModal"&gt;
    &lt;div class="modal-dialog" role="document"&gt;
      &lt;div class="modal-content"&gt;
        &lt;div class="modal-header"&gt;
          &lt;h5 class="modal-title"&gt;Are You Sure That You Want To Delete Movie &lt;strong&gt;"{{movie.name}}"&lt;/strong&gt;&lt;/h5&gt;
          &lt;button type="button" class="close" data-dismiss="modal" aria-label="Close"&gt;
            &lt;span aria-hidden="true"&gt;&amp;times;&lt;/span&gt;
          &lt;/button&gt;
        &lt;/div&gt;
        &lt;div class="modal-footer"&gt;
          &lt;form action="/movie/delete/{{movie._id}}" method="POST"&gt;
            &lt;button type="submit" class="card-link btn btn-danger"&gt;Yes&lt;/button&gt;
          &lt;/form&gt; 
          &lt;button type="button" class="btn btn-secondary" data-dismiss="modal"&gt;No&lt;/button&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
  
  &lt;div class="modal" id="likeModal"&gt;
    &lt;div class="modal-dialog" role="document"&gt;
      &lt;div class="modal-content"&gt;
        &lt;div class="modal-header"&gt;
          &lt;h5 class="modal-title"&gt;You Need To Login To Be Able To Like Movies&lt;/strong&gt;&lt;/h5&gt;
          &lt;button type="button" class="close" data-dismiss="modal" aria-label="Close"&gt;
            &lt;span aria-hidden="true"&gt;&amp;times;&lt;/span&gt;
          &lt;/button&gt;
        &lt;/div&gt;
        &lt;div class="modal-footer"&gt;
          &lt;a href="/login"&gt;&lt;button type="submit" class="card-link btn btn-primary"&gt;Login&lt;/button&gt;&lt;/a&gt;
          &lt;a href="/register"&gt;&lt;button type="button" class="btn btn-outline-primary"&gt;Register&lt;/button&gt;&lt;/a&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
  
  
  &lt;div class="container"&gt;
    &lt;h2 class="text-center"&gt;COMMENTS&lt;/h2&gt;
  
    {{#each movie.comments}}
    
      &lt;div class="card" id="{{this._id}}"&gt;
          &lt;div class="card-body"&gt;
              &lt;div class="row"&gt;
                  &lt;div class="col-md-2"&gt;
                      &lt;img src="https://image.ibb.co/jw55Ex/def_face.jpg" class="img img-rounded img-fluid"/&gt;
                      &lt;p class="text-secondary text-center"&gt;15 Minutes Ago&lt;/p&gt;
                  &lt;/div&gt;
                  &lt;div class="col-md-10"&gt;
                      &lt;p style="margin-bottom: 2rem;"&gt;
                          &lt;a class="float-left" href="/users/{{this.author._id}}" style="text-decoration: none;"&gt;&lt;i class="far fa-user"&gt;&lt;/i&gt; &lt;strong&gt;{{this.author.username}}&lt;/strong&gt;&lt;/a&gt;
                          &lt;hr&gt;
                    &lt;/p&gt;
                    &lt;div class="clearfix"&gt;&lt;/div&gt;
                      &lt;p&gt;{{this.body}}&lt;/p&gt;
                      &lt;p&gt;
                        {{#if ../loggedInUser}}
                          {{#ifEqualsString ../loggedInUser._id this.author._id}}
                          &lt;a class="float-right btn text-white btn-danger btn-sm" data-target="#deleteCommentModal{{../this._id}}" data-toggle="modal"&gt;&lt;i class="far fa-trash-alt"&gt;&lt;/i&gt; Delete&lt;/a&gt;
                          &lt;a class="float-right btn text-white btn-warning btn-sm mr-2" name="{{../this._id}}" role="button" data-toggle="collapse" href="#collapseEdit{{../this._id}}" aria-expanded="false" aria-controls="collapse{{../this._id}}"&gt;&lt;i class="far fa-edit"&gt;&lt;/i&gt; Edit&lt;/a&gt; 
                          {{/ifEqualsString}}
                        {{/if}}
                        {{!-- &lt;a class="float-right btn text-white btn-danger btn-sm mr-2"&gt;&lt;i class="fa fa-heart"&gt;&lt;/i&gt; Like&lt;/a&gt; --}}
                    &lt;/p&gt;
                  &lt;/div&gt;
              &lt;/div&gt;
          &lt;/div&gt;
      &lt;/div&gt;
  
      {{#if ../loggedInUser}}
  
      &lt;!--Edit comment form--&gt;
        &lt;div class="collapse custom-collapse-class" id="collapseEdit{{this._id}}"&gt;
          &lt;div class="well well-edit"&gt;
            &lt;h4&gt;Edit your comment &lt;i class="fas fa-pencil-alt"&gt;&lt;/i&gt;&lt;/h4&gt;
            &lt;form id="edit-comment-form{{this._id}}" name="{{this._id}}" action="/comments/update/{{this._id}}" method="POST" onsubmit="return validateEditCommentForm(this);"&gt;
              &lt;div class="form-group"&gt;
                &lt;input class="form-control" type="text" disabled value="User: {{this.author.username}}"&gt;
              &lt;/div&gt;
              &lt;div class="form-group"&gt;
                &lt;div class="error-input" id="missing-edit-comment-error{{this._id}}"&gt;&lt;/div&gt;
                &lt;textarea class="form-control" id="commentBodyEditID{{this._id}}" name="commentBodyEdit" placeholder="Your comment text..." form="edit-comment-form{{this._id}}" rows="5" cols="70"&gt;{{this.body}}&lt;/textarea&gt;
              &lt;/div&gt;
              &lt;input type="hidden" name="movieID" value="{{movie._id}}"&gt;
              &lt;div class="form-group"&gt;
                &lt;button type="submit" class="btn btn-warning" style="width: 100%;"&gt;Edit comment &lt;i class="far fa-comment"&gt;&lt;/i&gt;&lt;/button&gt;
              &lt;/div&gt;
            &lt;/form&gt;
          &lt;/div&gt;
        &lt;/div&gt;
  
        &lt;!-- Modal to delete comment --&gt;
        &lt;div class="modal fade" id="deleteCommentModal{{this._id}}"&gt;
          &lt;div class="modal-dialog" role="document"&gt;
            &lt;div class="modal-content"&gt;
              &lt;div class="modal-header"&gt;
                &lt;h5 class="modal-title"&gt;Are You Sure That You Want To Delete Comment &lt;strong&gt;"{{this.body}}"&lt;/strong&gt;&lt;/h5&gt;
                &lt;button type="button" class="close" data-dismiss="modal" aria-label="Close"&gt;
                  &lt;span aria-hidden="true"&gt;&amp;times;&lt;/span&gt;
                &lt;/button&gt;
              &lt;/div&gt;
              &lt;div class="modal-footer"&gt;
                &lt;form action="/comments/delete/{{this._id}}" method="POST"&gt;
                  &lt;input type="hidden" name="movieID" value="{{movie._id}}"&gt;
                  &lt;button type="submit" class="card-link btn btn-danger"&gt;Yes&lt;/button&gt;
                &lt;/form&gt; 
                &lt;button type="button" class="btn btn-secondary" data-dismiss="modal"&gt;No&lt;/button&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
  
      {{/if}}
  
    {{/each}}
  
    &lt;div class="container" style="text-align: center;"&gt;
      &lt;a class="btn btn-success pull-right" id="add-new-comment-btn" role="button" data-toggle="collapse" href="#collapseComment" aria-expanded="false" aria-controls="collapseComment"&gt;
        &lt;i class="fas fa-plus"&gt;&lt;/i&gt; Add new comment
      &lt;/a&gt;
    &lt;/div&gt;
  
  &lt;!--Collapse Add a comment form START--&gt;
    &lt;div class="collapse custom-collapse-class" id="collapseComment"&gt;
      &lt;div class="well"&gt;
        {{#unless loggedInUser}}
          &lt;!--If the user is not logged in, direct him to the login page--&gt;
          &lt;h5 style="text-align: center;"&gt;You need to login before you can comment. &lt;a href="/login"&gt;Click here&lt;/a&gt; to go to the login page.&lt;/h5&gt;
        {{/unless}}
        {{#if loggedInUser}}
          &lt;!--If the user is logged in, show the new comment form--&gt;
          &lt;h4&gt;Write your comment &lt;i class="fas fa-pencil-alt"&gt;&lt;/i&gt;&lt;/h4&gt;
          &lt;form action="/comments/create" id="add-new-comment-form" onsubmit="return validateNewCommentForm();" method="POST"&gt;
            &lt;div class="form-group"&gt;
              &lt;input class="form-control" type="text" disabled value="User: {{loggedInUser.username}}"&gt;
            &lt;/div&gt;
            &lt;div class="form-group"&gt;
              &lt;div class="error-input" id="missing-comment-error"&gt;&lt;/div&gt;
              &lt;textarea class="form-control" name="commentBody" id="commentBodyID" placeholder="Write your comment..." rows="5" cols="70"&gt;&lt;/textarea&gt;
            &lt;/div&gt;
            &lt;input type="hidden" name="movieID" value="{{movie._id}}"&gt;
            &lt;div class="form-group"&gt;
              &lt;button type="submit" class="btn btn-success" style="width: 100%;"&gt;Submit &lt;i class="far fa-comment"&gt;&lt;/i&gt;&lt;/button&gt;
            &lt;/div&gt;
          &lt;/form&gt;
        {{/if}}
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;!--Collapse Add a comment form END--&gt;
  &lt;/div&gt;
  
  &lt;br&gt;&lt;br&gt;&lt;br&gt;
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->

                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Main Layout - DFD.
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleJS1" aria-expanded="false"
                                aria-controls="collapseExampleJS1">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  &lt;!DOCTYPE html&gt;
  &lt;html lang="en"&gt;
  &lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;meta http-equiv="X-UA-Compatible" content="ie=edge"&gt;
    &lt;title&gt;DFD Movies&lt;/title&gt;
    &lt;link rel="stylesheet" href="https://bootswatch.com/4/sketchy/bootstrap.min.css"&gt;
    &lt;script src="https://kit.fontawesome.com/5c5689b7a2.js"&gt;&lt;/script&gt;
    &lt;link rel="stylesheet" href="css/styles.css"&gt;
  &lt;/head&gt;
  &lt;body&gt;
    
  &lt;nav class="navbar navbar-expand-lg navbar-dark bg-primary"&gt;
    &lt;a class="navbar-brand" href="/"&gt;DFD Movies&lt;/a&gt;
    &lt;button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor01" aria-controls="navbarColor01" aria-expanded="false" aria-label="Toggle navigation"&gt;
      &lt;span class="navbar-toggler-icon"&gt;&lt;/span&gt;
    &lt;/button&gt;
  
    &lt;div class="collapse navbar-collapse" id="navbarColor01"&gt;
      &lt;ul class="navbar-nav mr-auto"&gt;
        {{#if userLel}}
          &lt;li class="nav-item"&gt;
            &lt;a class="nav-link" href="/movie/create"&gt;Suggest New&lt;/a&gt;
          &lt;/li&gt;
          &lt;li class="nav-item"&gt;
            &lt;a class="nav-link" href="/users/{{userLel._id}}"&gt;Logged In As "{{userLel.username}}"&lt;/a&gt;
          &lt;/li&gt;
          &lt;li class="nav-item"&gt;
            &lt;a class="nav-link" href="/logout"&gt;Logout&lt;/a&gt;
          &lt;/li&gt;
        {{/if}}  
        {{#if loggedInUser}}
        &lt;li class="nav-item"&gt;
          &lt;a class="nav-link" href="/movie/create"&gt;Suggest New&lt;/a&gt;
        &lt;/li&gt;
          &lt;li class="nav-item"&gt;
            &lt;a class="nav-link" href="/users/{{loggedInUser._id}}"&gt;Logged In As "{{loggedInUser.username}}"&lt;/a&gt;
          &lt;/li&gt;
          &lt;li class="nav-item"&gt;
            &lt;a class="nav-link" href="/logout"&gt;Logout&lt;/a&gt;
          &lt;/li&gt;
        {{else}}
          {{#unless userLel}}
            &lt;li class="nav-item"&gt;
              &lt;a class="nav-link" href="/login"&gt;Login&lt;/a&gt;
            &lt;/li&gt;
            &lt;li class="nav-item"&gt;
              &lt;a class="nav-link" href="/register"&gt;Register&lt;/a&gt;
            &lt;/li&gt;
          {{/unless}}
        {{/if}}
      &lt;/ul&gt;
      &lt;form class="form-inline my-2 my-lg-0"&gt;
        &lt;input class="form-control mr-sm-2" type="text" placeholder="Search"&gt;
        {{!-- &lt;button class="btn btn-secondary my-2 my-sm-0" type="submit"&gt;Search&lt;/button&gt; --}}
        &lt;button type="button" class="btn btn-secondary tooltip2"&gt;&lt;span class="tooltiptext2"&gt;Search Currently Disabled&lt;/span&gt;Search&lt;/button&gt;
      &lt;/form&gt;
    &lt;/div&gt;
  &lt;/nav&gt;
    
    {{{body}}}
  
  &lt;script src="https://code.jquery.com/jquery-3.4.1.min.js"&gt;&lt;/script&gt;
  &lt;script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/script.js"&gt;&lt;/script&gt;
  
  &lt;/body&gt;
  &lt;/html&gt;
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->








                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Exports, Imports - RMTSlagalica.
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleJS1" aria-expanded="false"
                                aria-controls="collapseExampleJS1">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  module.exports = {
    userJoins,
    getCurrentUser,
    userLeaves,
    getJoinedUsers,
    updateAllUsers,
    getAllUsers,
  }
  exports.words = words;
  module.exports = formatMessage;

  const {userJoins, getCurrentUser, userLeaves, getJoinedUsers, updateAllUsers} = require('./utils/users'); // Users methods
  let words = require('./utils/words').words; // Why u do dis
  const formatMessage = require('./utils/messages'); // Messages

</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->







                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            APP.JS (Handlebars helpers, Sockets, Add Zero On Dates) - RMTSlagalica.
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleJS1" aria-expanded="false"
                                aria-controls="collapseExampleJS1">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  /* ********** DEPENDENCIES ********** */

  const socketio = require('socket.io'); // SocketIO
  const http = require('http'); // HTTP
  const path = require('path'); // PATH
    
  /* ********** INITIALIZE EXPRESS APP ********** */
  
  const app = express();
  const server = http.createServer(app);
  const io = socketio(server);
  
  /* ********** APP SET ********** */
  
  app.set('views', path.join(__dirname, '/views/'));
  app.engine('.hbs', expressHandlebars({
    extname: '.hbs',
    // defaultLayout: 'mainLayout',
    layoutsDir: __dirname + '/views/layouts',
    helpers: {
      ifEqualsString: (arg1, arg2, options) => {
        return (String(arg1) == String(arg2)) ? options.fn(this) : options.inverse(this);
      },
      counter: (index) => {
        return index + 1;
      },
      for: (from, to, incr, block) => {
        var accum = '';
        for(var i = from; i < to; i += incr)
            accum += block.fn(i);
        return accum;
      } 
    }
  }));
  app.set('view engine', '.hbs');
  // app.set('views', path.join(__dirname, 'views'));
  
  /* ********** SOCKET COMMUNICATION ********** */
  
  io.on('connection', (socket) => { // Socket connected on server
    console.log("New Socket Connection.");
  
    let object = { // Object that holds all users when new user connects and hold info if the game already started
      users: getJoinedUsers(),
      gameInProgress: gameInProgress
    }
  
    io.emit('userJoinedOnServer', object);
    socket.on('userJoinedInGame', (username) => {
      userJoinedGame(username, socket);
    });
  
    socket.on('userReady', userReady); // User clicked ready btn
    socket.on('userNotReady', userNotReady);
  
    socket.on('timeIsUp', (currentGame) => {
      socket.emit('timeIsUp' + currentGame); // Time is up for specific game
    });
  
    socket.on('finishedSlagalicaGiveDataForSpojnice', (word) => {
      finishedSlagalicaGiveDataForSpojnice(word, socket);
    });
    socket.on('finishedSpojniceGiveDataForSkocko', (correctAnswers) => {
      finishedSpojniceGiveDataForSkocko(correctAnswers, socket);
    });
    socket.on('finishedSkockoGiveDataForKoZnaZna', (info) => {
      finishedSkockoGiveDataForKoZnaZna(info, socket);
    });
    socket.on('finishedKoZnaZna', (infoKoZnaZna) => {
      finishedKoZnaZna(infoKoZnaZna, socket);
    });
    socket.on('finishedAsocijacije', (points) => {
      finishedAsocijacije(points, socket);
    });
  
    // Listen for chatMessage
    socket.on('chatMessage', (msg) => {
        const user = getCurrentUser(socket.id);
  
        io.emit('message', formatMessage(user.username, msg));
    });
  
    // Runs when client disconnects
    socket.on('disconnect', () => {
        console.log("Socket disconnects.");
  
        const user = userLeaves(socket.id, gameInProgress); // Find user that left
  
        if(user){
            io.emit('message', formatMessage('Admin', `${user.username} se diskonektovao.`)); // Tell other users who left
  
            // If everyone disconnected tell that to clients on main page
            if(getJoinedUsers() == 0){
              io.emit('allUsersDisconnected');
  
              if(gameInProgress){
                finished_at = new Date();
                finished_at = `${addZero(finished_at.getMonth() + 1)}.${addZero(finished_at.getDate())}.${finished_at.getFullYear()}.  ${addZero(finished_at.getHours())}:${addZero(finished_at.getMinutes())}h`;
                require('./utils/addGameToDB').saveGame(started_at, finished_at);
              }
  
              gameInProgress = false;
            }
        
            // Send users and room info
            io.emit('usersInfoAfterDisconnect', {
              users: getJoinedUsers(),
              user: user
            });
        }
    });
  });
  
  
  
  /* ********** FUNCTIONS ********** */
  
  function userJoinedGame(username, socket){
    const user = userJoins(socket.id, username); // Add user to users array
  
      // If game is in progress and user joins server redirect him and return
      if(gameInProgress){
        let redirectInfo = {
          username: username,
          destination: '/'
        }
  
        io.emit('redirect', redirectInfo);
  
        return;
      }
  
      // Welcome current user
      socket.emit('message', formatMessage('Admin', 'Uspeno ste se konektovali.'));
  
      // Broadcast when user connects
      socket.broadcast.emit('message', formatMessage('Admin', `${user.username} se konektovao.`));
  
      // Send users and room info
      io.emit('connectedUsersInfo', getJoinedUsers());
  }
  
  function userNotReady(id){
    let users = getJoinedUsers();
    let user = users.find(user => user.id === id);
    user.ready = false;
    io.emit("userNotReady", user);
  }
  
  
  function finishedAsocijacije(points, socket){
    let user = getCurrentUser(socket.id);
    let users = getJoinedUsers();
    let everyoneFinished = true;
    
    if(!user){
      return;
    }
  
    user.pointsAsocijacije += points;
    user.points += user.pointsAsocijacije;
  
    io.emit('updateAsocijacijePoints', user);
    user.finishedGame = true;
    user.ready = false;
  
    // Find if everyone finished
    for(let i = 0; i < users.length; i++){
      if(!users[i].finishedGame){
        everyoneFinished = false;
  
        break;
      }
    }
  
    // If everyone finished game is over, find winner
    if(everyoneFinished){
      let winner = users[0];
      let draw = false;
      gameInProgress = false;
  
      for(let i = 1; i < users.length; i++){
        if(users[i].points > winner.points){
          winner = users[i];
        }
      }
  
      for(let i = 1; i < users.length; i++){
        if(users[i] != winner && users[i].points == winner.points){
          draw = true;
  
          winner = undefined;
        }
      }
  
      finished_at = new Date();
      finished_at = `${addZero(finished_at.getMonth() + 1)}.${addZero(finished_at.getDate())}.${finished_at.getFullYear()}.  ${addZero(finished_at.getHours())}:${addZero(finished_at.getMinutes())}h`;
      require('./utils/addGameToDB').saveGame(started_at, finished_at);
  
      io.emit('gameOverForMain'); // On page main now we can allow other users to join game if there is space
      io.emit('gameOver', winner); // Tell to clients who is winner and that game is over
    }
  }
  
  // Adding zero on dates to show 00:22h instead of 0:22h
  function addZero(i) {
    if (i < 10) {
      i = "0" + i;
    }
  
    return i;
  }
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->





                    </div>








                </div>
                <!-- ---------- NODEJS ---------- -->




                <!-- ---------- JS ---------- -->
                <div id="js" class="mb-5">
                    <h1 class="collapse-btn-G collapsed mb-5" type="button" data-toggle="collapse"
                        data-target="#js-collapse" aria-expanded="false" aria-controls="js-collapse">
                        <u>JS</u>
                        <span class="collapse-arrow">&#8250;</span>
                    </h1>


                    <div class="collapse" id="js-collapse">



                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark important-color">
                            Select Element By DataAttribute - Tatamata
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleJS1" aria-expanded="false"
                                aria-controls="collapseExampleJS1">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  let element = document.querySelector(`[data-video-index="${counterPlyr++}"]`);
  let element = document.querySelector(`input[name="${insertNameHere}"]`);
  let videoToStop = document.querySelector(`video[data-chapter-id="${lastChapterID}"][data-clip-id="${lastClipID}"]`);
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->

                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark important-color">
                            Get / Change Data Or Any Other Attribute - CheatSheet.
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleJS1" aria-expanded="false"
                                aria-controls="collapseExampleJS1">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
            buttons[i].dataset.target = "#collapseExample" + i; // If attr is data-index-here-comes in JS it will return dataset.indexHereComes
            buttons[i].setAttribute("aria-controls", "collapseExample" + i);
            event.target.getAttribute('data-value');
          </pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->


                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark important-color">
                            Display, Disabled, Checked - S2s.
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleJS1" aria-expanded="false"
                                aria-controls="collapseExampleJS1">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  zastoHocePanelDiv.style.display = "block";
  event.target.disabled
  event.target.checked
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->


                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Animate Logo - Cinematic.
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleJS1" aria-expanded="false"
                                aria-controls="collapseExampleJS1">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  let logo = document.querySelector('a.navbar-brand');

  setInterval(() => {
    if(logo.style.color == ""){
        logo.style.color = "#000";
    }else if(logo.style.color == "rgb(255, 255, 255)"){
        logo.style.color = "#000";
    }else if(logo.style.color == "rgb(0, 0, 0)"){
        logo.style.color = "#fff";
    }
  }, 1000);
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->


                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark important-color">
                            Scroll To (jquery), URL, Path - DFD.
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleJS1" aria-expanded="false"
                                aria-controls="collapseExampleJS1">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  let pathname = window.location.pathname; // Returns path only (/path/example.html)
  let url      = window.location.href;     // Returns full URL (https://example.com/path/example.html)
  let origin   = window.location.origin;   // Returns base URL (https://example.com)
  
  let res = pathname.split("/");
  let commentID = res[4];
  // alert(res[4]);
  // alert(pathname)
  if(commentID){
    $('html, body').animate({
      scrollTop: $("#" + commentID).offset().top
    }, 1000);
  
    $("#" + commentID).css({"border": "2px solid black"});
  }  
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->





                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Sockets - RMTSlagalica.
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleJS1" aria-expanded="false"
                                aria-controls="collapseExampleJS1">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  const socket = io(origin); // Client Socket
  const socket = io(origin + '/'); // Client socket

  socket.on('gameOverForMain', () => {
    joinButton.disabled = false;
    pInfo.innerHTML = pInfo.innerHTML.substring(0, pInfo.innerHTML.length - 17);
  });

  socket.emit('userJoinedInGame', username.value);
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->









                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Form Validation - RMTSlagalica.
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleJS1" aria-expanded="false"
                                aria-controls="collapseExampleJS1">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
function cleanInput(input){
  // Create a new div element
  let temporalDivElement = document.createElement("div");
  // Set the HTML content with the providen
  temporalDivElement.innerHTML = input;

  // Retrieve the text property of the element (cross-browser support)
  return temporalDivElement.textContent || temporalDivElement.innerText || "";
}



function checkNicknameForm(){
  const lengthError = document.getElementById('length-error'); // Lenght error div
  const takenNicknameError = document.getElementById('taken-nickname-error'); // Taken error div
  const hasSpacesNicknameError = document.getElementById('has-spaces-nickname-error'); // Spaces error div

  // Removes html code from input and scripts

  // Create a new div element
  let temporalDivElement = document.createElement("div");
  let nickname = document.getElementById('nickname');
  // Set the HTML content with the providen
  temporalDivElement.innerHTML = nickname.value;

  nickname.value = temporalDivElement.textContent || temporalDivElement.innerText || "";

  if(hasSpaces(nickname.value)){ // If there are spaces in name show only spaces error and return false
    nickname.classList.add('is-invalid');
    hasSpacesNicknameError.style.display = "block";
    lengthError.style.display = "none";
    takenNicknameError.style.display = "none";

    return false;
  }else{
    if(isValidNicknameLength(nickname.value)){ // If lenght is not valid

      if(nicknameTaken(nickname.value)){ // If nickname is taken 
        nickname.classList.add('is-invalid');
  
        lengthError.style.display = "none";
        hasSpacesNicknameError.style.display = "none";
        takenNicknameError.style.display = "block";
  
        return false;
      }
  
      return true;
    }else{
      nickname.classList.add('is-invalid');
  
      lengthError.style.display = "block";
      hasSpacesNicknameError.style.display = "none";
      takenNicknameError.style.display = "none";
  
      return false;
    }
  }
}

function hasSpaces(nickname){

// https://stackoverflow.com/questions/17616624/detect-if-string-contains-any-spaces

  if (/\s/.test(nickname)) {
    // It has any kind of whitespace

    return true;
  }

  return false;
}

function nicknameTaken(nickname){
  for(let i = 0; i &lt; usersFront.length; i++){
    if(usersFront[i].username == nickname){
      return true;
    }
  }

  // YOU CAN'T BREAK FOREACH LOOP !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

  return false;
}

function isValidNicknameLength(nickname){
  return nickname.length &lt;= 20 ? true : false;
}

function validateEmail(email) {
  const re = /^(([^&amp;lt;&amp;gt;()\[\]\\.,;:\s@"]+(\.[^&amp;lt;&amp;gt;()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;

  return re.test(String(email).toLowerCase());
}
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->






                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark important-color">
                            Redirect, Hash - RMTSlagalica.
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleJS1" aria-expanded="false"
                                aria-controls="collapseExampleJS1">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  window.location.href = redirectInfo.destination;
  let startHash = window.location.hash;

</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->











                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            ParentNode, appendChild, childNodes - RMTSlagalica.
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleJS1" aria-expanded="false"
                                aria-controls="collapseExampleJS1">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  td.parentNode.removeChild(td);
  userList.appendChild(li);
  scoreboardUsers.childNodes.forEach((childNode) => {});
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->






                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark important-color">
                            Lazy Load
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleJS1" aria-expanded="false"
                                aria-controls="collapseExampleJS1">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
const targets = document.querySelectorAll('img[data-lazy]');

const lazyLoad = target =&gt; {
  const io = new IntersectionObserver((entries, observer) =&gt; {

    entries.forEach(entry =&gt; {
      if(entry.isIntersecting){
        const img = entry.target;
        const src = img.getAttribute('data-lazy');

        img.setAttribute('src', src);
        observer.disconnect();
      }
    });
  });

  io.observe(target);
}

targets.forEach(lazyLoad);
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->
                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark important-color">
                            Scroll To Top - Pixelate
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleJS1" aria-expanded="false"
                                aria-controls="collapseExampleJS1">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
// SCROLL TO TOP =========================================================================================================

let scrollToTopBtn = document.getElementById('scroll-to-top');

document.addEventListener("scroll", (event) => {
  let offset = pageYOffset;

  if (offset > 300) {
    scrollToTopBtn.style.display = "block";
  } else {
    scrollToTopBtn.style.display = "none";
  }

  scrollToTopBtn.addEventListener('click', () => {
    document.body.scrollTop = 0;
    document.documentElement.scrollTop = 0;
  });
});
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->



                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Object keys - Pixelate
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleJS1" aria-expanded="false"
                                aria-controls="collapseExampleJS1">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
let variablesKeys = Object.keys(variables);
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->



                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Window Width - Pixelate
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleJS1" aria-expanded="false"
                                aria-controls="collapseExampleJS1">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
let windowWidth = window.innerWidth;

window.addEventListener('resize', () => {
  let newWindowWidth = window.innerWidth;

  if ((windowWidth - 13) != newWindowWidth) {
    windowWidth = newWindowWidth + 13;
    turnNavbarOff();
  }
}); = Object.keys(variables);
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->




                    </div>











                </div>
                <!-- ---------- JS ---------- -->



                <!-- ---------- BOOTSTRAP ---------- -->
                <div id="bootstrap" class="mb-5">
                    <h1 class="collapse-btn-G collapsed mb-5" type="button" data-toggle="collapse"
                        data-target="#bootstrap-collapse" aria-expanded="false" aria-controls="bootstrap-collapse">
                        <u>BOOTSTRAP 5</u>
                        <span class="collapse-arrow">&#8250;</span>
                    </h1>

                    <div class="collapse" id="bootstrap-collapse">


                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark important-color">
                            Collapse - Tatamata
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExample5" aria-expanded="false"
                                aria-controls="collapseExample5">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
// Selektujemo collapse DIV, znaci ne button koji kliknemo da se desi collapse,
// Nego div u kome je collapse content, zatim napravimo promenljivu koja je tipa
// Bootstrap collapse i nad njom pozivamo metode iz dokumentacije

let collapseDivOLD = document.getElementById(`collapseOne${currentChapter}`);
let collapseDivNEW = document.getElementById(`collapseOne${newChapter}`);

if (currentChapter != newChapter) {
  let bsCollapseOLD = new bootstrap.Collapse(collapseDivOLD, {
    toggle: false
  });

  let bsCollapseNEW = new bootstrap.Collapse(collapseDivNEW, {
    toggle: false
  });

  bsCollapseOLD.hide();
  bsCollapseNEW.show();
}
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->


                    </div>

                </div>
                <!-- ---------- BOOTSTRAP ---------- -->




                <!-- ---------- HTML ---------- -->
                <div id="html" class="mb-5">
                    <h1 class="collapse-btn-G collapsed mb-5" type="button" data-toggle="collapse"
                        data-target="#html-collapse" aria-expanded="false" aria-controls="html-collapse">
                        <u>HTML</u>
                        <span class="collapse-arrow">&#8250;</span>
                    </h1>


                    <div class="collapse" id="html-collapse">


                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Input With Pattern - S2S 2020.
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExample5" aria-expanded="false"
                                aria-controls="collapseExample5">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  &lt;input type="tel" name="broj_telefona" class="form-control" id="broj-telefona" placeholder="Format: +381-XXXXXXX" value="&lt;?php echo $brojTelefona ?? ''; ?&gt;" pattern="\+[0-9]{3}-[0-9]{8,9}"&gt;
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->

                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Send Form To JS - Cveara Mirkovi.
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExample6" aria-expanded="false"
                                aria-controls="collapseExample6">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  &lt;form onsubmit="return validateForm(this)"&gt;&lt;/form&gt;
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->

                    </div>

                </div>
                <!-- ---------- HTML ---------- -->




                <!-- ---------- CSS ---------- -->
                <div id="css" class="mb-5">
                    <h1 class="collapse-btn-G collapsed mb-5" type="button" data-toggle="collapse"
                        data-target="#css-collapse" aria-expanded="false" aria-controls="css-collapse">
                        <u>CSS</u>
                        <span class="collapse-arrow">&#8250;</span>
                    </h1>

                    <div class="collapse" id="css-collapse">


                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Font Awesome as Content - Tatamata.
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExample5" aria-expanded="false"
                                aria-controls="collapseExample5">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
.accordion-button::after {
  background-image: none;
  font-family: "Font Awesome 5 Free";
  content: "\f078";
  font-weight: 900;
}
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->



                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Animate Message - Moviex.
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExample5" aria-expanded="false"
                                aria-controls="collapseExample5">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
            .success-message-custom{
              position: fixed;
              animation-name: example;
              animation-duration: 12s;
              top: 75px;
              right: -1000px;
              width: 600px;
              z-index: 1000;
            }
            
            @media only screen and (max-width: 769px){
              .success-message-custom{
                width: 300px;
              }
            }
            
            
            @keyframes example {
              0% { right: -1000;}
              20%{ right : 10px;}
              75% {right: 10px;}
              100%{ right: -1000;}
            }
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->

                    </div>
                </div>
                <!-- ---------- CSS ---------- -->




                <!-- ---------- OWL CAROUSEL ---------- -->
                <div id="owl-carousel" class="mb-5">
                    <h1 class="collapse-btn-G collapsed mb-5" type="button" data-toggle="collapse"
                        data-target="#owl-collapse" aria-expanded="false" aria-controls="owl-collapse">
                        <u>OWL CAROUSEL</u>
                        <span class="collapse-arrow">&#8250;</span>
                    </h1>

                    <div class="collapse" id="owl-collapse">

                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            HTML
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleOC3" aria-expanded="false"
                                aria-controls="collapseExampleOC3">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  &lt;!-- OWL CAROSEL --&gt;
  &lt;section id="banner-area"&gt;
      &lt;div class="owl-carousel owl-theme"&gt;
          &lt;?php foreach($filmovi as $film): ?&gt;
              &lt;div class="item"&gt;
                  &lt;img src="&lt;?php echo $film['slika']; ?&gt;" alt="Banner1"&gt;
              &lt;/div&gt;
          &lt;?php endforeach; ?&gt;
      &lt;/div&gt;
  &lt;/section&gt;
  &lt;!-- OWL CAROSEL --&gt;
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->

                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            CSS
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleOC1" aria-expanded="false"
                                aria-controls="collapseExampleOC1">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  #banner-area img{
    max-height: 700px;
  }
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->

                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            JS
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleOC2" aria-expanded="false"
                                aria-controls="collapseExampleOC2">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
// BANNER OWL CAROUSEL
$("#banner-area .owl-carousel").owlCarousel({
  dots: true,
  items: 1,
  loop: true,
  autoplay: true,
  autoplayTimeout: 2500,
  autoplayHoverPause: true,
  smartSpeed: 2000
});

// BANNER OWL CAROUSEL
$("#banner-area .owl-carousel").owlCarousel({
    dots: true,
    items: 1
});

// TOP SALE OWL CAROUSEL
$("#top-sale .owl-carousel").owlCarousel({
    loop: true,
    nav: true,
    dots: false,
    responsive: {
        0: {
            items: 1
        },
        600: {
            items: 3
        },
        1000: {
            items: 5
        }
    }
});

// NEW PHONES OWL CAROUSEL
$("#new-phones .owl-carousel").owlCarousel({
    loop: true,
    nav: false,
    dots: true,
    responsive: {
        0: {
            items: 1
        },
        600: {
            items: 3
        },
        1000: {
            items: 5
        }
    }
});

// BLOGS OWL CAROUSEL
$("#blogs .owl-carousel").owlCarousel({
    loop: true,
    nav: false,
    dots: true,
    responsive: {
        0: {
            items: 1
        },
        600: {
            items: 3
        }
    }
});

</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->
                    </div>

                </div>
                <!-- ---------- OWL CAROUSEL ---------- -->














                <!-- ---------- AJAX ---------- -->
                <div id="ajax" class="mb-5">
                    <h1 class="collapse-btn-G collapsed mb-5" type="button" data-toggle="collapse"
                        data-target="#ajax-collapse" aria-expanded="false" aria-controls="ajax-collapse">
                        <u>AJAX, XHR</u>
                        <span class="collapse-arrow">&#8250;</span>
                    </h1>

                    <div class="collapse" id="ajax-collapse">

                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark important-color">
                            proccess.php - Traversy Ajax
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleOC3" aria-expanded="false"
                                aria-controls="collapseExampleOC3">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  &lt;?php

  $connection = mysqli_connect('localhost', 'root', '', 'ajax');


  echo "Processing...\n";

  if(isset($_GET['name'])){
      echo 'GET: Your name is: ' . $_GET['name'];
  }

  if(isset($_POST['name'])){
      $name = $_POST['name'];
      $name = mysqli_real_escape_string($connection, $name);
      
      $query = "INSERT INTO User (name) VALUES ('$name')";

      if(mysqli_query($connection, $query)){
          echo 'User Added';
      }else{
          echo 'Error: ' . mysqli_error($connection);
      }


      echo '\nPOST: Your name is: ' . $_POST['name'];
  }


  // FOR FETCH API !!! 
  // https://codepen.io/dericksozo/post/fetch-api-json-php

  $contentType = isset($_SERVER["CONTENT_TYPE"]) ? trim($_SERVER["CONTENT_TYPE"]) : '';

  if ($contentType === "application/json") {
      //Receive the RAW post data.
      $content = trim(file_get_contents("php://input"));

      //print_r($content); // Prints JSON That we sent

      $decoded = json_decode($content, true);
      $name = $decoded['name'];

      //print_r($decoded); // Prints associative array

      //If json_decode failed, the JSON is invalid.
      if(is_array($decoded)) {
          $query = "INSERT INTO User (name) VALUES ('$name')";

          if(mysqli_query($connection, $query)){
              echo "User $name added.";
          }else{
              echo 'Error: ' . mysqli_error($connection);
          }
      } else {
          // Send error back to user.
      }
  }
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->








                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark important-color">
                            XHR File - Traversy Ajax
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleOC3" aria-expanded="false"
                                aria-controls="collapseExampleOC3">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  &lt;!DOCTYPE html&gt;
  &lt;html lang="en"&gt;
  &lt;head&gt;
      &lt;meta charset="UTF-8"&gt;
      &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
      &lt;title&gt;Ajax 1 - Text File&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
      
      &lt;button id="button"&gt;Get Text File&lt;/button&gt;
  
      &lt;script&gt;
  
          const button = document.getElementById('button');
          button.addEventListener('click', loadText);
  
          function loadText(){
              
              let xhr = new XMLHttpRequest(); // XHR Object
  
              // OPEN - type, url, async
              xhr.open('GET', 'sample.txt', true);
  
              // OPTIONAL - used for loaders
              xhr.onprogress = function(){
                  // Here we put loading icon.
              }
  
              // ONLOAD
              xhr.onload = function(){ // Function is callback
                  if(xhr.status == 200){ // this.status
                      console.log(this.responseText);
                  }
              }
  
              xhr.onerror = function(){ // We use this if we use ONLOAD
                  console.log('Request Error.');
              }
  
              xhr.send(); // Sending Request
          }
  
      &lt;/script&gt;
  
  &lt;/body&gt;
  &lt;/html&gt;
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->



                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark important-color">
                            XHR PHP FORMS - Traversy Ajax
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleOC3" aria-expanded="false"
                                aria-controls="collapseExampleOC3">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  &lt;!DOCTYPE html&gt;
  &lt;html lang="en"&gt;
  &lt;head&gt;
      &lt;meta charset="UTF-8"&gt;
      &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
      &lt;title&gt;Ajax 4 - PHP Forms&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
      
      &lt;button id="button"&gt;Get Name&lt;/button&gt;
  
      &lt;h1&gt;NORMAL GET FORM&lt;/h1&gt;
      &lt;form method="GET" action="process.php"&gt;
          &lt;input type="text" name="name" id="name"&gt;
          &lt;input type="submit" name="submit" id="submit" value="Submit"&gt;
      &lt;/form&gt;
  
      &lt;h1&gt;AJAX GET FORM&lt;/h1&gt;
      &lt;form id="getForm"&gt;
          &lt;input type="text" name="name" id="name2"&gt;
          &lt;input type="submit" name="submit" id="submit2" value="Submit"&gt;
      &lt;/form&gt;
  
      &lt;h1&gt;NORMAL POST FORM&lt;/h1&gt;
      &lt;form method="POST" action="process.php"&gt;
          &lt;input type="text" name="name" id="name3"&gt;
          &lt;input type="submit" name="submit" id="submit3" value="Submit"&gt;
      &lt;/form&gt;
  
      &lt;h1&gt;AJAX POST FORM&lt;/h1&gt;
      &lt;form id="postForm"&gt;
          &lt;input type="text" name="name" id="name4"&gt;
          &lt;input type="submit" name="submit" id="submit4" value="Submit"&gt;
      &lt;/form&gt;
  
  
      &lt;script&gt;
  
          const button = document.getElementById('button');
          const form = document.getElementById('getForm');
          const form2 = document.getElementById('postForm');
          button.addEventListener('click', loadName);
          form.addEventListener('submit', loadNameGet);
          form2.addEventListener('submit', loadNamePost);
  
          function loadName(){
              let xhr = new XMLHttpRequest();
              
              xhr.open('GET', 'process.php?name=Dzadzi', true);
  
              xhr.onload = () =&gt; { // If we use lambda expression we can't use this.status
                  if(xhr.status == 200){
                      console.log(xhr.responseText);
                  }
              }
  
              xhr.onerror = () =&gt; {
                  console.log('Request Error.');
              }
  
              xhr.send();
          }
  
          function loadNameGet(event){
              event.preventDefault();
  
              let xhr = new XMLHttpRequest();
              let name = document.getElementById('name2');
              
              xhr.open('GET', 'process.php?name=' + name.value, true);
  
              xhr.onload = () =&gt; { // If we use lambda expression we can't use this.status
                  if(xhr.status == 200){
                      console.log(xhr.responseText);
                  }
              }
  
              xhr.onerror = () =&gt; {
                  console.log('Request Error.');
              }
  
              xhr.send();
          }
  
          function loadNamePost(event){
              event.preventDefault();
  
              let xhr = new XMLHttpRequest();
              let name = document.getElementById('name4');
              let params = 'name=' + name.value;
  
              xhr.open('POST', 'process.php', true);
              xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
  
              xhr.onload = () =&gt; { // If we use lambda expression we can't use this.status
                  if(xhr.status == 200){
                      console.log(xhr.responseText);
                  }
              }
  
              xhr.onerror = () =&gt; {
                  console.log('Request Error.');
              }
  
              xhr.send(params);
          }
  
      &lt;/script&gt;
  
  &lt;/body&gt;
  &lt;/html&gt;
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->



                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark important-color">
                            FETCH - Traversy Ajax
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleOC3" aria-expanded="false"
                                aria-controls="collapseExampleOC3">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  &lt;!DOCTYPE html&gt;
  &lt;html lang="en"&gt;
  &lt;head&gt;
      &lt;meta charset="UTF-8"&gt;
      &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
      &lt;title&gt;Fetch&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
      
      &lt;button id="button"&gt;Get Users&lt;/button&gt;
  
      &lt;h1&gt;POST FORM&lt;/h1&gt;
      &lt;form id="postForm"&gt;
          &lt;input type="text" name="name" id="name"&gt;
          &lt;input type="submit" name="submit" id="submit" value="Submit"&gt;
      &lt;/form&gt;
  
      &lt;script&gt;
  
          const button = document.getElementById('button');
          const form = document.getElementById('postForm');
          button.addEventListener('click', loadUsers);
          form.addEventListener('submit', sendUser);
  
          function loadUsers(){
              
              fetch('users.php').then(res =&gt; res.json()).then((data) =&gt; {
                  console.log(data);
                  data.forEach(user =&gt; {
                      console.log(user.name);
                  });
  
              }).catch((error) =&gt; {
                  console.log(error);
              });
  
          }
  
          function sendUser(event){
              event.preventDefault();
  
              let name = document.getElementById('name');
  
              fetch('process.php', {
                  method: "POST",
                  headers: {
                      'Accept': 'application/json, text/plain, */*',
                      'Content-type': 'application/json'
                  },
                  body: JSON.stringify({
                      name: name.value,
                  })
              }).then(res =&gt; res.text()).then(data =&gt; console.log(data)).catch(err =&gt; console.log(err));
          }
  
      &lt;/script&gt;
  
  &lt;/body&gt;
  &lt;/html&gt;
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->


                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark important-color">
                            jQuery Ajax - Neda
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleOC3" aria-expanded="false"
                                aria-controls="collapseExampleOC3">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>

=========================================  PHP FILE ==================================================

&lt;?php
include_once '../includes/functions.php';
include_once '../includes/config.php';
require_once '../classes/Database.php';

if (!isset($_POST['myData'])) {
  header("Location: " . BASE_URL . "index.php");

  exit;
}

$requestObj = json_decode($_POST['myData']);

echo json_encode(Database::getInstance()-&gt;getAllPrevozSearch($requestObj));

exit;

=========================================  PHP FILE ==================================================

  const form = document.getElementById('sortiraj-forma');
  const select = document.getElementById('sortiraj-select');
  
  form.addEventListener('submit', (event) => {
    let dataToSend = {
      radio: selectedRadio.value,
      sort: selectedSort,
      search: searchText,
    };
    let dataString = JSON.stringify(dataToSend);
  
    let izbor = select.options[select.selectedIndex].value;
  
      $.ajax({
          url: 'sortiraj.php',
          type: 'POST',
          data: {
              vrstaSorta: izbor,
              myData: dataString,
          },
          success: (response) => {
              console.log(response);
              let smestaji = JSON.parse(response);
              console.log(smestaji);
              document.getElementById('knjige-container').innerHTML = response;
          }
      });
  });
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->

                    </div>

                </div>
                <!-- ---------- AJAX ---------- -->









                <!-- ---------- AXIOS ---------- -->
                <div id="axios" class="mb-5">
                    <h1 class="collapse-btn-G collapsed mb-5" type="button" data-toggle="collapse"
                        data-target="#axios-collapse" aria-expanded="false" aria-controls="axios-collapse">
                        <u>AXIOS</u>
                        <span class="collapse-arrow">&#8250;</span>
                    </h1>

                    <div class="collapse" id="axios-collapse">


                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            HTML
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleOC3" aria-expanded="false"
                                aria-controls="collapseExampleOC3">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  &lt;!DOCTYPE html&gt;
  &lt;html lang="en"&gt;
    &lt;head&gt;
      &lt;meta charset="UTF-8" /&gt;
      &lt;meta name="viewport" content="width=device-width, initial-scale=1.0" /&gt;
      &lt;meta http-equiv="X-UA-Compatible" content="ie=edge" /&gt;
      &lt;link
        rel="stylesheet"
        href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
        crossorigin="anonymous"
      /&gt;
      &lt;title&gt;Axios Crash Course&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
      &lt;div class="container my-5"&gt;
        &lt;div class="text-center"&gt;
          &lt;h1 class="display-4 text-center mb-3"&gt;Axios Crash Course&lt;/h1&gt;
          &lt;button class="btn btn-primary my-3" id="get"&gt;GET&lt;/button&gt;
          &lt;button class="btn btn-info" id="post"&gt;POST&lt;/button&gt;
          &lt;button class="btn btn-warning" id="update"&gt;PUT/PATCH&lt;/button&gt;
          &lt;button class="btn btn-danger" id="delete"&gt;DELETE&lt;/button&gt;
          &lt;button class="btn btn-secondary" id="sim"&gt;Sim Requests&lt;/button&gt;
          &lt;button class="btn btn-secondary" id="headers"&gt;
            Custom Headers
          &lt;/button&gt;
          &lt;button class="btn btn-secondary" id="transform"&gt;
            Transform
          &lt;/button&gt;
          &lt;button class="btn btn-secondary" id="error"&gt;
            Error Handling
          &lt;/button&gt;
          &lt;button class="btn btn-secondary" id="cancel"&gt;
            Cancel
          &lt;/button&gt;
        &lt;/div&gt;
        &lt;hr /&gt;
        &lt;div id="res"&gt;&lt;/div&gt;
      &lt;/div&gt;
  
      &lt;script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.0/axios.min.js"&gt;&lt;/script&gt;
      &lt;script src="main.js"&gt;&lt;/script&gt;
    &lt;/body&gt;
  &lt;/html&gt;
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->



                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            JS
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleOC2" aria-expanded="false"
                                aria-controls="collapseExampleOC2">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  // AXIOS GLOBALS

  axios.defaults.headers.common['X-Auth-Token'] = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c';
  
  // GET REQUEST

  function getTodos() {
    // axios({
    //   method: 'GET',
    //   url: 'https://jsonplaceholder.typicode.com/todos',
    //   // url: 'https://jsonplaceholder.typicode.com/todos?_limit=5',
    //   params: {
    //     _limit: 5,
    //   }
    // })
    // .then(res =&gt; showOutput(res))
    // .catch(err =&gt; console.log(err));
  
    axios.get(`https://jsonplaceholder.typicode.com/todos?_limit=5`, {
      timeout: 5, // ako prodje 5ms a server ne vrati odgovor prekidaj
    })
    .then((res) =&gt; {
      console.log(response);
    })
    .catch((error) =&gt; {
      console.log(error.response.data);
      console.log(error.response.status);
      console.log(error.response.headers);
    });
  }
  
  // POST REQUEST

  /* 
    Details - slozen javascript objekat iz PayPal onApprove() metode.

    create_time: "2021-04-29T21:24:04Z"
    id: "29D2182226830205V"
    intent: "CAPTURE"
    links: Array(1)
      0: {href: "https://api.sandbox.paypal.com/v2/checkout/orders/29D2182226830205V", rel: "self", method: "GET", title: "GET"}
      length: 1
      __proto__: Array(0)
    payer:
      address: {country_code: "RS"}
      email_address: "dragoslav.gagi888@gmail.com"
      name:
        given_name: "DragoslavP"
        surname: "JankovicP"
      __proto__: Object
      payer_id: "SK8JNE9MSU3ZL"
    __proto__: Object
    purchase_units: [{}]
    status: "COMPLETED"
    update_time: "2021-04-29T21:28:15Z"
    __proto__: Object
  */
  
  axios.post(`url`, {
    details,
  }).then(res =&gt; {
    console.log("============RES============");
    console.log(res);
    console.log("============RES============");
    console.log("============RES DATA============");
    console.log(res.data);
    console.log("============RES DATA============");
  }).catch(error =&gt; {
    console.log(error.response.data);
    console.log(error.response.status);
    console.log(error.response.headers);
  });

  function addTodo() {
    axios.post('https://jsonplaceholder.typicode.com/todos', {
      title: 'New Todo',
      completed: false
    })
    .then(res =&gt; showOutput(res))
    .catch(err =&gt; console.log(err));
  }
  
  // PUT/PATCH REQUEST

  function updateTodo() { // Put ce replace ceo objekat, izgubice se userid, a patch ce zameniti samo ono sto smo poslali i ostaviti sve staro
    axios.put('https://jsonplaceholder.typicode.com/todos/1', {
      title: 'Updated Todo',
      completed: true
    })
    .then(res =&gt; showOutput(res))
    .catch(err =&gt; console.log(err));
  }
  
  // DELETE REQUEST

  function removeTodo() {
    axios.delete('https://jsonplaceholder.typicode.com/todos/1')
    .then(res =&gt; showOutput(res))
    .catch(err =&gt; console.log(err));
  }
  
  // SIMULTANEOUS DATA

  function getData() {
    axios.all([
      axios.get('https://jsonplaceholder.typicode.com/todos?_limit=5'),
      axios.get('https://jsonplaceholder.typicode.com/posts?_limit=3'),
    ])
    .then(axios.spread((todos, posts) =&gt; {
        showOutput(todos);
        // showOutput(posts);
      }))
    .catch(err =&gt; console.log(err));
  }
  
  // CUSTOM HEADERS

  function customHeaders() {
    const config = {
      headers: {
        'Content-Type': 'application/json',
        Authorization: 'sometoken',
      },
    };
  
    axios.post('https://jsonplaceholder.typicode.com/todos', {
      title: 'New Todo',
      completed: false
    }, config)
    .then(res =&gt; showOutput(res))
    .catch(err =&gt; console.log(err));
  }
  
  // TRANSFORMING REQUESTS &amp; RESPONSES

  function transformResponse() { // Ne radi
    const options = {
      method: 'POST',
      url: 'https://jsonplaceholder.typicode.com/todos',
      data: {
        title: "Hello World!"
      },
      transformResponse: axios.defaults.transformResponse.concat(data =&gt; {
        data.title.toUpperCase();
        
        return data;
      })
    }
  
    axios(options).then(res =&gt; showOutput(res));
  }
  
  // ERROR HANDLING

  function errorHandling() {
    axios.get('https://jsonplaceholder.typicode.com/todoss?_limit=5')
    .then(res =&gt; showOutput(res))
    .catch(err =&gt; {
      if(err.response){ // Server responded with a status other than 200 range
        console.log(err.response.data);
        console.log(err.response.status);
        console.log(err.response.header);
  
        if(err.response.status === 404){
          alert("Error: Page Not Found.");
        }else if(err.request){
          // Request was made but no response
          console.log(err.request);
        }else{
          console.log(err.message);
        }
      }
    });
  }
  
  // CANCEL TOKEN

  function cancelToken() {
    const source = axios.CancelToken.source();
  
    axios.get('https://jsonplaceholder.typicode.com/todos?_limit=5', {
      cancelToken: source.token
    })
    .then(res =&gt; showOutput(res))
    .catch(thrown =&gt; {
      if(axios.isCancel(thrown)){
        console.log("Request canceled", thrown.message);
      }
    });
  
    if(true){
      source.cancel('Request canceled!');
    }
  }
  
  // INTERCEPTING REQUESTS &amp; RESPONSES

  axios.interceptors.request.use(config =&gt; {
    console.log(`${config.method.toUpperCase()} request sent to ${config.url}
    at ${new Date().getTime()}`);
  
    return config;
  }, error =&gt; {
    return Promise.reject(error);
  });
  
  // AXIOS INSTANCES

  const axiosInstance = axios.create({
    baseURL: 'https://jsonplaceholder.typicode.com'
    // other custom settings
  });
  
  // axiosInstance.get('/comments').then(res =&gt; showOutput(res));
  
  // Show output in browser
  function showOutput(res) {
    document.getElementById('res').innerHTML = `
    &lt;div class="card card-body mb-4"&gt;
      &lt;h5&gt;Status: ${res.status}&lt;/h5&gt;
    &lt;/div&gt;
    &lt;div class="card mt-3"&gt;
      &lt;div class="card-header"&gt;
        Headers
      &lt;/div&gt;
      &lt;div class="card-body"&gt;
        &lt;pre&gt;${JSON.stringify(res.headers, null, 2)}&lt;/pre&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class="card mt-3"&gt;
      &lt;div class="card-header"&gt;
        Data
      &lt;/div&gt;
      &lt;div class="card-body"&gt;
        &lt;pre&gt;${JSON.stringify(res.data, null, 2)}&lt;/pre&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class="card mt-3"&gt;
      &lt;div class="card-header"&gt;
        Config
      &lt;/div&gt;
      &lt;div class="card-body"&gt;
        &lt;pre&gt;${JSON.stringify(res.config, null, 2)}&lt;/pre&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  `;
  }
  
  // Event listeners

  document.getElementById('get').addEventListener('click', getTodos);
  document.getElementById('post').addEventListener('click', addTodo);
  document.getElementById('update').addEventListener('click', updateTodo);
  document.getElementById('delete').addEventListener('click', removeTodo);
  document.getElementById('sim').addEventListener('click', getData);
  document.getElementById('headers').addEventListener('click', customHeaders);
  document
    .getElementById('transform')
    .addEventListener('click', transformResponse);
  document.getElementById('error').addEventListener('click', errorHandling);
  document.getElementById('cancel').addEventListener('click', cancelToken);
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->



                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            PHP
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleOC3" aria-expanded="false"
                                aria-controls="collapseExampleOC3">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
&lt;?php

  $_POST = json_decode(file_get_contents("php://input"), true);

  if($_POST['details']['purchase_units'][0]['amount']['value'] == 10.00){
    echo json_encode($_POST);
  }else{
    echo 0;
  }

  exit;
          </pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->

                    </div>
                </div>
                <!-- ---------- AXIOS ---------- -->











                <!-- ---------- JAVA ---------- -->
                <div id="java" class="mb-5">
                    <h1 class="collapse-btn-G collapsed mb-5" type="button" data-toggle="collapse"
                        data-target="#java-collapse" aria-expanded="false" aria-controls="java-collapse">
                        <u>JAVA</u>
                        <span class="collapse-arrow">&#8250;</span>
                    </h1>

                    <div class="collapse" id="java-collapse">

                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Code Structure (img)
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleOC3" aria-expanded="false"
                                aria-controls="collapseExampleOC3">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  <img src="Screenshot_1.png" alt="">
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->



                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Controller
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleOC3" aria-expanded="false"
                                aria-controls="collapseExampleOC3">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  public class Controller {

    private static Controller instance;

    private IDatabase memoryAdmin;
    private IDatabase databaseStudio;
    private IDatabase databaseShow;
    private IDatabase databaseProp;
    private IDatabase databaseShow_Prop;

    private Controller() {
        memoryAdmin = new MemoryAdmin();
        databaseStudio = new DatabaseStudio();
        databaseShow = new DatabaseShow();
        databaseProp = new DatabaseProp();
        databaseShow_Prop = new DatabaseShow_Prop();
    }

    public static Controller getInstance() {
        if (instance == null) {
            instance = new Controller();
        }

        return instance;
    }

    public List&lt;Admin&gt; getAllAdmins() {
        return memoryAdmin.getAll();
    }

    public List&lt;Studio&gt; getAllStudios() {
        return databaseStudio.getAll();
    }

    public List&lt;Show&gt; getAllShows() {
        return databaseShow.getAll();
    }

    public Show insertShow(Show s) {
        return (Show) databaseShow.insert(s);
    }

    public Studio getStudio(Long id) {
        return (Studio) databaseStudio.get(id);
    }

    public List&lt;Prop&gt; getAllProps() {
        return databaseProp.getAll();
    }

    public Show_Prop insertShow_Prop(Show_Prop sp) {
        return (Show_Prop) databaseShow_Prop.insert(sp);
    }

    public Prop updateProp(Prop p) {
        return (Prop) databaseProp.update(p);
    }

}
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->




                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Database Singleton
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleOC3" aria-expanded="false"
                                aria-controls="collapseExampleOC3">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  public class Database {

    private static Database instance;
    private Connection connection;

    private Database() {

    }

    public static Database getInstance() {
        if (instance == null) {
            instance = new Database();
        }

        return instance;
    }

    public Connection getConnection() throws SQLException {
        if (connection == null || connection.isClosed()) {
            String url = "jdbc:mysql://localhost:3306/prviklkprimerig3";
            String user = "root";
            String password = "";

            connection = DriverManager.getConnection(url, user, password);
        }
        
        return connection;
    }
}
          
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->




                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Database Interface
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleOC3" aria-expanded="false"
                                aria-controls="collapseExampleOC3">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  public interface IDatabase&lt;T, K&gt; {

    public T insert(T t);

    public T get(K k);

    public List&lt;T&gt; getAll();

    public T update(T t);

    public T delete(T t);
  }
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->



                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Database - insert
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleOC3" aria-expanded="false"
                                aria-controls="collapseExampleOC3">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  try {
    String query = "INSERT INTO `show` (naziv, opis, trajanje, godina_proizvodnje, datum_pocetka, tip, studio_id) VALUES (?, ?, ?, ?, ?, ?, ?)";
    Connection connection = Database.getInstance().getConnection();
    PreparedStatement statement = connection.prepareStatement(query, Statement.RETURN_GENERATED_KEYS);
    statement.setString(1, s.getNaziv());
    statement.setString(2, s.getOpis());
    statement.setInt(3, s.getTrajanje());
    statement.setInt(4, s.getGodina());
    statement.setDate(5, new java.sql.Date(s.getDatumPocetka().getTime()));
    statement.setString(6, String.valueOf(s.getTip()));
    statement.setLong(7, s.getStudio().getId());
    statement.executeUpdate();

    ResultSet rs = statement.getGeneratedKeys();
    
    if(rs.next()){
        s.setId(rs.getLong(1));
    }

  } catch (Exception e) {
      e.printStackTrace();
  }

  return s;
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->




                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Database - getAll
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleOC3" aria-expanded="false"
                                aria-controls="collapseExampleOC3">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  List&lt;Show&gt; shows = new ArrayList&lt;&gt;();

  try {
      String query = "SELECT * FROM `show`";
      Connection connection = Database.getInstance().getConnection();
      Statement statement = connection.createStatement();
      ResultSet rs = statement.executeQuery(query);

      while (rs.next()) {
          Studio studio = Controller.getInstance().getStudio(rs.getLong("studio_id"));
          Show s = new Show(rs.getLong(1), rs.getString("naziv"), rs.getString("opis"), rs.getInt("trajanje"), rs.getInt("godina_proizvodnje"),
                  new java.util.Date(rs.getDate("datum_pocetka").getTime()), ShowType.valueOf(rs.getString("tip")), studio);
          shows.add(s);
      }
    } catch (Exception e) {
        e.printStackTrace();
    }

    return shows;
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->





                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Database - get
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleOC3" aria-expanded="false"
                                aria-controls="collapseExampleOC3">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  Studio s = null;

  try {
      Connection connection = Database.getInstance().getConnection();
      String query = "SELECT * FROM studio s WHERE id = ?";
      PreparedStatement statement = connection.prepareStatement(query);
      statement.setLong(1, k);

      ResultSet rs = statement.executeQuery();

      if (rs.next()) {
          s = new Studio(rs.getLong(1), rs.getString(2));
      }
  } catch (Exception e) {
      e.printStackTrace();
  }

  return s;
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->
                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Database - update
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleOC3" aria-expanded="false"
                                aria-controls="collapseExampleOC3">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  try {
    String query = "UPDATE `prop` SET zalihe = zalihe - 1 WHERE id = ?";
    Connection connection = Database.getInstance().getConnection();
    PreparedStatement statement = connection.prepareStatement(query);
    statement.setLong(1, p.getId());

    statement.executeUpdate();
  } catch (Exception e) {
      e.printStackTrace();
  }

  return p;
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->
                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Memory Class
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleOC3" aria-expanded="false"
                                aria-controls="collapseExampleOC3">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  public class MemoryAdmin implements IDatabase&lt;Admin, Long&gt; {

    private List&lt;Admin&gt; admins;

    public MemoryAdmin() {
        Admin a = new Admin("Dragoslav", "Jankovic", "gagi", "gagi", 1l);
        Admin a2 = new Admin("Dragoslav2", "Jankovic2", "gagi2", "gagi2", 2l);

        admins = new ArrayList&lt;&gt;();
        admins.add(a);
        admins.add(a2);
    }

    @Override
    public Admin insert(Admin t) {
        throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
    }

    @Override
    public Admin get(Long k) {
        throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
    }

    @Override
    public List&lt;Admin&gt; getAll() {
        return admins;
    }

    @Override
    public Admin update(Admin t) {
        throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
    }

    @Override
    public Admin delete(Admin t) {
        throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
    }

  }
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->
                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            ViewController
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleOC3" aria-expanded="false"
                                aria-controls="collapseExampleOC3">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  public class ViewController {
    
    private static ViewController instance;
    
    private JFrame loginForm;
    private JFrame mainForm;
    private JDialog newShowForm;
    private JDialog propsForm = null;
    
    private ViewController(){
        
    }
    
    public static ViewController getInstance(){
        if(instance == null){
            instance = new ViewController();
        }
        
        return instance;
    }
    
    public void openLoginForm(){
        loginForm = new LoginForm();
        loginForm.setVisible(true);
    }
    
    public void openMainForm(Admin admin){
        mainForm = new MainForm(admin);
        mainForm.setVisible(true);
    }
    
    public void openNewShowForm(){
        newShowForm = new NewShowForm(mainForm, true);
        newShowForm.setVisible(true);
    }
    
    public void openPropsForm(JLabel selectedProps){
        propsForm = new PropsForm(mainForm, true, selectedProps, newShowForm);
        propsForm.setVisible(true);
    }   
    
  }
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->
                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Login Form
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleOC3" aria-expanded="false"
                                aria-controls="collapseExampleOC3">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>

  private final int MAX_BROJ_POKUSAJA = 3;
  private int pokusaj = 1;

  private void LoginBtnActionPerformed(java.awt.event.ActionEvent evt) {                                         
    emptyErrors();
    String username = this.username.getText().trim();
    String password = String.valueOf(this.password.getPassword());
    boolean hasError = false;

    if (username.isEmpty()) {
        usernameError.setText("Username is required.");
        hasError = true;
    }

    if (password.isEmpty()) {
        passwordError.setText("Password is required.");
        hasError = true;
    }

    if (hasError) {
        if (pokusaj++ == MAX_BROJ_POKUSAJA) {
            LoginBtn.setEnabled(false);
        }

        brojPokusajaPreostalo.setText(String.valueOf(MAX_BROJ_POKUSAJA - (pokusaj - 1)));

        return;
    }

    List&lt;Admin&gt; admins = Controller.getInstance().getAllAdmins();

    for (Admin admin : admins) {
        if (admin.getUsername().equals(username)) {
            if (admin.getPassword().equals(password)) {
                ViewController.getInstance().openMainForm(admin);
                this.dispose();
            } else {
                wrongCombinationError.setText("Wrong combination.");
                hasError = true;
            }
        }
    }

    if (!hasError) {
        wrongCombinationError.setText("Username doesn't exist.");
    }

    if (pokusaj++ == MAX_BROJ_POKUSAJA) {
        LoginBtn.setEnabled(false);
    }

    brojPokusajaPreostalo.setText(String.valueOf(MAX_BROJ_POKUSAJA - (pokusaj - 1)));
  } 

  private void init() {
    this.setLocationRelativeTo(null);
    this.setTitle("Login");
    emptyErrors();
    this.setExtendedState(MAXIMIZED_BOTH);
  }

  private void emptyErrors() {
    usernameError.setText("");
    passwordError.setText("");
    wrongCombinationError.setText("");
  }  
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->
                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            New Show Form
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleOC3" aria-expanded="false"
                                aria-controls="collapseExampleOC3">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  private void saveBtnActionPerformed(java.awt.event.ActionEvent evt) {                                        
    try {
        boolean hasError = false;
        errors.setText("");
        String naziv = this.naziv.getText().trim();
        String opis = this.opis.getText().trim();
        String trajanjeString = this.trajanje.getText().trim();
        int godina = (int) godinaProizvodnje.getSelectedItem();
        String formDate = datumPocetka.getText();
        SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy");
        Date date = sdf.parse(formDate);

        if (!formDate.equals(sdf.format(new Date())) &amp;&amp; date.before(new Date())) {
            throw new Exception("Date can't be in the past.");
        }

        ShowType type = ShowType.valueOf((String) tip.getSelectedItem());
        Studio s = (Studio) studio.getSelectedItem();

        List&lt;Show&gt; shows = Controller.getInstance().getAllShows();

        for (Show showw : shows) {
            if (showw.getStudio().equals(s)) {
                throw new Exception("Studio taken.");
            }
        }

        String selectedPropsString = this.selectedProps.getText().trim();

        if (selectedPropsString.isEmpty()) {
            throw new Exception("Please select props.");
        }

        if (naziv.isEmpty() || opis.isEmpty() || trajanjeString.isEmpty()) {
            hasError = true;
        }

        if (hasError) {
            errors.setText("All fields are required.");

            return;
        }

        int trajanje = Integer.parseInt(trajanjeString);

        Show show = new Show(Long.MIN_VALUE, naziv, opis, trajanje, godina, date, type, s);
        show = Controller.getInstance().insertShow(show);
        
        for (Prop p : selectedPropsList) {
            Show_Prop sp = new Show_Prop(Long.MIN_VALUE, show, p);
            Controller.getInstance().insertShow_Prop(sp);
            Controller.getInstance().updateProp(p);
        }

        JOptionPane.showMessageDialog(this, "Successfully added show.", "Success", JOptionPane.INFORMATION_MESSAGE);
    } catch (Exception ex) {
        ex.printStackTrace();
        JOptionPane.showMessageDialog(this, "Failed inserting show.\n" + ex.getMessage(), "Fail", JOptionPane.ERROR_MESSAGE);
    }
  } 
  
  private void setGodinaProizvodnje() {
    godinaProizvodnje.removeAllItems();
    for (int i = 2020; i &gt;= 1900; i--) {
        godinaProizvodnje.addItem(i);
    }
  }

  private void setTip() {
      tip.removeAllItems();
      ShowType[] showTypes = ShowType.values();
      for (int i = 0; i &lt; showTypes.length; i++) {
          tip.addItem(String.valueOf(showTypes[i]));
      }
  }

  private void setStudio() {
      List&lt;Studio&gt; studios = Controller.getInstance().getAllStudios();
      studio.removeAllItems();

      for (Studio s : studios) {
          studio.addItem(s);
      }
  }

  private void setDate() {
      SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy");
      Date date = new Date();
      datumPocetka.setText(sdf.format(date));
  }
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->
                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Props Form
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleOC3" aria-expanded="false"
                                aria-controls="collapseExampleOC3">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  private void selectBtnActionPerformed(java.awt.event.ActionEvent evt) {                                          
    List&lt;Prop&gt; props = new ArrayList&lt;&gt;();
    int[] selectedRows = propsTable.getSelectedRows();
    String query = "";
    for (int i = 0; i &lt; selectedRows.length; i++) {
        PropsTableModel model = (PropsTableModel) propsTable.getModel();
        query += model.getValueAtRow(selectedRows[i]).toString() + " ";
        props.add((Prop) model.getValueAtRow(selectedRows[i]));
    }
    
    NewShowForm nsf2 = (NewShowForm) nsf;
    
    nsf2.setSelectedPropsList(props);

    selectedPropsLabel.setText(query);
    this.dispose();
  }  

  private void populateTable() {
    try {
        List&lt;Prop&gt; props = Controller.getInstance().getAllProps();
        PropsTableModel model = new PropsTableModel(props);
        propsTable.setModel(model);
    } catch (Exception e) {
        e.printStackTrace();
    }
  }
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->






                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Props Table Model
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleOC3" aria-expanded="false"
                                aria-controls="collapseExampleOC3">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
public class PropsTableModel extends AbstractTableModel {

  private final List&lt;Prop&gt; props;
  private String[] columnNames = new String[]{"NAZIV", "ZALIHE"};
  private Class[] columnClasses = new Class[]{String.class, Integer.class};

  public PropsTableModel(List&lt;Prop&gt; props) {
      this.props = props;
  }

  @Override
  public int getRowCount() {
      return props == null ? 0 : props.size();
  }

  @Override
  public int getColumnCount() {
      return columnNames.length;
  }

  @Override
  public Object getValueAt(int rowIndex, int columnIndex) {
      Prop prop = props.get(rowIndex);

      switch (columnIndex) {
          case 0:
              return prop.getNaziv();
          case 1:
              return prop.getZalihe();
          default:
              return null;
      }
  }

  public Object getValueAtRow(int rowIndex) {
      return props.get(rowIndex);
  }

  @Override
  public void setValueAt(Object aValue, int rowIndex, int columnIndex) {
      Prop prop = props.get(rowIndex);

      switch (columnIndex) {
          case 0:
              prop.setNaziv((String) aValue);
              break;
          case 1:
              prop.setZalihe((Integer) aValue);
              break;
      }
  }

  @Override
  public boolean isCellEditable(int rowIndex, int columnIndex) {
      return false;
  }

  @Override
  public Class&lt;?&gt; getColumnClass(int columnIndex) {
      return columnClasses[columnIndex];
  }

  @Override
  public String getColumnName(int column) {
      return columnNames[column];
  }

}
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->



                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Editable Table Model
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleOC3" aria-expanded="false"
                                aria-controls="collapseExampleOC3">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
  private void addBtnActionPerformed(java.awt.event.ActionEvent evt) {                                       
    ApplicationTableModel model = (ApplicationTableModel) crudTable.getModel();
    model.insertApplication(new Application());
  }                                      

  private void deleteBtnActionPerformed(java.awt.event.ActionEvent evt) {                                          
    int selectedRow = crudTable.getSelectedRow();
    
    if(selectedRow &gt; 0){
        ApplicationTableModel model = (ApplicationTableModel) crudTable.getModel();
        model.deleteApplication(selectedRow);
    }
  } 


  private void populateTable() {
    try {
        List&lt;Application&gt; applications = Controller.getInstance().getAllApplications();
        ApplicationTableModel model = new ApplicationTableModel(applications);
        crudTable.setModel(model);

        List&lt;Subject&gt; subjects = Controller.getInstance().getAllSubjects();
        JComboBox cbSubjects = new JComboBox(subjects.toArray());

        List&lt;Student&gt; students = Controller.getInstance().getAllStudents();
        JComboBox cbStudents = new JComboBox(students.toArray());

        TableColumn tcSubjects = crudTable.getColumnModel().getColumn(0);
        tcSubjects.setCellEditor(new DefaultCellEditor(cbSubjects));

        TableColumn tcStudents = crudTable.getColumnModel().getColumn(1);
        tcStudents.setCellEditor(new DefaultCellEditor(cbStudents));
    } catch (Exception e) {
        e.printStackTrace();
    }
  }



  public void insertApplication(Application application) {
    try {
  //            Controller.getInstance().insertApplication(application);
        this.applications.add(application);
        fireTableRowsInserted(applications.size() - 1, applications.size() - 1);
    } catch (Exception e) {
        e.printStackTrace();
    }

  }

  public void deleteApplication(int selectedRow) {
    try {
        Application application = applications.get(selectedRow);
        Controller.getInstance().deleteApplication(application);
        applications.remove(selectedRow);
        fireTableRowsDeleted(selectedRow, selectedRow);
    } catch (Exception e) {
        e.printStackTrace();
    }
  }
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->

                    </div>


                </div>
                <!-- ---------- JAVA ---------- -->



                <!-- ---------- JAVA 2 ---------- -->
                <div id="java-2" class="mb-5">
                    <h1 class="collapse-btn-G collapsed mb-5" type="button" data-toggle="collapse"
                        data-target="#java2-collapse" aria-expanded="false" aria-controls="java2-collapse">
                        <u>JAVA 2</u>
                        <span class="collapse-arrow">&#8250;</span>
                    </h1>

                    <div class="collapse" id="java2-collapse">


                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            MainForm - Server
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleOC3" aria-expanded="false"
                                aria-controls="collapseExampleOC3">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
public class MainForm extends javax.swing.JFrame {

  StartServer startServer;

  public MainForm() {
      initComponents();
      stopBtn.setEnabled(false);
      setLocationRelativeTo(null);
      setTitle("Server application");
      statusTxt.setEnabled(false);
      statusTxt.setText("Server is not running.");
      recnikPanel.setVisible(false);
  }                  

  private void startBtnActionPerformed(java.awt.event.ActionEvent evt) {                                         
      startServer = new StartServer(this);
      startServer.start();
  }                                        

  private void stopBtnActionPerformed(java.awt.event.ActionEvent evt) {                                        
      startServer.stopServer();
      System.out.println(startServer.isAlive());
  }                                       
             
  public void serverStarted() {
      startBtn.setEnabled(false);
      statusTxt.setText("Server is running.");
      stopBtn.setEnabled(true);
      recnikPanel.setVisible(true);

      VocabularyTableModel vtm = new VocabularyTableModel(Controller.getInstance().getVocabulary());
      recnikTable.setModel(vtm);
  }

  public void serverStopped() {
      startBtn.setEnabled(true);
      statusTxt.setText("Server is not running.");
      stopBtn.setEnabled(false);
      recnikPanel.setVisible(false);
  }

  public JTable getRecnikTable() {
      return recnikTable;
  }

}
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->



                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            StartServer (Thread) - Server
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleOC3" aria-expanded="false"
                                aria-controls="collapseExampleOC3">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
public class StartServer extends Thread {

  MainForm mf;
  ArrayList&lt;Socket&gt; connectedUsers;
  ServerSocket serverSocket;
  
  public StartServer(MainForm mf) {
      this.mf = mf;
  }

  @Override
  public void run() {
      try {
          serverSocket = new ServerSocket(9000);
          connectedUsers = new ArrayList&lt;&gt;();
          mf.serverStarted();
          System.out.println("Server started");
          
          while (true) {
              Socket s = serverSocket.accept();
              connectedUsers.add(s);
              communication.CommunicationWithClient cwc = new CommunicationWithClient(s, mf);
              cwc.start();
          }

      } catch (IOException ex) {
          if (ex instanceof SocketException) {
              System.out.println("Server is closed");
          } else {
              Logger.getLogger(StartServer.class.getName()).log(Level.SEVERE, null, ex);

          }
      }
  }

  public void stopServer() {
      try {
          serverSocket.close();
          mf.serverStopped();
      } catch (IOException ex) {
          Logger.getLogger(StartServer.class
                  .getName()).log(Level.SEVERE, null, ex);
      }
  }

}
          </pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->


                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            CommunicationWithClient (Thread) - Server
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleOC3" aria-expanded="false"
                                aria-controls="collapseExampleOC3">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
public class CommunicationWithClient extends Thread implements Serializable {

  Socket socket;
  MainForm mf;

  public CommunicationWithClient() {
  }

  public CommunicationWithClient(Socket socket, MainForm mf) {
      this.socket = socket;
      this.mf = mf;
  }

  @Override
  public void run() {
      while (true) {
          Request req = getRequest();
          Response res = new Response();

          switch (req.getOperation()) {
              case LOGIN:
                  String username = req.getUsername();
                  ArrayList&lt;User&gt; allUsers = controllers.Controller.getInstance().getUsers();
                  boolean userExists = false;
                  User user = null;

                  for (User u : allUsers) {
                      if (u.getUsername().equals(username)) {
                          userExists = true;
                          user = u;
                      }
                  }

                  if (userExists) {
                      res.setMessage("Login successful");
                      res.setSuccess(true);
                      res.setUser(user);
                  } else {
                      res.setMessage("Login failed");
                      res.setSuccess(false);
                  }

                  break;
              case LOGOUT:
                  res.setMessage("Logout successful");
                  res.setSuccess(true);
                  res.setUser(null);
                  break;
              case INSERT:
                  Vocabulary vocabulary = req.getVocabulary();
                  controllers.Controller.getInstance().getVocabulary().add(vocabulary);
                  VocabularyTableModel vtm = (VocabularyTableModel) mf.getRecnikTable().getModel();
                  vtm.fireTableRowsInserted(controllers.Controller.getInstance().getVocabulary().size() - 1, controllers.Controller.getInstance().getVocabulary().size() - 1);

                  res.setMessage("Successfully added word.");
                  res.setSuccess(true);
          }

          sendResponse(res);
      }
  }

  public void sendResponse(Response res) {
      ObjectOutputStream oos = null;

      try {
          oos = new ObjectOutputStream(socket.getOutputStream());
          oos.writeObject(res);
      } catch (IOException ex) {
          Logger.getLogger(CommunicationWithClient.class.getName()).log(Level.SEVERE, null, ex);
      }
  }

  public Request getRequest() {
      ObjectInputStream ois = null;
      Request req = new Request();

      try {
          ois = new ObjectInputStream(socket.getInputStream());
          req = (Request) ois.readObject();
      } catch (IOException ex) {
          Logger.getLogger(CommunicationWithClient.class.getName()).log(Level.SEVERE, null, ex);
      } catch (ClassNotFoundException ex) {
          Logger.getLogger(CommunicationWithClient.class.getName()).log(Level.SEVERE, null, ex);
      }

      return req;
  }
}
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->


                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            LoginForm - Client
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleOC3" aria-expanded="false"
                                aria-controls="collapseExampleOC3">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
public class LoginForm extends javax.swing.JFrame {

  public LoginForm() {
      initComponents();
      setLocationRelativeTo(null);
      setTitle("Login form");
  }                      

  private void loginBtnActionPerformed(java.awt.event.ActionEvent evt) {                                         
      String username = usernameTxt.getText().trim();
      
      Request req = new Request();
      req.setOperation(operations.Operations.LOGIN);
      req.setUsername(username);
      communication.CommunicationWithServer.getInstance().sendRequest(req);
      
      Response res = communication.CommunicationWithServer.getInstance().getResponse();
      
      JOptionPane.showMessageDialog(this, res.getMessage());
      
      if (res.isSuccess()) {
          MainForm mf = new MainForm(res.getUser());
          mf.setVisible(true);
          this.dispose();
      }

  }                                                          
}            
          </pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->



                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            MainForm - Client
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleOC3" aria-expanded="false"
                                aria-controls="collapseExampleOC3">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
public class MainForm extends javax.swing.JFrame {
    
    User user;
    
    public MainForm(User user) {
        initComponents();
        setLocationRelativeTo(null);
        setTitle("Main form");
        this.user = user;
        loggedInAs.setText("Logged in as: " + user.getUsername());
    }                      

    private void logoutBtnActionPerformed(java.awt.event.ActionEvent evt) {                                          
        Request req = new Request();
        req.setOperation(Operations.LOGOUT);
        communication.CommunicationWithServer.getInstance().sendRequest(req);
        
        Response res = communication.CommunicationWithServer.getInstance().getResponse();
        
        JOptionPane.showMessageDialog(this, res.getMessage());
        
        if (res.isSuccess()) {
            LoginForm lf = new LoginForm();
            lf.setVisible(true);
            this.dispose();
        }
    }                                         

    private void sendBtnActionPerformed(java.awt.event.ActionEvent evt) {                                        
        String serbianWord = this.serbianWord.getText().trim();
        String englishWord = this.englishWord.getText().trim();
        Vocabulary vocabulary = new Vocabulary(serbianWord, englishWord, user);
        
        Request req = new Request();
        req.setVocabulary(vocabulary);
        req.setOperation(Operations.INSERT);
        communication.CommunicationWithServer.getInstance().sendRequest(req);
        
        Response res = communication.CommunicationWithServer.getInstance().getResponse();
        
        JOptionPane.showMessageDialog(this, res.getMessage());
        
        if (res.isSuccess()) {
            this.serbianWord.setText("");
            this.englishWord.setText("");
        }
    }                                       
                 
}
             
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->


                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            CommunicationWithServer - Client
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleOC3" aria-expanded="false"
                                aria-controls="collapseExampleOC3">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
public class CommunicationWithServer implements Serializable{

    private Socket socket;

    private static CommunicationWithServer instance;

    private CommunicationWithServer() {
        try {
            socket = new Socket("localhost", 9000);
        } catch (IOException ex) {
            Logger.getLogger(CommunicationWithServer.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    public static CommunicationWithServer getInstance() {
        if (instance == null) {
            instance = new CommunicationWithServer();
        }

        return instance;
    }

    public void sendRequest(Request req) {
        ObjectOutputStream oos = null;

        try {
            oos = new ObjectOutputStream(socket.getOutputStream());
            oos.writeObject(req);
        } catch (IOException ex) {
            Logger.getLogger(CommunicationWithServer.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    public Response getResponse() {
        ObjectInputStream ois = null;
        Response res = new Response();

        try {
            ois = new ObjectInputStream(socket.getInputStream());
            res = (Response) ois.readObject();
        } catch (IOException ex) {
            Logger.getLogger(CommunicationWithServer.class.getName()).log(Level.SEVERE, null, ex);
        } catch (ClassNotFoundException ex) {
            Logger.getLogger(CommunicationWithServer.class.getName()).log(Level.SEVERE, null, ex);
        }

        return res;
    }
}             
          </pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->

                    </div>

                </div>
                <!-- JAVA 2 END -->



                <!-- ---------- JONI START ---------- -->
                <div id="joni" class="mb-5">
                    <h1 class="collapse-btn-G collapsed mb-5" type="button" data-toggle="collapse"
                        data-target="#joni-collapse" aria-expanded="false" aria-controls="joni-collapse">
                        <u>Joni</u>
                        <span class="collapse-arrow">&#8250;</span>
                    </h1>

                    <div class="collapse" id="joni-collapse">


                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            ServerNit
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleOC3" aria-expanded="false"
                                aria-controls="collapseExampleOC3">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
public class ServerNit extends Thread{

  List&lt;Korisnik&gt; korisnici;
  List&lt;Re&gt; reci;
  List&lt;EngleskoZnacenje&gt; konji;
  List&lt;EngleskoZnacenje&gt; profesori;
  ServerSocket server;
  Socket socket;
  ObjectOutputStream out;
  FrmServer frmServer;
  boolean kraj = false;
  
  public ServerNit(FrmServer frmServer) {
      this.frmServer = frmServer;
      
      try {
          server = new ServerSocket(8888);
      } catch (IOException ex) {
          Logger.getLogger(ServerNit.class.getName()).log(Level.SEVERE, null, ex);
      }
      
      korisnici = new ArrayList&lt;&gt;();
      korisnici.add(new Korisnik("mirkopedere", "Mirko", "Zecic"));
      korisnici.add(new Korisnik("pavlebilder", "Pavle", "Jacovic"));
      korisnici.add(new Korisnik("jonisisa", "Nikola", "Djordjevic"));
      korisnici.add(new Korisnik("milans", "Milan", "Stefanovic"));
      korisnici.add(new Korisnik("markos", "Marko", "Djordjevic"));
      
      reci = new ArrayList&lt;&gt;();
      konji = new ArrayList&lt;&gt;();
      konji.add(new EngleskoZnacenje("horse", "server"));
      konji.add(new EngleskoZnacenje("equine", "server"));
      reci.add(new Re("konj", konji));
      
      profesori = new ArrayList&lt;&gt;();
      profesori.add(new EngleskoZnacenje("professor", "server"));
      profesori.add(new EngleskoZnacenje("academic", "server"));
      
      reci.add(new Re("profesor", profesori));
  }

  @Override
  public void run() {
      while(!server.isClosed()){
              
          try {
              System.out.println("Waiting for connection...");
              
              socket = server.accept(); 
              System.out.println("Linguist connected!");
              ServerWrite sw = new ServerWrite(socket);
              ServerReadThread serverReadThread = new ServerReadThread(socket, this, frmServer, sw, korisnici, reci);
          }catch (SocketException ex) {
              System.out.println("");
          } 
          catch (IOException ex) {
              Logger.getLogger(ServerNit.class.getName()).log(Level.SEVERE, null, ex);
          }
              
      }
  }

  void zaustavi() {
      try {
          server.close();
      } catch (IOException ex) {
          Logger.getLogger(ServerNit.class.getName()).log(Level.SEVERE, null, ex);
      }
  }
  
  public List&lt;Re&gt; vratiListuReci(){
      return reci;
  }
}

class ServerWrite {
  Socket socket;
  ObjectOutputStream out;

  public ServerWrite(Socket socket) {
      this.socket = socket;
      
      try {
          out = new ObjectOutputStream(this.socket.getOutputStream());
      } catch (IOException ex) {
          Logger.getLogger(ServerWrite.class.getName()).log(Level.SEVERE, null, ex);
      }
  }
  
  public void posalji(Object object) throws IOException{
      out.writeObject(object);
  }
}

class ServerReadThread extends Thread{
  ObjectInputStream in; 
  Socket socket;
  ServerNit serverNit;
  FrmServer frmServer;
  ServerWrite sw;
  List&lt;Korisnik&gt; korisnici;
  List&lt;Re&gt; reci;
  String trazenaRec = "";
  String korisnickoIme = null;
  
  public ServerReadThread(Socket socket, ServerNit serverNit, FrmServer frmServer,
          ServerWrite sw, List&lt;Korisnik&gt; korisnici, List&lt;Re&gt; reci) {
      this.socket = socket;
      this.serverNit = serverNit;
      this.frmServer = frmServer;
      this.korisnici = korisnici;
      this.reci = reci;
      this.sw = sw;
      
      
      try {
          in = new ObjectInputStream(socket.getInputStream());
      } catch (IOException ex) {
          Logger.getLogger(ServerReadThread.class.getName()).log(Level.SEVERE, null, ex);
      }
      
      start();
  }

  @Override
  public void run() {
      while(true){
          try {
              Object objekat = in.readObject();
              if(objekat instanceof String){
                  String objekatKast = (String)objekat;
                  String[] elementi = objekatKast.split("~");
                  switch(elementi[0]){
                      case "login": 
                          if(postoji(elementi[1])){
                              korisnickoIme = elementi[1];
                              sw.posalji("uspesanLogin~"+elementi[1]);
                          } else 
                              sw.posalji("neuspesanLogin~");
                      break;
                      case "rec":
                          
                          break;
                      case "trazenaRec":
                          uspesnoNadjenaRec(elementi[1]);
                          if(!trazenaRec.isEmpty()){
                              System.out.println(trazenaRec);
                              sw.posalji("uspesnoNadjenjaRec~"+trazenaRec);
                          } else {
                              sw.posalji("neuspesnoNadjenjaRec~");
                          }
                          break;
                  }
              }
          } catch (IOException ex) {
              Logger.getLogger(ServerReadThread.class.getName()).log(Level.SEVERE, null, ex);
          } catch (ClassNotFoundException ex) {
              Logger.getLogger(ServerReadThread.class.getName()).log(Level.SEVERE, null, ex);
          }
      }
  }
}
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->




                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            ClientNit
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleOC3" aria-expanded="false"
                                aria-controls="collapseExampleOC3">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
public class ClientNit {

  String korisnickoIme;
  Socket socket;
  ObjectOutputStream out;
  FrmLogin frmClientLogin;

  public ClientNit(FrmLogin frmClientLogin) {
        
      this.frmClientLogin = frmClientLogin;
      
      try {
          socket = new Socket("localhost", 8888);
          
          out = new ObjectOutputStream(socket.getOutputStream());
          
          ClientReadThread clientReadThread = new ClientReadThread(socket, this.frmClientLogin, this);
          clientReadThread.start();
      } catch (IOException ex) {
          Logger.getLogger(ClientNit.class.getName()).log(Level.SEVERE, null, ex);
      }
  }

  void prijaviSe(String korisnickoIme) {
      this.korisnickoIme = korisnickoIme;
      try {
          out.writeObject("login~"+korisnickoIme);
      } catch (IOException ex) {
          Logger.getLogger(ClientNit.class.getName()).log(Level.SEVERE, null, ex);
      }
  }

  void posaljiRec(String srpska, String engleska, String korisnik) {
      try {
          out.writeObject("rec~" + srpska + "/" + engleska + "/" + korisnik);
      } catch (IOException ex) {
          Logger.getLogger(ClientNit.class.getName()).log(Level.SEVERE, null, ex);
      }
  }

  void pretraziRec(String jezik, String trazenaRec) {
      try {
          out.writeObject("trazenaRec~" + jezik + "/" + trazenaRec);
      } catch (IOException ex) {
          Logger.getLogger(ClientNit.class.getName()).log(Level.SEVERE, null, ex);
      }
  }
}

class ClientReadThread extends Thread{
  Socket socket;
  ClientNit cn;
  FrmLogin frmLogin;
  FrmMain frmMain;
  ObjectInputStream in;

  public ClientReadThread(Socket socket,FrmLogin frmLogin, ClientNit cn) {
      this.socket = socket;
      this.cn = cn;
      this.frmLogin = frmLogin;
      
      try {
          in = new ObjectInputStream(this.socket.getInputStream());
      } catch (IOException ex) {
          Logger.getLogger(ClientReadThread.class.getName()).log(Level.SEVERE, null, ex);
      }
      frmMain = new FrmMain(cn);
  }      

  @Override
  public void run() {
      while(true){
          try {
              Object objekat = in.readObject();
              if(objekat instanceof String) {
                  String linija = (String) objekat;
                  String[] elementi = linija.split("~");
                  switch(elementi[0]){
                      case "uspesanLogin":
                          JOptionPane.showMessageDialog(frmLogin, "Dobrodosli u recnik!" +elementi[1] +"");
                          frmLogin.dispose();
                          frmMain.setVisible(true);
                          frmMain.getTxtUlogovaniKorisnik().setText(elementi[1]);
                          break;
                      case "neuspesanLogin":
                          JOptionPane.showMessageDialog(frmLogin, "Korisnik sa tom email adresom ne postoji!");
                          break;
                      case "uspesnoRec":
                          JOptionPane.showMessageDialog(frmMain, "Uspesno ste dodali rec!");
                          break;
                      case "neuspesnoRec":
                          JOptionPane.showMessageDialog(frmMain, "Sistem nije dodao rec!");
                          break;
                      case "uspesnoNadjenjaRec":
                          frmMain.getTxtTrazenaRec().setText(elementi[1]);
                          break;
                      case "neuspesnoNadjenjaRec":
                          JOptionPane.showMessageDialog(frmMain, "Sistem nije nasao rec!");
                          break;
                  }
              }
          } catch (IOException ex) {
              Logger.getLogger(ClientReadThread.class.getName()).log(Level.SEVERE, null, ex);
          } catch (ClassNotFoundException ex) {
              Logger.getLogger(ClientReadThread.class.getName()).log(Level.SEVERE, null, ex);
          }
      }
  }
}
          </pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->




                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            TimeNit
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleOC3" aria-expanded="false"
                                aria-controls="collapseExampleOC3">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
public class TimeThread extends Thread{
  SimpleDateFormat sdfTrenutnoVreme; 
  SimpleDateFormat sdfStart;
  FrmServerStart frmServerStart;
  Date vremePokretranjaServera;

  public TimeThread(FrmServerStart frmServerStart, Date vremePokretranjaServera) {
      sdfTrenutnoVreme = new SimpleDateFormat("hh:mm:ss"); 
      sdfStart = new SimpleDateFormat("hh:mm");
      this.frmServerStart = frmServerStart;
      this.vremePokretranjaServera = vremePokretranjaServera;
      
      start();
  }

  @Override
  public void run() {
      frmServerStart.getTxtVremePokretanjaServera().setText(sdfStart.format(vremePokretranjaServera));
      while(true){
          frmServerStart.getTxtTrenutnoVreme().setText(sdfTrenutnoVreme.format(new Date()));
          try {
              sleep(1000);
          } catch (InterruptedException ex) {
              Logger.getLogger(TimeThread.class.getName()).log(Level.SEVERE, null, ex);
          }
      }
  }
  
  
}
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->

                    </div>


                </div>
                <!-- ---------- JONI END ---------- -->


                <!-- ---------- IS START ---------- -->
                <div id="is" class="mb-5">
                    <h1 class="collapse-btn-G collapsed mb-5" type="button" data-toggle="collapse"
                        data-target="#is-collapse" aria-expanded="false" aria-controls="is-collapse">
                        <u>IS</u>
                        <span class="collapse-arrow">&#8250;</span>
                    </h1>

                    <div class="collapse" id="is-collapse">


                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Trening.txt
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleOC3" aria-expanded="false"
                                aria-controls="collapseExampleOC3">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
import org.neuroph.core.NeuralNetwork;
import org.neuroph.core.data.DataSet;

/*
  * To change this license header, choose License Headers in Project Properties.
  * To change this template file, choose Tools | Templates
  * and open the template in the editor.
  */

/**
  *
  * @author Mirko
  */
public class Trening {
    private NeuralNetwork mreza;
    private DataSet dataset;
    
    private int brIteracija;
    private double koefUcenja;
    private double greska;
    private double momentum;
    private double acc;

    public Trening() {
    }

    public Trening(NeuralNetwork mreza, DataSet dataset, int brIteracija, double koefUcenja, double greska, double momentum, double acc) {
        this.mreza = mreza;
        this.dataset = dataset;
        this.brIteracija = brIteracija;
        this.koefUcenja = koefUcenja;
        this.greska = greska;
        this.momentum = momentum;
        this.acc = acc;
    }

    public double getAcc() {
        return acc;
    }

    public void setAcc(double acc) {
        this.acc = acc;
    }

    public NeuralNetwork getMreza() {
        return mreza;
    }

    public void setMreza(NeuralNetwork mreza) {
        this.mreza = mreza;
    }

    public DataSet getDataset() {
        return dataset;
    }

    public void setDataset(DataSet dataset) {
        this.dataset = dataset;
    }

    public int getBrIteracija() {
        return brIteracija;
    }

    public void setBrIteracija(int brIteracija) {
        this.brIteracija = brIteracija;
    }

    public double getKoefUcenja() {
        return koefUcenja;
    }

    public void setKoefUcenja(double koefUcenja) {
        this.koefUcenja = koefUcenja;
    }

    public double getGreska() {
        return greska;
    }

    public void setGreska(double greska) {
        this.greska = greska;
    }

    public double getMomentum() {
        return momentum;
    }

    public void setMomentum(double momentum) {
        this.momentum = momentum;
    }
    
    
}
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->



                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Klasa.txt
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleOC3" aria-expanded="false"
                                aria-controls="collapseExampleOC3">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
import java.util.ArrayList;
import org.neuroph.core.NeuralNetwork;
import org.neuroph.core.data.DataSet;
import org.neuroph.core.data.DataSetRow;
import org.neuroph.core.events.LearningEvent;
import org.neuroph.core.events.LearningEventListener;
import org.neuroph.nnet.MultiLayerPerceptron;
import org.neuroph.nnet.learning.MomentumBackpropagation;
import org.neuroph.util.data.norm.MaxNormalizer;
import org.neuroph.util.data.norm.Normalizer;

/*
  * To change this license header, choose License Headers in Project Properties.
  * To change this template file, choose Tools | Templates
  * and open the template in the editor.
  */
/**
  *
  * @author Mirko
  */
public class Klasa implements LearningEventListener {
    
    String podaci = "diabetes_data.csv";
    int brojUlaza = 30;
    int brojIzlaza = 1;
    ArrayList&lt;Trening&gt; treninzi = new ArrayList&lt;&gt;();
    
    public static void main(String[] args) {
        (new Klasa()).run();
    }
    
    @Override
    public void handleLearningEvent(LearningEvent event) {
        MomentumBackpropagation mp = (MomentumBackpropagation) event.getSource();
        // ako je ono sa greskom bilo bi BackPropagation
        System.out.println("Trenutna iteracija " + mp.getCurrentIteration() + " totalnaGreskaMreze " + mp.getTotalNetworkError());
    }
    
    private void run() {
        DataSet dataset = DataSet.createFromFile(podaci, brojUlaza, brojIzlaza, ",");
        Normalizer n = new MaxNormalizer(dataset);
        n.normalize(dataset);
        dataset.shuffle();
        
        DataSet[] trainITest = dataset.createTrainingAndTestSubsets(65, 35);
        DataSet train = trainITest[0];
        DataSet test = trainITest[1];
        int brIteracija = 0;
        
        for (int skriveni = 10; skriveni &lt;= 30; skriveni += 10) {
            for (double koefUcenja = 0.2; koefUcenja &lt;= 0.6; koefUcenja += 0.2) {
                MultiLayerPerceptron mreza = new MultiLayerPerceptron(brojUlaza, skriveni, brojIzlaza);
                mreza.setLabel("mreza sa max acc je sa skrivenim " + skriveni + " i koef. ucenja " + koefUcenja);
                MomentumBackpropagation mp = (MomentumBackpropagation) mreza.getLearningRule();
                // kad je greska umesto momentum parametra IDE!!!! BackPropagation bp=new mreza.getLearningRule()
                mp.setMomentum(0.6);
                //islo bi bp.setMaxError(0.5)
                mp.addListener(this);
                mreza.learn(train);
                
                brIteracija += mp.getCurrentIteration();
                
                Trening t = new Trening(mreza, dataset, mp.getCurrentIteration(), koefUcenja, mp.getMaxError(), mp.getMomentum(), 0);

                // umesto ovog dole bi bilo double razlika i double kvadratnaGreska
                int TP = 0;
                int TN = 0;
                int FP = 0;
                int FN = 0;
                
                double acc = 0;
                
                for (DataSetRow red : test) {
                    // ovo je uvek isto
                    mreza.setInput(red.getInput());
                    mreza.calculate();
                    
                    double[] izlazMreze = mreza.getOutput();
                    double[] zeljeniIzlaz = red.getDesiredOutput();
                    
                    for (int i = 0; i &lt; izlazMreze.length; i++) {
                        // bilo bi 
//                         razlika=(double)(zeljeniIzlaz[i]-izlazMreze[i])
//                          kvadratnaGreska+=razlika*razlika
                        if (zeljeniIzlaz[i] - izlazMreze[i] &gt; 0.5 &amp;&amp; zeljeniIzlaz[i] == 1) {
                            TP++;
                        }
                        
                        if (zeljeniIzlaz[i] - izlazMreze[i] &gt; 0.5 &amp;&amp; zeljeniIzlaz[i] == 0) {
                            FP++;
                        }
                        
                        if (zeljeniIzlaz[i] - izlazMreze[i] &lt; 0.5 &amp;&amp; zeljeniIzlaz[i] == 1) {
                            TN++;
                        }
                        
                        if (zeljeniIzlaz[i] - izlazMreze[i] &lt; 0.5 &amp;&amp; zeljeniIzlaz[i] == 0) {
                            FN++;
                        }
                    }
                    
                }
//              UMESTO SLEDECA 3 REDA BILO BI 
//                 double RMSE=(double)kvdaratnaGreska/test.size();
//                t.setRMSE(rmse);
//                System.out.println("RMSE je: "+rmse);

                acc = (double) (TP + TN) / (TP + TN + FP + FN);
                t.setAcc(acc);
                System.out.println("Acc je: " + acc);
                treninzi.add(t);
            }
        }
        
        System.out.println("br iteracija: " + brIteracija / 3);
        NeuralNetwork nn = prodjiKroz();
        System.out.println("Mreza sa najvecim acc je: " + nn.getLabel());
        nn.save(nn.getLabel() + ".nnet");
        
    }
    
    private NeuralNetwork prodjiKroz() {
        // moze se traziti najveca greska i najveci accuracy ili najm gr. il najm acc.
        Trening maxAcc = treninzi.get(0);
        
        for (Trening trening : treninzi) {
            if (trening.getAcc() &gt; maxAcc.getAcc()) {
                maxAcc = trening;
            }
        }
        
        return maxAcc.getMreza();
    }
    
}              
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->


                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Diabetis_Trening.txt
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleOC3" aria-expanded="false"
                                aria-controls="collapseExampleOC3">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
/*
* To change this license header, choose License Headers in Project Properties.
* To change this template file, choose Tools | Templates
* and open the template in the editor.
*/
package diabetesfeb2018;

import org.neuroph.core.NeuralNetwork;

/**
*
* @author jelica
*/
public class Training {
    private NeuralNetwork neuralNet;
    private int iterations;
    private double accuracy;

    public Training() {
    }

    public Training(NeuralNetwork neuralNet, int iterations, double accuracy) {
        this.neuralNet = neuralNet;
        this.iterations = iterations;
        this.accuracy = accuracy;
    }

    
    public NeuralNetwork getNeuralNet() {
        return neuralNet;
    }

    public int getIterations() {
        return iterations;
    }

    public double getAccuracy() {
        return accuracy;
    }

    public void setNeuralNet(NeuralNetwork neuralNet) {
        this.neuralNet = neuralNet;
    }

    public void setIterations(int iterations) {
        this.iterations = iterations;
    }

    public void setAccuracy(double accuracy) {
        this.accuracy = accuracy;
    }
    
    
    
}
      </pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->


                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Diabetis.txt
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleOC3" aria-expanded="false"
                                aria-controls="collapseExampleOC3">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
/*
* To change this license header, choose License Headers in Project Properties.
* To change this template file, choose Tools | Templates
* and open the template in the editor.
*/
package diabetesfeb2018;

import java.util.ArrayList;
import org.neuroph.core.NeuralNetwork;
import org.neuroph.core.data.DataSet;
import org.neuroph.core.data.DataSetRow;
import org.neuroph.eval.ClassifierEvaluator;
import org.neuroph.eval.Evaluation;
import org.neuroph.eval.classification.ClassificationMetrics;
import org.neuroph.eval.classification.ConfusionMatrix;
import org.neuroph.nnet.MultiLayerPerceptron;
import org.neuroph.nnet.learning.BackPropagation;
import org.neuroph.util.TrainingSetImport;
import org.neuroph.util.data.norm.MaxNormalizer;

/**
*
* @author jelica
*/
public class DiabetesFEB2018 {

    int inputCount = 8;
    int outputCount = 1;
    double[] learningRates = {0.2, 0.4, 0.6};
    ArrayList&lt;Training&gt; trainings = new ArrayList&lt;&gt;();

    /**
    * @param args the command line arguments
    */
    public static void main(String[] args) {
        new DiabetesFEB2018().run();
    }

    private void run() {

        System.out.println("1. Ucitavanje data seta");

        DataSet dataSet = DataSet.createFromFile("diabetes_data.csv", inputCount, outputCount, ",");

        System.out.println("2. Normalizovanje i mesanje data seta");
        MaxNormalizer normalizer = new MaxNormalizer();
        normalizer.normalize(dataSet);
        dataSet.shuffle();

        System.out.println("3. Kreiranje trening i test seta");
        DataSet[] dataSets = dataSet.createTrainingAndTestSubsets(70, 30);
        DataSet train = dataSets[0];
        DataSet test = dataSets[1];

        for (double lr : learningRates) {
            System.out.println("Training neural network for learning rate " + lr);
            MultiLayerPerceptron neuralNet = new MultiLayerPerceptron(inputCount, 20, 10, outputCount);
            BackPropagation bp = neuralNet.getLearningRule();
            bp.setMaxError(0.07);
            bp.setLearningRate(lr);

            neuralNet.learn(train);

            int numOfIterations = bp.getCurrentIteration();
            double accuracy = evaluateAccuracy(neuralNet, test);
            evaluateAccuracyNeuroph(neuralNet, test);

            Training t = new Training(neuralNet, numOfIterations, accuracy);
            trainings.add(t);

            calculateMSENeuroph(neuralNet, test);
            calculateMSE(neuralNet, test);
        }

        printAverageIterations();
        saveMaxAccuracyNet();
    }

    private void evaluateAccuracyNeuroph(MultiLayerPerceptron neuralNet, DataSet test) {
        Evaluation evaluation = new Evaluation();
        evaluation.addEvaluator(new ClassifierEvaluator.Binary(0.5));
        evaluation.evaluateDataSet(neuralNet, test);

        ClassifierEvaluator evaluator = evaluation.getEvaluator(ClassifierEvaluator.Binary.class);
        ConfusionMatrix cm = evaluator.getResult();
        System.out.println("Matrica konfuzije Neuroph: ");
        System.out.println(cm.toString());

        ClassificationMetrics[] metrics = ClassificationMetrics.createFromMatrix(cm);
        ClassificationMetrics.Stats average = ClassificationMetrics.average(metrics);

        System.out.println("Accuracy neuroph: " + average.accuracy);

    }

    private double evaluateAccuracy(MultiLayerPerceptron neuralNet, DataSet test) {
        int tp = 0, tn = 0, fp = 0, fn = 0;

        for (DataSetRow row : test) {
            neuralNet.setInput(row.getInput());
            neuralNet.calculate();

            double actual = row.getDesiredOutput()[0];
            double predicted = neuralNet.getOutput()[0];

            if (actual == 1.0 &amp;&amp; predicted &gt; 0.5) {
                tp++;
            }
            if (actual == 0.0 &amp;&amp; predicted &lt;= 0.5) {
                tn++;
            }
            if (actual == 1.0 &amp;&amp; predicted &lt;= 0.5) {
                fn++;
            }

            if (actual == 0.0 &amp;&amp; predicted &gt; 0.5) {
                fp++;
            }
        }

        double accuracy = (double) (tp + tn) / (tp + tn + fp + fn);

        System.out.println("Accuracy: " + accuracy);

        return accuracy;
    }

    private void saveMaxAccuracyNet() {
        Training max = trainings.get(0);
        for (int i = 1; i &lt; trainings.size(); i++) {
            if (max.getAccuracy() &lt; trainings.get(i).getAccuracy()) {
                max = trainings.get(i);
            }
        }

        System.out.println("Saving net with max accuracy");
        max.getNeuralNet().save("net.nnet");
    }

    private void printAverageIterations() {
        int sumTotal = 0;
        for (Training t : trainings) {
            sumTotal += t.getIterations();
        }
        double averageIterations = (double) sumTotal / trainings.size();
        System.out.println("Prosecan broj iteracija je " + averageIterations);
    }

    private void calculateMSENeuroph(MultiLayerPerceptron neuralNet, DataSet test) {
        Evaluation evaluation = new Evaluation();
        evaluation.addEvaluator(new ClassifierEvaluator.Binary(0.5));
        evaluation.evaluateDataSet(neuralNet, test);

        System.out.println("MSE Neuroph: " + evaluation.getMeanSquareError());
    }

    private void calculateMSE(MultiLayerPerceptron neuralNet, DataSet test) {
        double sumError = 0, meanError = 0;
        for (DataSetRow row : test) {
            neuralNet.setInput(row.getInput());
            neuralNet.calculate();

            double actual = row.getDesiredOutput()[0];
            double predicted = neuralNet.getOutput()[0];

            sumError += Math.pow(actual - predicted, 2);
        }

        meanError = sumError / (2 * test.size());
        System.out.println("MSE: " + meanError);
    }

}        
</pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->


                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Kancer_Trening.txt
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleOC3" aria-expanded="false"
                                aria-controls="collapseExampleOC3">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
/*
* To change this license header, choose License Headers in Project Properties.
* To change this template file, choose Tools | Templates
* and open the template in the editor.
*/
package breastcancerjun2018;

import org.neuroph.core.NeuralNetwork;

/**
*
* @author jelica
*/
public class Training {

    NeuralNetwork neuralNet;
    double error;

    public Training(NeuralNetwork neuralNet, double error) {
        this.neuralNet = neuralNet;
        this.error = error;
    }
    
    
}
        </pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->



                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            Kancer.txt
                            <button class="btn btn-primary btn-sm ml-2 cBTN" type="button" data-toggle="collapse"
                                data-target="#collapseExampleOC3" aria-expanded="false"
                                aria-controls="collapseExampleOC3">+</button>
                            <button class="btn btn-primary btn-sm copy-btn">Copy</button>
                        </p>
                        <hr>
                        <div class="collapse custom-collapse-class" id="collapseExampleOC3">
                            <pre>
/*
* To change this license header, choose License Headers in Project Properties.
* To change this template file, choose Tools | Templates
* and open the template in the editor.
*/
package breastcancerjun2018;

import java.util.ArrayList;
import org.neuroph.core.data.DataSet;
import org.neuroph.core.data.DataSetRow;
import org.neuroph.eval.ClassifierEvaluator;
import org.neuroph.eval.Evaluation;
import org.neuroph.eval.classification.ClassificationMetrics;
import org.neuroph.eval.classification.ConfusionMatrix;
import org.neuroph.nnet.MultiLayerPerceptron;
import org.neuroph.nnet.learning.MomentumBackpropagation;
import org.neuroph.util.data.norm.MaxNormalizer;

/**
*
* @author jelica
*/
public class BreastCancerJUN2018 {

    ArrayList&lt;Training&gt; trainings = new ArrayList&lt;&gt;();
    int inputCount = 30;
    int outputCount = 1;
    double[] learningRates = {0.2, 0.4, 0.6};
    int[] hiddenNeurons = {10, 20, 30};

    /**
    * @param args the command line arguments
    */
    public static void main(String[] args) {
        new BreastCancerJUN2018().run();
    }

    private void run() {
        System.out.println("Ucitavanje dataseta: ");
        DataSet dataset = DataSet.createFromFile("breast_cancer_data.csv", inputCount, outputCount, ",");
        MaxNormalizer normalizer = new MaxNormalizer();
        normalizer.normalize(dataset);
        dataset.shuffle();

        DataSet[] trainAndTest = dataset.createTrainingAndTestSubsets(65, 35);
        DataSet train = trainAndTest[0];
        DataSet test = trainAndTest[1];

        int numberOfTrainings = 0;
        int numberOfIterations = 0;

        for (double lr : learningRates) {
            for (int hn : hiddenNeurons) {
                MultiLayerPerceptron neuralNet = new MultiLayerPerceptron(inputCount, hn, outputCount);
                MomentumBackpropagation bp = (MomentumBackpropagation) neuralNet.getLearningRule();
                bp.setMomentum(0.7);
                bp.setLearningRate(lr);
                bp.setMaxError(0.07);

                neuralNet.learn(train);

                calculateMeanSquaredError(neuralNet, test);
                calculateMeanSquaredErrorNeuroph(neuralNet, test);

                calculateAccuracy(neuralNet, test);
                calculateAccuracyNeuroph(neuralNet, test);

                numberOfTrainings++;
                numberOfIterations += bp.getCurrentIteration();

            }
        }

        saveNetWithMinError();
        System.out.println("Srednja vrednost broja iteracija: " + (double) numberOfIterations / numberOfTrainings);

    }

    private void calculateMeanSquaredError(MultiLayerPerceptron neuralNet, DataSet test) {
        double sumError = 0, meanSquaredError = 0;
        for (DataSetRow row : test) {
            neuralNet.setInput(row.getInput());
            neuralNet.calculate();

            double predicted = neuralNet.getOutput()[0];
            double actual = row.getDesiredOutput()[0];

            double error = Math.pow((predicted - actual), 2);
            sumError += error;
        }

        meanSquaredError = (double) sumError / (2 * test.size());
        System.out.println("Srednja kvadratna greska treninga: " + meanSquaredError);

        Training t = new Training(neuralNet, meanSquaredError);
        trainings.add(t);

    }

    private void calculateMeanSquaredErrorNeuroph(MultiLayerPerceptron neuralNet, DataSet test) {
        Evaluation evaluation = new Evaluation();
        evaluation.addEvaluator(new ClassifierEvaluator.Binary(0.5));
        evaluation.evaluateDataSet(neuralNet, test);

        System.out.println("Srednja kvadratna greska treninga - njihova metoda: " + evaluation.getMeanSquareError());
    }

    private void saveNetWithMinError() {
        Training min = trainings.get(0);
        for (int i = 1; i &lt; trainings.size(); i++) {
            if (min.error &gt; trainings.get(i).error) {
                min = trainings.get(i);
            }
        }

        min.neuralNet.save("neuralNet.nnet");
    }

    private void calculateAccuracyNeuroph(MultiLayerPerceptron neuralNet, DataSet test) {
        Evaluation evaluation = new Evaluation();
        evaluation.addEvaluator(new ClassifierEvaluator.Binary(0.5));
        evaluation.evaluateDataSet(neuralNet, test);

        ClassifierEvaluator evaluator = evaluation.getEvaluator(ClassifierEvaluator.Binary.class);
        ConfusionMatrix matrix = evaluator.getResult();
        ClassificationMetrics[] metrics = ClassificationMetrics.createFromMatrix(matrix);
        ClassificationMetrics.Stats average = ClassificationMetrics.average(metrics);
        double accuracy = average.accuracy;

        System.out.println("Accuracy-njihove metode: " + accuracy);
    }

    private void calculateAccuracy(MultiLayerPerceptron neuralNet, DataSet test) {
        int tp = 0, tn = 0, fp = 0, fn = 0;

        for (DataSetRow row : test) {
            neuralNet.setInput(row.getInput());
            neuralNet.calculate();

            double predicted = neuralNet.getOutput()[0];
            double actual = row.getDesiredOutput()[0];

            if (actual == 1 &amp;&amp; predicted &gt; 0.5) {
                tp++;
            }

            if (actual == 0 &amp;&amp; predicted &lt;= 0.5) {
                tn++;
            }

            if (actual == 1 &amp;&amp; predicted &lt;= 0.5) {
                fn++;
            }

            if (actual == 0 &amp;&amp; predicted &gt; 0.5) {
                fp++;
            }
        }

        double accuracy = (double) (tp + tn) / (tp + tn + fp + fn);
        System.out.println("Accuracy: " + accuracy);
    }

}         
        </pre>

                            <button class="btn btn-primary btn-sm cBTN-close" data-toggle="collapse"
                                data-target="collapseExample3" aria-expanded="false"
                                aria-controls="collapseExample3">-</button>
                        </div>
                        <!-- SECTION END -->



                        <!-- SECTION START -->
                        <p class="font-weight-bold text-dark">
                            <a href="./INTELIGENTNI-SISTEMI-SVI-ALGORITMI.pdf" download>Download PDF
                                (INTELIGENTNI-SISTEMI-SVI-ALGORITMI)</a>
                        </p>
                        <hr>
                        <!-- SECTION END -->

                    </div>


                </div>
                <!-- ---------- IS END ---------- -->



            </div>
        </div>
    </div>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="script.js"></script>
</body>

</html>